{
  "timestamp": "2025-11-16T08:21:45.986Z",
  "summary": {
    "totalFiles": 339,
    "passedFiles": 320,
    "failedFiles": 19,
    "totalViolations": 51,
    "violationsByType": {
      "cqrs": 0,
      "ports": 37,
      "contracts": 0,
      "forbidden": 14,
      "eslintExceptions": 0
    }
  },
  "violations": [
    {
      "filePath": "/home/shangmeilin/cube-castle/cmd/oauth-service/main.js",
      "violations": [
        {
          "type": "ports",
          "line": 13,
          "column": 30,
          "message": "硬编码端口 3000，建议使用 SERVICE_PORTS.FRONTEND_DEV",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              30,
              35
            ],
            "newText": "SERVICE_PORTS.FRONTEND_DEV"
          }
        },
        {
          "type": "ports",
          "line": 13,
          "column": 55,
          "message": "硬编码端口 3001，建议使用 SERVICE_PORTS.FRONTEND_PREVIEW",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              55,
              60
            ],
            "newText": "SERVICE_PORTS.FRONTEND_PREVIEW"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/playwright-report/trace/assets/defaultSettingsView-w0zYjHsW.js",
      "violations": [
        {
          "type": "ports",
          "line": 49,
          "column": 67056,
          "message": "硬编码端口 53687，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              67056,
              67062
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 49,
          "column": 76388,
          "message": "硬编码端口 53687，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              76388,
              76394
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 49,
          "column": 102066,
          "message": "硬编码端口 53687，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              102066,
              102072
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/playwright-report/trace/sw.bundle.js",
      "violations": [
        {
          "type": "ports",
          "line": 3,
          "column": 3034,
          "message": "硬编码端口 1280，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              3034,
              3039
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 3,
          "column": 8420,
          "message": "硬编码端口 1280，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              8420,
              8425
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/activate-suspend-workflow.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 8,
          "column": 34,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              34,
              39
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 8,
          "column": 19,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "'@playwright/test'; const API_BASE = 'http://localhost:9090/api/v1/organization-units'; // 使用 7 位数字编码（首位非 0），满足后端契约；保持"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/architecture-e2e.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 16,
          "column": 54,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              54,
              59
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 26,
          "column": 54,
          "message": "硬编码端口 8090，建议使用 SERVICE_PORTS.GRAPHQL_QUERY_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              54,
              59
            ],
            "newText": "SERVICE_PORTS.GRAPHQL_QUERY_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 93,
          "column": 23,
          "message": "硬编码端口 8091，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              23,
              28
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 94,
          "column": 23,
          "message": "硬编码端口 8092，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              23,
              28
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 95,
          "column": 23,
          "message": "硬编码端口 8093，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              23,
              28
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 96,
          "column": 23,
          "message": "硬编码端口 8094，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              23,
              28
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "forbidden",
          "line": 16,
          "column": 39,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "const response = await fetch('http://localhost:9090/health'); return { status: response.status, ok: r"
        },
        {
          "type": "forbidden",
          "line": 26,
          "column": 39,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "const response = await fetch('http://localhost:8090/health'); return { status: response.status, ok: r"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/business-flow-e2e.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 390,
          "column": 52,
          "message": "硬编码端口 8090，建议使用 SERVICE_PORTS.GRAPHQL_QUERY_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              52,
              57
            ],
            "newText": "SERVICE_PORTS.GRAPHQL_QUERY_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 473,
          "column": 52,
          "message": "硬编码端口 8090，建议使用 SERVICE_PORTS.GRAPHQL_QUERY_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              52,
              57
            ],
            "newText": "SERVICE_PORTS.GRAPHQL_QUERY_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 390,
          "column": 37,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "> { const response = await fetch('http://localhost:8090/graphql', { method: 'POST', headers: { 'Co"
        },
        {
          "type": "forbidden",
          "line": 473,
          "column": 37,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "> { const response = await fetch('http://localhost:8090/graphql', { method: 'POST', headers: { 'Co"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/name-validation-parentheses.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 7,
          "column": 38,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              38,
              43
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 8,
          "column": 36,
          "message": "硬编码端口 8090，建议使用 SERVICE_PORTS.GRAPHQL_QUERY_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              36,
              41
            ],
            "newText": "SERVICE_PORTS.GRAPHQL_QUERY_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 7,
          "column": 23,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "含括号），验证返回状态与名称回显 const COMMAND_BASE = 'http://localhost:9090'; const QUERY_BASE = 'http://localhost:8090/graphql'; cons"
        },
        {
          "type": "forbidden",
          "line": 8,
          "column": 21,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "://localhost:9090'; const QUERY_BASE = 'http://localhost:8090/graphql'; const TARGET_CODE = process.env.E2E_TARGET_CODE"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/operational-monitoring-e2e.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 3,
          "column": 38,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              38,
              43
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 3,
          "column": 23,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "playwright/test' const COMMAND_BASE = 'http://localhost:9090' const DEFAULT_TENANT = '3b99930c-4dc6-4cc9-8e4d-7d960a931"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/position-crud-full-lifecycle.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 21,
          "column": 72,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              72,
              77
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 21,
          "column": 57,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "SE_URL = process.env.PW_COMMAND_URL || 'http://localhost:9090'; const TENANT_ID = process.env.PW_TENANT_ID || '3b99930c-"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/position-observability.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 80,
          "column": 61,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              61,
              66
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 103,
          "column": 62,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              62,
              67
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 80,
          "column": 46,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "const createResp = await request.post('http://localhost:9090/api/v1/positions', { headers: { Authoriz"
        },
        {
          "type": "forbidden",
          "line": 103,
          "column": 47,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "const versionResp = await request.post(`http://localhost:9090/api/v1/positions/${positionCode}/versions`, { head"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/temporal-editform-defaults-smoke.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 16,
          "column": 33,
          "message": "硬编码端口 8090，建议使用 SERVICE_PORTS.GRAPHQL_QUERY_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              33,
              38
            ],
            "newText": "SERVICE_PORTS.GRAPHQL_QUERY_SERVICE"
          }
        },
        {
          "type": "ports",
          "line": 17,
          "column": 33,
          "message": "硬编码端口 3000，建议使用 SERVICE_PORTS.FRONTEND_DEV",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              33,
              38
            ],
            "newText": "SERVICE_PORTS.FRONTEND_DEV"
          }
        },
        {
          "type": "ports",
          "line": 20,
          "column": 35,
          "message": "硬编码端口 3000，建议使用 SERVICE_PORTS.FRONTEND_DEV",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              35,
              40
            ],
            "newText": "SERVICE_PORTS.FRONTEND_DEV"
          }
        },
        {
          "type": "forbidden",
          "line": 16,
          "column": 18,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "); const hasServer = (await ping('http://localhost:8090/health')) || (await ping('http://localhost:3000', 1000"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/temporal-graphql-comprehensive.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 17,
          "column": 28,
          "message": "硬编码端口 3000，建议使用 SERVICE_PORTS.FRONTEND_DEV",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              28,
              33
            ],
            "newText": "SERVICE_PORTS.FRONTEND_DEV"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/frontend/tests/e2e/utils/authToken.ts",
      "violations": [
        {
          "type": "ports",
          "line": 22,
          "column": 95,
          "message": "硬编码端口 9090，建议使用 SERVICE_PORTS.REST_COMMAND_SERVICE",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              95,
              100
            ],
            "newText": "SERVICE_PORTS.REST_COMMAND_SERVICE"
          }
        },
        {
          "type": "forbidden",
          "line": 22,
          "column": 80,
          "message": "禁止直连后端固定端口 (:9090/:8090)，必须通过单基址代理（/api/v1、/graphql）访问",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": ".PW_COMMAND_URL?.replace(/\\/$/, '') || 'http://localhost:9090'; const __filename = fileURLToPath(import.meta.url); const"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/scripts/quality/architecture-validator.js",
      "violations": [
        {
          "type": "forbidden",
          "line": 52,
          "column": 34,
          "message": "禁止使用未立项的 /organization-units/temporal REST 路径",
          "code": "forbidden-endpoint",
          "severity": "error",
          "context": "al/gi, description: '禁止使用未立项的 /organization-units/temporal REST 路径' }, { // 直接连接后端固定"
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/third_party/github.com/99designs/gqlgen/_examples/chat/src/index.js",
      "violations": [
        {
          "type": "ports",
          "line": 18,
          "column": 57,
          "message": "硬编码端口 8085，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              57,
              62
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 21,
          "column": 28,
          "message": "硬编码端口 8085，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              28,
              33
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 25,
          "column": 28,
          "message": "硬编码端口 8085，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              28,
              33
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 32,
          "column": 54,
          "message": "硬编码端口 8085，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              54,
              59
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/third_party/github.com/99designs/gqlgen/_examples/federation/gateway/index.js",
      "violations": [
        {
          "type": "ports",
          "line": 8,
          "column": 54,
          "message": "硬编码端口 4001，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              54,
              59
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 9,
          "column": 54,
          "message": "硬编码端口 4002，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              54,
              59
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        },
        {
          "type": "ports",
          "line": 10,
          "column": 53,
          "message": "硬编码端口 4003，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              53,
              58
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/third_party/github.com/99designs/gqlgen/_examples/federation/integration-test.js",
      "violations": [
        {
          "type": "ports",
          "line": 5,
          "column": 53,
          "message": "硬编码端口 4000，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              53,
              58
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/third_party/github.com/99designs/gqlgen/integration/codegen.ts",
      "violations": [
        {
          "type": "ports",
          "line": 5,
          "column": 60,
          "message": "硬编码端口 8080，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              60,
              65
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    },
    {
      "filePath": "/home/shangmeilin/cube-castle/third_party/github.com/99designs/gqlgen/integration/src/__test__/integration.spec.ts",
      "violations": [
        {
          "type": "ports",
          "line": 45,
          "column": 60,
          "message": "硬编码端口 8080，建议使用 SERVICE_PORTS.APPROPRIATE_PORT",
          "code": "no-hardcoded-ports",
          "severity": "error",
          "fix": {
            "range": [
              60,
              65
            ],
            "newText": "SERVICE_PORTS.APPROPRIATE_PORT"
          }
        }
      ]
    }
  ]
}