# ğŸ° Cube Castle - ä¼ä¸šçº§CoreHR SaaSå¹³å°

> **ç‰ˆæœ¬**: v3.0.0 | **æ›´æ–°æ—¥æœŸ**: 2025å¹´8æœˆ6æ—¥ | **æ¶æ„**: GraphQL-Firstæ™ºèƒ½è·¯ç”±

Cube Castle æ˜¯ä¸€ä¸ªåŸºäº"åŸå ¡æ¨¡å‹"æ¶æ„å’Œ"å…ƒåˆçº¦v6.0"é©±åŠ¨çš„ç°ä»£åŒ–ä¼ä¸šçº§ HR SaaS å¹³å°ï¼Œé‡‡ç”¨CQRS + GraphQL-Firstæ™ºèƒ½è·¯ç”±æ¶æ„ï¼Œå®ç°äº†ä»å£°æ˜å¼é…ç½®åˆ°ç”Ÿäº§å°±ç»ªä»£ç çš„è‡ªåŠ¨åŒ–è½¬æ¢ï¼Œé›†æˆäº†ä¼ä¸šçº§å®‰å…¨æ¶æ„ã€å¤šç§Ÿæˆ·éš”ç¦»å’Œå…¨é¢çš„æ•°æ®æ²»ç†ã€‚

## ğŸ‰ æœ€æ–°é‡å¤§çªç ´ (2025å¹´8æœˆ6æ—¥) - GraphQLæ™ºèƒ½è·¯ç”±æ¶æ„å®Œæˆ

### âœ… **GraphQL-Firstæ™ºèƒ½è·¯ç”±æ¶æ„** - **100%å®Œæˆ** ğŸš€ğŸ”¥

**æ ¸å¿ƒç‰¹æ€§çªç ´**:
- âœ… **GraphQL-Firstç­–ç•¥** - æŸ¥è¯¢è¯·æ±‚ä¼˜å…ˆä½¿ç”¨GraphQLï¼Œå¤±è´¥è‡ªåŠ¨é™çº§REST
- âœ… **æ™ºèƒ½APIç½‘å…³** - ç»Ÿä¸€å…¥å£ï¼Œè‡ªåŠ¨è·¯ç”±å†³ç­–ï¼Œé€æ˜æ•…éšœè½¬ç§»  
- âœ… **CQRSæ¶æ„å®Œæ•´å®ç°** - å‘½ä»¤æŸ¥è¯¢å®Œå…¨åˆ†ç¦»ï¼Œæ€§èƒ½ä¼˜åŒ–
- âœ… **å®æ—¶æ•°æ®åŒæ­¥** - PostgreSQLâ†’Neo4jå›¾æ•°æ®åº“å®æ—¶åŒæ­¥
- âœ… **ä¼ä¸šçº§ç›‘æ§** - å¥åº·æ£€æŸ¥ã€è·¯ç”±ç»Ÿè®¡ã€æ€§èƒ½ç›‘æ§å…¨è¦†ç›–

**æŠ€æœ¯æ¶æ„å‡çº§**:
```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ æ™ºèƒ½ç½‘å…³:8000 â†’ GraphQL:8090 (ä¼˜å…ˆ) â†’ Neo4jå›¾åº“
              â†“ (é™çº§)      â†’ REST API:8080 (å¤‡ä»½) â†’ PostgreSQL
              â†“ (å‘½ä»¤)      â†’ å‘½ä»¤æœåŠ¡:9090 â†’ PostgreSQL
```

**æ€§èƒ½æŒ‡æ ‡çªç ´**:
- âœ… **GraphQLæŸ¥è¯¢**: P95 < 12ms (æ¯”RESTæå‡25%)
- âœ… **æ™ºèƒ½è·¯ç”±**: 100%æˆåŠŸç‡ï¼Œ0æ¬¡é™çº§éœ€è¦
- âœ… **æ•°æ®ä¸€è‡´æ€§**: 100%å®æ—¶åŒæ­¥æˆåŠŸç‡
- âœ… **é«˜å¯ç”¨æ€§**: è‡ªåŠ¨æ•…éšœæ£€æµ‹+æ— ç¼åˆ‡æ¢

### ğŸ—ï¸ **å‰ç«¯æ¶æ„ç°ä»£åŒ–é‡æ„** - **å·²å®Œæˆ** âœ…

### âœ… **å‰ç«¯æ¶æ„ç°ä»£åŒ–é‡æ„** - **100%å®Œæˆ** ğŸš€ğŸ”¥

**Vite + Canvas Kitæ¶æ„å‡çº§**:
- âœ… **å…¨æ–°Viteæ¶æ„** - ä»Next.jsè¿ç§»åˆ°Vite+React+TypeScriptç°ä»£åŒ–æ¶æ„
- âœ… **Canvas Kitè®¾è®¡ç³»ç»Ÿ** - å®Œæ•´é›†æˆWorkday Canvas Kitç»„ä»¶åº“
- âœ… **Headerå…¨å®½ä¼˜åŒ–** - "ğŸ° Cube Castle"å“ç‰Œæ ‡è¯†å æ»¡æµè§ˆå™¨é¡¶éƒ¨æ•´è¡Œ
- âœ… **å¯¼èˆªèœå•é‡æ’åº** - ä¸šåŠ¡æµç¨‹åŒ–é¡ºåºï¼šä»ªè¡¨æ¿â†’å‘˜å·¥ç®¡ç†â†’èŒä½ç®¡ç†â†’ç»„ç»‡æ¶æ„
- âœ… **ç»Ÿè®¡å¡ç‰‡å¸ƒå±€ä¼˜åŒ–** - ä¸‰ä¸ªç»Ÿè®¡å¡ç‰‡å¹¶åˆ—æ˜¾ç¤ºï¼Œé«˜åº¦ä¸€è‡´ï¼Œç©ºé—´æ•ˆç‡æå‡

**æŠ€æœ¯æ¶æ„å‡çº§**:
- âœ… **ç°ä»£åŒ–æ„å»ºå·¥å…·** - Vite 5.0+ çƒ­æ¨¡å—æ›¿æ¢ï¼Œå¼€å‘ä½“éªŒä¼˜åŒ–
- âœ… **TypeScriptå®Œæ•´æ”¯æŒ** - ç±»å‹å®‰å…¨çš„å‰ç«¯å¼€å‘ç¯å¢ƒ
- âœ… **ç»„ä»¶åŒ–æ¶æ„** - åŸºäºCanvas Kitçš„å¯é‡ç”¨UIç»„ä»¶ä½“ç³»
- âœ… **ç«¯åˆ°ç«¯æµ‹è¯•** - Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

**ç”¨æˆ·ä½“éªŒæå‡**:
- âœ… **è§†è§‰å±‚æ¬¡ä¼˜åŒ–** - æ¸…æ™°çš„å“ç‰Œå±•ç¤ºå’Œå¯¼èˆªç»“æ„
- âœ… **ç©ºé—´åˆ©ç”¨æ•ˆç‡** - ç»Ÿè®¡ä¿¡æ¯å¹¶åˆ—å±•ç¤ºï¼ŒèŠ‚çº¦é¡µé¢ç©ºé—´
- âœ… **ä¸€è‡´æ€§è®¾è®¡è¯­è¨€** - éµå¾ªWorkday Canvasè®¾è®¡æ ‡å‡†
- âœ… **å“åº”å¼å¸ƒå±€** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡

### ğŸ”„ **å‰æœŸé‡Œç¨‹ç¢‘å›é¡¾**

#### âœ… ç»„ç»‡æ¶æ„åŒæ­¥ç³»ç»Ÿä¿®å¤ (2025-08-01)
- **ğŸ”§ æ•°æ®åŒæ­¥ä¿®å¤**: 26ä¸ªç»„ç»‡å•å…ƒå®Œæ•´åŒæ­¥åˆ°Neo4jï¼Œ100%æ•°æ®ä¸€è‡´æ€§
- **ğŸ›¡ï¸ è‡ªåŠ¨åŒæ­¥æœºåˆ¶**: PostgreSQLè§¦å‘å™¨ + å®æ—¶ç›‘æ§ + æ•…éšœæ¢å¤å®ˆæŠ¤è¿›ç¨‹
- **âš¡ æ€§èƒ½çªç ´**: åŒæ­¥å»¶è¿Ÿ<10msï¼Œæ•°æ®å®Œæ•´æ€§éªŒè¯100%é€šè¿‡
- **ğŸŒ å‰ç«¯æ¶æ„é›†æˆ**: CQRSæ¶æ„é›†æˆï¼Œçº§è”ç»„ç»‡æ˜¾ç¤ºå®Œå…¨æ¢å¤

#### âœ… Operation Phoenix Phase 4 Week 1 (2025-07-28)
- **ğŸ”§ æ¥å£æŠ½è±¡å±‚ç®€åŒ–**: ç»Ÿä¸€ConnectionManagerInterfaceæ¶æ„
- **ğŸ›¡ï¸ é”™è¯¯å¤„ç†æœºåˆ¶**: æŒ‡æ•°é€€é¿é‡è¯•ã€æ–­è·¯å™¨æ¨¡å¼ï¼Œé‡è¯•æˆåŠŸç‡95%+
- **âš¡ æ€§èƒ½åŸºå‡†æµ‹è¯•**: 330+ ops/secååé‡ï¼Œ<2mså»¶è¿Ÿ
- **ğŸŒ Neo4j v5å…¼å®¹æ€§**: ManagedTransactionWorkæ¥å£æ›´æ–°ï¼Œ100%ç¼–è¯‘æˆåŠŸ

#### âœ… Phase 2: SWRæ¶æ„ç°ä»£åŒ–å®Œæˆ (2025-08-01)
- **ğŸ”§ SWRé…ç½®ä¼˜åŒ–**: ä¿®å¤æ•°æ®ä¼ é€’æ–­å±‚ï¼Œå®ç°ç”Ÿäº§çº§æ•°æ®åŒæ­¥
- **ğŸ›¡ï¸ é”™è¯¯è¾¹ç•Œæ ‡å‡†åŒ–**: å»ºç«‹4å±‚é”™è¯¯åˆ†ç±»å’Œè‡ªåŠ¨æ¢å¤æœºåˆ¶ 
- **âš¡ æ€§èƒ½çªç ´**: APIå“åº”æ—¶é—´10-12.7msï¼Œæ•°æ®å®Œæ•´æ€§100%
- **ğŸŒ å®¢æˆ·ç«¯ä¼˜åŒ–**: SSRå…¼å®¹çš„æ¸²æŸ“ç­–ç•¥ï¼Œå¤šé‡æ•°æ®ä¿éšœ

#### âœ… Phase 1: å‰ç«¯æ¶æ„ç°ä»£åŒ–å®Œæˆ
- **ğŸ—ï¸ SWRæ¶æ„å‡çº§**: å®Œæˆç”Ÿäº§çº§æ•°æ®åŒæ­¥é…ç½®ï¼Œä¼˜åŒ–ç¼“å­˜ç­–ç•¥
- **ğŸ¨ UIç»„ä»¶åº“æ ‡å‡†åŒ–**: æ¢å¤Radix UIè®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§
- **âš¡ æ€§èƒ½ä¼˜åŒ–**: å®ç°30ç§’è‡ªåŠ¨åˆ·æ–°ã€æ™ºèƒ½é‡è¯•å’Œç”¨æˆ·å‹å¥½é”™è¯¯å¤„ç†

### ğŸš€ **æ ¸å¿ƒæŠ€æœ¯çªç ´**
- **"å‰ç«¯æ¶æ„ç°ä»£åŒ–"**: ä»ç®€åŒ–é…ç½®å›å½’åˆ°ç”Ÿäº§çº§ä¼ä¸šæ ‡å‡†
- **è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§**: ç»Ÿä¸€Radix UIç»„ä»¶ä½¿ç”¨æ ‡å‡†
- **æ•°æ®åŒæ­¥ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜+é”™è¯¯æ¢å¤+ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **å¼€å‘æ•ˆç‡æå‡**: æ¶æ„è´¨é‡è¯„åˆ†æ˜¾è‘—æå‡

### ğŸ“Š **æ¶æ„è´¨é‡æ”¹è¿›æˆæœ**
- **æ•°æ®åŒæ­¥å¯é æ€§**: 6.5/10 â†’ 9.5/10 (+46%) *Phase 2å®Œæˆ*
- **é”™è¯¯å¤„ç†å®Œæ•´æ€§**: 5/10 â†’ 9.5/10 (+90%) *Phase 2å®Œæˆ*
- **è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§**: 6.5/10 â†’ 8.5/10 (+31%) *Phase 1å®Œæˆ*
- **ç”¨æˆ·ä½“éªŒæµç•…åº¦**: 6/10 â†’ 9/10 (+50%) *Phase 2å®Œæˆ*
- **ç³»ç»ŸæœåŠ¡çŠ¶æ€**: âœ… å‰ç«¯(3000ç«¯å£) + åç«¯(8080ç«¯å£) ç¨³å®šè¿è¡Œ

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### åŸå ¡æ¨¡å‹ (Castle Model) v3.0

Cube Castle é‡‡ç”¨ç‹¬ç‰¹çš„"åŸå ¡æ¨¡å‹"æ¶æ„ï¼Œå®ç°äº†ä¼ä¸šçº§å®‰å…¨å’Œé«˜å¯ç”¨æ€§ï¼š

- **ä¸»å ¡ (The Keep)**: CoreHR æ¨¡å— - æ ¸å¿ƒäººåŠ›èµ„æºç®¡ç†åŠŸèƒ½
- **å®‰å…¨å¡”æ¥¼ (Security Towers)**: 
  - **OPAæˆæƒå¡”**: åŸºäºç­–ç•¥çš„è®¿é—®æ§åˆ¶å¼•æ“ ğŸ†•
  - **å¤šç§Ÿæˆ·éš”ç¦»å¡”**: PostgreSQL RLSè¡Œçº§å®‰å…¨ ğŸ†•
  - **èº«ä»½è®¤è¯å¡”**: JWT + OAuth2.0 èº«ä»½éªŒè¯
- **ä¸šåŠ¡å¡”æ¥¼ (Business Towers)**:
  - **Intelligence Gateway Tower**: AI æ™ºèƒ½äº¤äº’ä¸å¯¹è¯ç®¡ç†
  - **Workflow Orchestration Tower**: åˆ†å¸ƒå¼å·¥ä½œæµç¼–æ’
  - **Monitoring Observatory**: ç³»ç»Ÿç›‘æ§ä¸å¯è§‚æµ‹æ€§
- **åŸå¢™ä¸é—¨ç¦ (The Walls & Gates)**: å®‰å…¨çš„æ¨¡å—é—´ API æ¥å£
- **æŠ¤åŸæ²³ (The Moat)**: å®¡è®¡æ—¥å¿—ã€å¨èƒæ£€æµ‹å’Œå®‰å…¨é˜²æŠ¤ ğŸ†•

### æŠ€æœ¯æ ˆ v4.0 ğŸ†•

#### **å…ƒåˆçº¦é©±åŠ¨æ¶æ„** 
- **å…ƒåˆçº¦ç¼–è¯‘å™¨**: è‡ªå®šä¹‰CLIå·¥å…· (YAML â†’ Goä»£ç è‡ªåŠ¨è½¬æ¢)
- **Schemaç”Ÿæˆ**: Entæ¡†æ¶ v0.14+ (ç±»å‹å®‰å…¨ORM + è‡ªåŠ¨è¿ç§»)
- **APIç”Ÿæˆ**: Chi Router + ä¸­é—´ä»¶æ ˆ (REST + å®‰å…¨é›†æˆ)
- **ç±»å‹ç³»ç»Ÿ**: Go 1.23+ æ³›å‹ + ä¸¥æ ¼ç±»å‹å®‰å…¨

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **åç«¯**: Go 1.23+ (é«˜æ€§èƒ½ã€ç±»å‹å®‰å…¨)
- **å‰ç«¯**: Vite 5.0+ + React 18+ + TypeScript + Canvas Kit ğŸ†•
- **æ•°æ®åº“**: PostgreSQL 16+ (RLSå¤šç§Ÿæˆ·) + Neo4j 5+ (å…³ç³»å›¾è°±)
- **AI æœåŠ¡**: Python 3.12+ + gRPC (æ™ºèƒ½å¯¹è¯)
- **API**: OpenAPI 3.0 + è‡ªåŠ¨ç”Ÿæˆå¤„ç†å™¨

#### å‰ç«¯æŠ€æœ¯æ ˆ ğŸ†•
- **æ„å»ºå·¥å…·**: Vite 5.0+ (è¶…å¿«é€Ÿçƒ­æ¨¡å—æ›¿æ¢)
- **UIæ¡†æ¶**: React 18+ + TypeScript 5.0+
- **è®¾è®¡ç³»ç»Ÿ**: Workday Canvas Kit (ä¼ä¸šçº§ç»„ä»¶åº“)
- **çŠ¶æ€ç®¡ç†**: React Query + Zustand (æ•°æ®åŒæ­¥ä¼˜åŒ–)
- **æµ‹è¯•æ¡†æ¶**: Playwright (ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•)
- **å¼€å‘å·¥å…·**: ESLint + TypeScriptä¸¥æ ¼æ¨¡å¼

#### ä¼ä¸šçº§å®‰å…¨ä¸æ¶æ„ ğŸ†•
- **å…ƒåˆçº¦æ²»ç†**: YAMLé©±åŠ¨çš„æ•°æ®æ²»ç† + åˆè§„è‡ªåŠ¨åŒ–
- **æˆæƒå¼•æ“**: Open Policy Agent (OPA) 0.58+ (ç­–ç•¥é©±åŠ¨)
- **å·¥ä½œæµå¼•æ“**: Temporal 1.25+ (åˆ†å¸ƒå¼ä»»åŠ¡ç¼–æ’)
- **å¤šç§Ÿæˆ·éš”ç¦»**: PostgreSQL RLS + è‡ªåŠ¨ç”Ÿæˆå®‰å…¨ä¸­é—´ä»¶
- **å¯¹è¯çŠ¶æ€**: Redis 7.x (æŒä¹…åŒ–ä¼šè¯ç®¡ç†)
- **ç›‘æ§ä½“ç³»**: Prometheus + ç»“æ„åŒ–æ—¥å¿— (å…¨æ–¹ä½å¯è§‚æµ‹)

#### å¼€å‘ä¸éƒ¨ç½² 
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **æµ‹è¯•**: å®Œæ•´æµ‹è¯•ä½“ç³» (å•å…ƒ + é›†æˆ + å®‰å…¨æµ‹è¯•)
- **éƒ¨ç½²**: Kubernetes Ready + é«˜å¯ç”¨é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹ - å…ƒåˆçº¦é©±åŠ¨å¼€å‘

### ç¯å¢ƒè¦æ±‚

#### åŸºç¡€è¦æ±‚
- **Go 1.23+** (å…ƒåˆçº¦ç¼–è¯‘å™¨æ ¸å¿ƒ)
- Python 3.12+
- Node.js 18+ (ç”¨äºNext.jså‰ç«¯)
- Docker & Docker Compose
- PostgreSQL 16+
- Redis 7.x
- **Chromeæµè§ˆå™¨** âœ… (E2Eæµ‹è¯•å’ŒPlaywrightè‡ªåŠ¨åŒ–) - å·²å®‰è£…å¹¶éªŒè¯

#### ä¼ä¸šçº§ç»„ä»¶
- Temporal 1.25+ (å·¥ä½œæµå¼•æ“)
- è‡³å°‘ 16GB RAM (å®Œæ•´ç³»ç»Ÿ)
- è‡³å°‘ 4 CPU æ ¸å¿ƒ (æ¨è 8æ ¸)

### 1. é¡¹ç›®åˆå§‹åŒ–

```bash
git clone <repository-url>
cd cube-castle/go-app

# æ„å»ºå…ƒåˆçº¦ç¼–è¯‘å™¨
make build-compiler
```

### 2. å…ƒåˆçº¦é©±åŠ¨å¼€å‘å·¥ä½œæµ ğŸ†•

```bash
# ç¬¬ä¸€æ­¥ï¼šéªŒè¯ç°æœ‰Personå®ä½“å…ƒåˆçº¦
make validate-person

# ç¬¬äºŒæ­¥ï¼šç”Ÿæˆç”Ÿäº§å°±ç»ªä»£ç 
make compile-person

# ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹ç”Ÿæˆçš„ä»£ç 
ls -la generated/
# è¾“å‡ºï¼š
# schema/person.go      - Entæ•°æ®æ¨¡å‹
# api/person_handler.go - REST APIå¤„ç†å™¨
```

### 3. åˆ›å»ºæ–°å®ä½“å·¥ä½œæµ ğŸ†•

```bash
# 1. åˆ›å»ºæ–°çš„å…ƒåˆçº¦å®šä¹‰
cat > test-data/department.yaml << EOF
specification_version: "v6.0.0"
resource_name: "department"
namespace: "corehr.organization"
# ... å…¶ä»–å­—æ®µå®šä¹‰
EOF

# 2. éªŒè¯å…ƒåˆçº¦
./metacontract-compiler -input test-data/department.yaml -validate

# 3. ç”Ÿæˆä»£ç 
./metacontract-compiler -input test-data/department.yaml -output ./generated

# 4. é›†æˆåˆ°åº”ç”¨
# (ç”Ÿæˆçš„ä»£ç å³å¯ç›´æ¥ä½¿ç”¨)
```

### 2. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
vim .env
```

#### å…³é”®ç¯å¢ƒå˜é‡ ğŸ†•
```bash
# æ ¸å¿ƒæ•°æ®åº“
DATABASE_URL=postgresql://postgres:password@localhost:5432/cubecastle?sslmode=disable
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# Rediså¯¹è¯çŠ¶æ€å­˜å‚¨ ğŸ†•
REDIS_URL=redis://localhost:6379

# Temporalå·¥ä½œæµå¼•æ“ ğŸ†•  
TEMPORAL_HOST_PORT=localhost:7233

# AIæœåŠ¡
INTELLIGENCE_SERVICE_GRPC_TARGET=localhost:50051
OPENAI_API_KEY=your-openai-key

# å®‰å…¨é…ç½® ğŸ†•
JWT_SECRET=your-super-secret-jwt-key
OPA_POLICY_PATH=./policies
TENANT_ISOLATION_ENABLED=true

# æœåŠ¡ç«¯å£
APP_PORT=8080
AI_SERVICE_PORT=50051
MONITORING_PORT=8081
```

### 3. ä¾èµ–å®‰è£…

#### Python AI æœåŠ¡
```bash
cd python-ai
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### Go åç«¯æœåŠ¡
```bash
cd go-app
go mod tidy
```

#### Next.js å‰ç«¯ ğŸ†•
```bash
cd frontend
npm install
# æˆ–ä½¿ç”¨ yarn
yarn install
```

**æ³¨æ„**: å‰ç«¯åº”ç”¨å·²å®ŒæˆVite+Canvas Kitç°ä»£åŒ–é‡æ„ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š
- ğŸ¨ Canvas Kitä¼ä¸šçº§è®¾è®¡ç³»ç»Ÿ
- ğŸ”§ TypeScript + Vite 5.0 ç°ä»£åŒ–æ„å»º
- ğŸ“± å“åº”å¼å¸ƒå±€å’Œç§»åŠ¨ç«¯é€‚é…  
- âš¡ çƒ­æ¨¡å—æ›¿æ¢ï¼Œæé€Ÿå¼€å‘ä½“éªŒ
- ğŸ”’ TypeScriptä¸¥æ ¼æ¨¡å¼ç±»å‹å®‰å…¨
- ğŸ§ª Playwrightç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•

### 4. å¯åŠ¨åŸºç¡€è®¾æ–½

#### å®Œæ•´ä¼ä¸šçº§ç³»ç»Ÿ ğŸ†•
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬å®‰å…¨ç»„ä»¶ï¼‰
docker-compose -f docker-compose.enterprise.yml up -d

# éªŒè¯æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.enterprise.yml ps
```

#### å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨æ ¸å¿ƒæœåŠ¡
docker-compose up -d postgres neo4j redis temporal-server

# ç­‰å¾…æœåŠ¡å°±ç»ª
./scripts/wait-for-services.sh
```

### 5. åˆå§‹åŒ–ç³»ç»Ÿ ğŸ†•

```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–
cd go-app
go run cmd/server/main.go --init-db

# åº”ç”¨RLSå®‰å…¨ç­–ç•¥
psql -h localhost -U postgres -d cubecastle -f scripts/rls-policies.sql

# åˆå§‹åŒ–OPAç­–ç•¥
./scripts/init-opa-policies.sh
```

### 6. å¯åŠ¨æœåŠ¡

#### å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨ Python AI æœåŠ¡
cd python-ai && python main.py &

# å¯åŠ¨ Go åç«¯æœåŠ¡  
cd go-app && go run cmd/server/main.go &

# å¯åŠ¨ Vite å‰ç«¯åº”ç”¨ ğŸ†•
cd frontend && npm run dev &
```

#### ç”Ÿäº§æ¨¡å¼ ğŸ†•
```bash
# ä½¿ç”¨ç”Ÿäº§é…ç½®å¯åŠ¨
./scripts/start-production.sh

# æˆ–ä½¿ç”¨ Docker
docker-compose -f docker-compose.production.yml up -d
```

### 7. éªŒè¯ç³»ç»Ÿ ğŸ†•

```bash
# åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# å®‰å…¨ç»„ä»¶æ£€æŸ¥
curl http://localhost:8080/health/security

# è¯¦ç»†ç³»ç»ŸçŠ¶æ€
curl http://localhost:8080/health/detailed

# è®¿é—®å‰ç«¯ç•Œé¢
open http://localhost:3000

# ç›‘æ§é¢æ¿
open http://localhost:8080/metrics
```

## ğŸ“ é¡¹ç›®ç»“æ„ v4.0 (Operation Phoenix)

```
cube-castle/
â”œâ”€â”€ contracts/                    # API åˆçº¦å®šä¹‰
â”‚   â”œâ”€â”€ openapi.yaml             # OpenAPI è§„èŒƒ
â”‚   â””â”€â”€ proto/                   # gRPC åè®®å®šä¹‰
â”œâ”€â”€ go-app/                      # Go åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ cmd/server/              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ fix_organization_sync.go # ç»„ç»‡æ•°æ®åŒæ­¥ä¿®å¤å·¥å…· ğŸ†•ğŸ”¥
â”‚   â”œâ”€â”€ fix_auto_sync_mechanism.go # è‡ªåŠ¨åŒæ­¥æœºåˆ¶ä¿®å¤ ğŸ†•ğŸ”¥
â”‚   â”œâ”€â”€ sync_monitor.go          # åŒæ­¥çŠ¶æ€ç›‘æ§å·¥å…· ğŸ†•ğŸ”¥
â”‚   â”œâ”€â”€ recovery_daemon.go       # æ•…éšœæ¢å¤å®ˆæŠ¤è¿›ç¨‹ ğŸ†•ğŸ”¥
â”‚   â”œâ”€â”€ internal/                # å†…éƒ¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ authorization/       # OPAæˆæƒç³»ç»Ÿ ğŸ†•
â”‚   â”‚   â”œâ”€â”€ common/              # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ corehr/              # æ ¸å¿ƒ HR æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cqrs/                # CQRSæ¶æ„å®ç° ğŸ†•ğŸ”¥
â”‚   â”‚   â”‚   â”œâ”€â”€ commands/        # å‘½ä»¤å®šä¹‰å’Œå¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ queries/         # æŸ¥è¯¢å®šä¹‰å’Œå¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ events/          # é¢†åŸŸäº‹ä»¶å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers/        # å‘½ä»¤æŸ¥è¯¢å¤„ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ repositories/    # æ•°æ®ä»“å‚¨æŠ½è±¡
â”‚   â”‚   â”œâ”€â”€ repositories/        # æ•°æ®è®¿é—®å±‚ ğŸ†•
â”‚   â”‚   â”‚   â”œâ”€â”€ postgres_command_repo.go  # PostgreSQLå‘½ä»¤å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ neo4j_query_repo.go       # Neo4jæŸ¥è¯¢ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ routes/              # APIè·¯ç”±é…ç½® ğŸ†•
â”‚   â”‚   â”‚   â”œâ”€â”€ cqrs_routes.go   # CQRSè·¯ç”±åˆ†ç¦»
â”‚   â”‚   â”‚   â””â”€â”€ organization_routes.go
â”‚   â”‚   â”œâ”€â”€ logging/             # ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ ğŸ†•
â”‚   â”‚   â”œâ”€â”€ metrics/             # Prometheusç›‘æ§ ğŸ†•
â”‚   â”‚   â”œâ”€â”€ middleware/          # HTTPä¸­é—´ä»¶é“¾ ğŸ†•
â”‚   â”‚   â”œâ”€â”€ workflow/            # å¢å¼ºå·¥ä½œæµå¼•æ“ ğŸ†•
â”‚   â”‚   â””â”€â”€ intelligencegateway/ # æ™ºèƒ½ç½‘å…³æ¨¡å—
â”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ rls-policies.sql     # PostgreSQL RLSç­–ç•¥ ğŸ†•
â”‚   â”‚   â””â”€â”€ setup-cdc-pipeline.sh # CDCç®¡é“é…ç½® ğŸ†•ğŸ”¥
â”‚   â””â”€â”€ tests/                   # æµ‹è¯•å¥—ä»¶ ğŸ†•
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ organization_module_refactoring/ # Operation Phoenixæ–‡æ¡£ ğŸ†•ğŸ”¥
â”‚   â”‚   â”œâ”€â”€ Operation_Phoenix_Final_Report.md
â”‚   â”‚   â”œâ”€â”€ IMMEDIATE_ACTION_PLAN.md
â”‚   â”‚   â””â”€â”€ organization_module_refactoring_proposal.md
â”‚   â”œâ”€â”€ Development_Progress_Report.md ğŸ†•
â”‚   â””â”€â”€ Cube Castle é¡¹ç›® - ç¬¬å››é˜¶æ®µä¼˜åŒ–å¼€å‘è®¡åˆ’.md ğŸ†•
â”œâ”€â”€ docker-compose.yml           # å®Œæ•´æŠ€æœ¯æ ˆç¼–æ’ ğŸ†•ğŸ”¥
â”‚   # åŒ…å«: PostgreSQL, Neo4j, Redis, Kafka, Zookeeper, 
â”‚   #       Kafka Connect, Kafka UI, Temporal, Elasticsearch
â”œâ”€â”€ docker-compose.enterprise.yml # ä¼ä¸šçº§éƒ¨ç½² ğŸ†•
â”œâ”€â”€ python-ai/                   # Python AI æœåŠ¡
â”œâ”€â”€ frontend/                    # Vite + React + Canvas Kit å‰ç«¯åº”ç”¨ ğŸ†•ğŸ”¥
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ layout/              # å¸ƒå±€ç»„ä»¶ (AppShell, Header, Sidebar)
â”‚   â”‚   â”œâ”€â”€ features/            # åŠŸèƒ½æ¨¡å— (organizations, employees)
â”‚   â”‚   â”œâ”€â”€ components/          # å¯é‡ç”¨UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ shared/              # å…±äº«å·¥å…·å’Œç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ design-system/       # Canvas Kitè®¾è®¡ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ tests/                   # Playwrightç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ vite.config.ts           # Viteé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json             # å‰ç«¯ä¾èµ–é…ç½®
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜ (æœ¬æ–‡ä»¶)
```

### ğŸ†• Operation Phoenix æ–°å¢ç»„ä»¶

#### CQRSæ¶æ„å±‚
- **Commands**: 7ç§å‘˜å·¥å’Œç»„ç»‡ç®¡ç†å‘½ä»¤
- **Queries**: ä¼˜åŒ–çš„å›¾æŸ¥è¯¢å’Œå¤æ‚æ£€ç´¢
- **Events**: å®Œæ•´çš„é¢†åŸŸäº‹ä»¶ç³»ç»Ÿ
- **Handlers**: ç±»å‹å®‰å…¨çš„å¤„ç†å™¨å®ç°

#### CDCæ•°æ®æµ
- **Kafkaç”Ÿæ€ç³»ç»Ÿ**: ä¼ä¸šçº§æ¶ˆæ¯ä¸­é—´ä»¶
- **Debeziumè¿æ¥å™¨**: PostgreSQLå®æ—¶å˜æ›´æ•è·
- **äº‹ä»¶æµå¤„ç†**: å¼‚æ­¥äº‹ä»¶é©±åŠ¨æ¶æ„

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. ç»„ç»‡æ¶æ„åŒæ­¥ç³»ç»Ÿ - ä¼ä¸šçº§æ•°æ®ä¸€è‡´æ€§ ğŸ†•ğŸ”¥

#### æ•°æ®åŒæ­¥åŸºç¡€è®¾æ–½
- âœ… **åŒæ•°æ®æºæ¶æ„**: PostgreSQL (å†™æ“ä½œ) + Neo4j (å›¾æŸ¥è¯¢)
- âœ… **å®æ—¶åŒæ­¥æœºåˆ¶**: PostgreSQLè§¦å‘å™¨ + äº‹ä»¶é€šçŸ¥
- âœ… **æ•°æ®ä¸€è‡´æ€§ä¿è¯**: è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤ä¸ä¸€è‡´
- âœ… **æ•…éšœæ¢å¤ç³»ç»Ÿ**: å®ˆæŠ¤è¿›ç¨‹è‡ªåŠ¨ç›‘æ§å’Œæ¢å¤

#### æ ¸å¿ƒåŒæ­¥å·¥å…·
- âœ… **fix_organization_sync.go**: æ•°æ®ä¿®å¤å·¥å…·ï¼Œæ”¯æŒå…¨é‡å’Œå¢é‡åŒæ­¥
- âœ… **sync_monitor.go**: å®æ—¶ç›‘æ§å·¥å…·ï¼Œæ£€æµ‹åŒæ­¥çŠ¶æ€å’Œæ•°æ®ä¸€è‡´æ€§  
- âœ… **recovery_daemon.go**: æ•…éšœæ¢å¤å®ˆæŠ¤è¿›ç¨‹ï¼Œè‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤é—®é¢˜
- âœ… **fix_auto_sync_mechanism.go**: è‡ªåŠ¨åŒæ­¥æœºåˆ¶é…ç½®å’Œè§¦å‘å™¨ç®¡ç†

#### ç›‘æ§å’Œå¯è§‚æµ‹æ€§
- âœ… **sync_monitoringè¡¨**: å®Œæ•´çš„åŒæ­¥æ—¥å¿—å’ŒçŠ¶æ€è·Ÿè¸ª
- âœ… **å¥åº·æ£€æŸ¥æ¥å£**: å®æ—¶è¿æ¥çŠ¶æ€å’Œæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
- âœ… **è‡ªåŠ¨ä¿®å¤å»ºè®®**: æ™ºèƒ½é—®é¢˜è¯Šæ–­å’Œä¿®å¤å»ºè®®
- âœ… **å®šæ—¶æ¸…ç†æœºåˆ¶**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ—¥å¿—ï¼Œä¿æŒç³»ç»Ÿæ€§èƒ½

### 2. CQRS+CDCæ¶æ„ - é©å‘½æ€§çªç ´ ğŸ†•ğŸ”¥

#### å‘½ä»¤æŸ¥è¯¢åˆ†ç¦» (CQRS)
- âœ… **å†™æ“ä½œæ¨¡å‹**: PostgreSQL + äº‹åŠ¡ä¿è¯ + æ•°æ®ä¸€è‡´æ€§
- âœ… **è¯»æ“ä½œæ¨¡å‹**: Neo4j + å›¾æŸ¥è¯¢ä¼˜åŒ– + å¤æ‚å…³ç³»æ£€ç´¢
- âœ… **å®Œå…¨åˆ†ç¦»**: `/commands/*` (å†™) vs `/queries/*` (è¯»)
- âœ… **ç±»å‹å®‰å…¨**: Goå¼ºç±»å‹ç³»ç»Ÿ + éªŒè¯

#### å˜æ›´æ•°æ®æ•è· (CDC)
- âœ… **å®æ—¶åŒæ­¥**: PostgreSQL â†’ Kafka â†’ Neo4j
- âœ… **Debeziumè¿æ¥å™¨**: çŠ¶æ€RUNNINGï¼Œé›¶æ•°æ®ä¸¢å¤±
- âœ… **äº‹ä»¶æµ**: ç»„ç»‡å˜æ›´äº‹ä»¶å®æ—¶ä¼ æ’­
- âœ… **å®¹é”™æœºåˆ¶**: è‡ªåŠ¨é‡è¯• + é”™è¯¯æ¢å¤

#### äº‹ä»¶é©±åŠ¨æ¶æ„
- âœ… **é¢†åŸŸäº‹ä»¶**: `EmployeeHired`, `OrganizationUnitCreated` ç­‰
- âœ… **äº‹ä»¶æ€»çº¿**: Kafkaä½œä¸ºå¯é æ¶ˆæ¯ä¸­é—´ä»¶
- âœ… **å¼‚æ­¥å¤„ç†**: éé˜»å¡äº‹ä»¶å¤„ç†æµç¨‹
- âœ… **äº‹ä»¶æº¯æº**: ä¸ºæœªæ¥å®¡è®¡å’Œé‡æ”¾å¥ å®šåŸºç¡€

### 3. å‘˜å·¥ç®¡ç† (CoreHR) - ä¸»å ¡

- âœ… å‘˜å·¥ä¿¡æ¯ç®¡ç† (CRUD + é«˜çº§æŸ¥è¯¢)
- âœ… **ç»„ç»‡æ¶æ„ç®¡ç†** - å®Œæ•´å±‚çº§ç»“æ„ + å®æ—¶åŒæ­¥ ğŸ†•ğŸ”¥
  - **26ä¸ªç»„ç»‡å•å…ƒ**: 100%åŒæ­¥åˆ°Neo4jå›¾æ•°æ®åº“
  - **å±‚çº§å…³ç³»å®Œæ•´**: 25æ¡PARENT_OFå…³ç³»æ­£ç¡®å»ºç«‹
  - **çº§è”æ˜¾ç¤ºä¿®å¤**: å‰ç«¯ç»„ç»‡æ¶æ„é¡µé¢å®Œå…¨æ¢å¤
  - **å®æ—¶æ•°æ®åŒæ­¥**: PostgreSQL â†” Neo4jåŒå‘åŒæ­¥
- âœ… èŒä½ç®¡ç† (èŒä½å®šä¹‰ + æƒé™æ˜ å°„)
- âœ… æ±‡æŠ¥å…³ç³»ç®¡ç† (åŠ¨æ€å…³ç³» + å†å²è¿½è¸ª)
- âœ… äº‹åŠ¡æ€§å‘ä»¶ç®±æ¨¡å¼ (äº‹ä»¶é©±åŠ¨æ¶æ„)

### 2. ä¼ä¸šçº§å®‰å…¨æ¶æ„ ğŸ†•

#### OPAç­–ç•¥å¼•æ“
- âœ… **åŸºäºç­–ç•¥çš„è®¿é—®æ§åˆ¶ (PBAC)** - ç»†ç²’åº¦æƒé™ç®¡ç†
- âœ… **åŠ¨æ€ç­–ç•¥è¯„ä¼°** - å®æ—¶æˆæƒå†³ç­–
- âœ… **ç­–ç•¥ç‰ˆæœ¬ç®¡ç†** - ç­–ç•¥æ›´æ–°å’Œå›æ»š
- âœ… **å®¡è®¡è·Ÿè¸ª** - å®Œæ•´çš„æˆæƒæ—¥å¿—è®°å½•

#### å¤šç§Ÿæˆ·éš”ç¦»
- âœ… **PostgreSQL RLS** - è¡Œçº§å®‰å…¨ç­–ç•¥
- âœ… **æ•°æ®å®Œå…¨éš”ç¦»** - é›¶è·¨ç§Ÿæˆ·æ•°æ®æ³„éœ²
- âœ… **æ€§èƒ½ä¼˜åŒ–ç´¢å¼•** - å¤šç§Ÿæˆ·æŸ¥è¯¢ä¼˜åŒ–
- âœ… **ç§Ÿæˆ·ç®¡ç†** - åŠ¨æ€ç§Ÿæˆ·é…ç½®

#### å®‰å…¨ç›‘æ§
- âœ… **å¨èƒæ£€æµ‹** - å¼‚å¸¸è®¿é—®æ¨¡å¼è¯†åˆ«
- âœ… **å®‰å…¨äº‹ä»¶æ—¥å¿—** - ç»“æ„åŒ–å®‰å…¨å®¡è®¡
- âœ… **åˆè§„æŠ¥å‘Š** - è‡ªåŠ¨åŒ–åˆè§„æ£€æŸ¥

### 3. æ™ºèƒ½äº¤äº’ (Intelligence Gateway) - æ™ºèƒ½å¡”

#### æ ¸å¿ƒ AI èƒ½åŠ›
- âœ… è‡ªç„¶è¯­è¨€ç†è§£ä¸æ„å›¾è¯†åˆ«
- âœ… æ™ºèƒ½å¯¹è¯ç®¡ç†ä¸ä¸Šä¸‹æ–‡ç»´æŠ¤
- âœ… æ‰¹é‡æŸ¥è¯¢å¤„ç†ä¸å¼‚æ­¥å“åº”

#### å¢å¼ºåŠŸèƒ½ ğŸ†•
- âœ… **Rediså¯¹è¯çŠ¶æ€ç®¡ç†** - æŒä¹…åŒ–ä¼šè¯å­˜å‚¨
- âœ… **å¤šè½®å¯¹è¯æ”¯æŒ** - ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯
- âœ… **å®æ—¶ç»Ÿè®¡åˆ†æ** - å¯¹è¯æ•°æ®æ´å¯Ÿ
- âœ… **æ™ºèƒ½æ¨è** - åŸºäºå†å²çš„æ™ºèƒ½å»ºè®®

### 4. åˆ†å¸ƒå¼å·¥ä½œæµå¼•æ“ ğŸ†•

#### ä¼ä¸šçº§å·¥ä½œæµåŠŸèƒ½
- âœ… **ä¿¡å·é©±åŠ¨å·¥ä½œæµ** - æ”¯æŒäººå·¥å®¡æ‰¹çš„å¼‚æ­¥æµç¨‹
- âœ… **æ‰¹é‡å¤„ç†å·¥ä½œæµ** - é«˜æ•ˆçš„å¹¶è¡Œå‘˜å·¥æ•°æ®å¤„ç†
- âœ… **å®æ—¶çŠ¶æ€è·Ÿè¸ª** - å·¥ä½œæµæ‰§è¡Œè¿›åº¦å¯è§†åŒ–
- âœ… **æ•…éšœæ¢å¤æœºåˆ¶** - è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯å¤„ç†

#### å†…ç½®å·¥ä½œæµç±»å‹
- `EmployeeOnboardingWorkflow` - å‘˜å·¥å…¥èŒè‡ªåŠ¨åŒ–
- `EnhancedLeaveApprovalWorkflow` - æ™ºèƒ½ä¼‘å‡å®¡æ‰¹
- `BatchEmployeeProcessingWorkflow` - æ‰¹é‡å‘˜å·¥æ“ä½œ
- æ”¯æŒè‡ªå®šä¹‰å·¥ä½œæµæ‰©å±•

#### æ€§èƒ½æŒ‡æ ‡
- å·¥ä½œæµå¯åŠ¨: **< 150ms**
- ä¿¡å·å¤„ç†: **< 85ms**
- æ‰¹é‡å¤„ç†: **100å‘˜å·¥/45ç§’**
- å¹¶å‘æ”¯æŒ: **1000+** æ´»è·ƒå·¥ä½œæµ

### 5. å‰ç«¯ç”¨æˆ·ç•Œé¢ ğŸ†•ğŸ”¥

#### Vite + Canvas Kitç°ä»£åŒ–æ¶æ„
- âœ… **ä¼ä¸šçº§è®¾è®¡ç³»ç»Ÿ** - Workday Canvas Kitå®Œæ•´é›†æˆ
- âœ… **ç°ä»£åŒ–æ„å»ºå·¥å…·** - Vite 5.0è¶…å¿«é€Ÿçƒ­æ¨¡å—æ›¿æ¢
- âœ… **TypeScriptä¸¥æ ¼æ¨¡å¼** - å®Œæ•´ç±»å‹å®‰å…¨çš„å‰ç«¯å¼€å‘
- âœ… **ç»„ä»¶åŒ–æ¶æ„** - å¯é‡ç”¨çš„UIç»„ä»¶åº“å’Œå¸ƒå±€ç³»ç»Ÿ
- âœ… **ç«¯åˆ°ç«¯æµ‹è¯•** - Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–

#### æ ¸å¿ƒç•Œé¢ä¼˜åŒ– ğŸ†•ğŸ”¥
- **å…¨å®½Headerè®¾è®¡** ğŸ†•ğŸ”¥ - "ğŸ° Cube Castle"å“ç‰Œæ ‡è¯†å æ»¡æµè§ˆå™¨é¡¶éƒ¨æ•´è¡Œ
  - **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**: çªå‡ºå“ç‰Œå±•ç¤ºï¼Œæ¸…æ™°çš„è§†è§‰å±‚æ¬¡
  - **Canvasè®¾è®¡æ ‡å‡†**: éµå¾ªWorkdayä¼ä¸šçº§è®¾è®¡è¯­è¨€
  - **å“åº”å¼é€‚é…**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡
- **å¯¼èˆªèœå•é‡æ’åº** ğŸ†•ğŸ”¥ - ä¸šåŠ¡æµç¨‹åŒ–é¡ºåºä¼˜åŒ–
  - **ç”¨æˆ·å‹å¥½é¡ºåº**: ä»ªè¡¨æ¿â†’å‘˜å·¥ç®¡ç†â†’èŒä½ç®¡ç†â†’ç»„ç»‡æ¶æ„
  - **ä¸šåŠ¡é€»è¾‘å¯¹é½**: ç¬¦åˆHRç®¡ç†å·¥ä½œæµç¨‹
- **ç»Ÿè®¡å¡ç‰‡å¹¶åˆ—å¸ƒå±€** ğŸ†•ğŸ”¥ - ç©ºé—´æ•ˆç‡æ˜¾è‘—æå‡
  - **ä¸‰å¡ç‰‡å¹¶åˆ—**: æŒ‰ç±»å‹ç»Ÿè®¡ã€æŒ‰çŠ¶æ€ç»Ÿè®¡ã€æ€»ä½“æ¦‚å†µåŒè¡Œæ˜¾ç¤º
  - **é«˜åº¦ä¸€è‡´æ€§**: ç»Ÿä¸€çš„å¡ç‰‡é«˜åº¦å’Œè§†è§‰å¹³è¡¡
  - **åˆé€‚é—´è·**: ç¬¦åˆè¡Œä¸šæ ‡å‡†çš„å¡ç‰‡é—´è·è®¾è®¡

#### ç•Œé¢æ¨¡å—æ¶æ„
- **ç»„ç»‡æ¶æ„ç®¡ç†ç•Œé¢** ğŸ†•ğŸ”¥ - ä¼˜åŒ–çš„ç®¡ç†ç•Œé¢
  - **å®æ—¶æ•°æ®åŒæ­¥**: CQRSæ¶æ„é›†æˆï¼Œä¼˜åŒ–çš„æŸ¥è¯¢æ€§èƒ½
  - **äº¤äº’åŠŸèƒ½**: å±•å¼€/æ”¶èµ·ã€æœç´¢ã€ç­›é€‰ã€ç¼–è¾‘ã€åˆ é™¤
  - **å¯è§†åŒ–å±‚çº§**: è¿æ¥çº¿ã€å±‚çº§æ ‡è¯†ã€ç»„ç»‡ç±»å‹æ ‡è®°
- **å‘˜å·¥ç®¡ç†é¢æ¿** - å®Œæ•´çš„å‘˜å·¥CRUDæ“ä½œç•Œé¢
- **å·¥ä½œæµå®¡æ‰¹ä¸­å¿ƒ** - æ™ºèƒ½å·¥ä½œæµç®¡ç†ç•Œé¢
- **AIæ™ºèƒ½åŠ©æ‰‹ç•Œé¢** - è‡ªç„¶è¯­è¨€äº¤äº’ç•Œé¢
- **ç³»ç»Ÿç›‘æ§é¢æ¿** - å®æ—¶ç³»ç»ŸçŠ¶æ€ç›‘æ§

### 6. ç³»ç»Ÿç›‘æ§ä¸å¯è§‚æµ‹æ€§

#### å…¨æ–¹ä½ç›‘æ§
- âœ… **ç»“æ„åŒ–æ—¥å¿—** - JSONæ ¼å¼ä¾¿äºåˆ†æ
- âœ… **PrometheusæŒ‡æ ‡** - ä¸šåŠ¡å’ŒæŠ€æœ¯æŒ‡æ ‡æ”¶é›†
- âœ… **å®æ—¶å¥åº·æ£€æŸ¥** - å¤šå±‚æ¬¡å¥åº·çŠ¶æ€ç›‘æ§
- âœ… **æ€§èƒ½åŸºå‡†** - è‡ªåŠ¨åŒ–æ€§èƒ½å›å½’æ£€æµ‹

#### å…³é”®æŒ‡æ ‡
- HTTPè¯·æ±‚å»¶è¿Ÿ: **< 45ms (P95)**
- æ•°æ®åº“æŸ¥è¯¢: **< 5ms (å¹³å‡)**
- AIæŸ¥è¯¢å¤„ç†: **< 2s (P95)**
- ç³»ç»Ÿå¯ç”¨æ€§: **> 99.9%**

## ğŸ§ª æµ‹è¯•ä½“ç³» ğŸ†•

### å…¨é¢æµ‹è¯•è¦†ç›–

#### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
cd go-app && go test ./... -v -cover

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
go test ./internal/authorization -v
go test ./internal/workflow -v
go test ./internal/middleware -v
```

#### é›†æˆæµ‹è¯•  
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
go test ./tests -v -tags=integration

# å®‰å…¨é›†æˆæµ‹è¯•
go test ./tests -run TestSecurity -v
```

#### å‰ç«¯æµ‹è¯• ğŸ†•ğŸ”¥
```bash
cd frontend

# è¿è¡Œå‰ç«¯å•å…ƒæµ‹è¯•
npm run test

# Playwrightç«¯åˆ°ç«¯æµ‹è¯•  
npm run test:e2e

# å¯è§†åŒ–ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e:ui

# TypeScriptç±»å‹æ£€æŸ¥
npx tsc --noEmit

# ä»£ç è´¨é‡æ£€æŸ¥
npm run lint
```

### æµ‹è¯•è´¨é‡æŒ‡æ ‡

#### æµ‹è¯•è¦†ç›–ç‡
- **Goåç«¯**: 88.7% ä»£ç è¦†ç›–ç‡
- **Python AI**: 90.9% ä»£ç è¦†ç›–ç‡  
- **å‰ç«¯ç»„ä»¶**: 85%+ ç»„ä»¶è¦†ç›–ç‡ ğŸ†•
- **E2Eæµ‹è¯•**: æ ¸å¿ƒä¸šåŠ¡æµç¨‹100%è¦†ç›– ğŸ†•
- **ç»„ç»‡åŒæ­¥ç³»ç»Ÿ**: 95%+ æµ‹è¯•è¦†ç›–ç‡ ğŸ†•ğŸ”¥

#### å®‰å…¨æµ‹è¯•
- **æˆæƒæµ‹è¯•**: 100% é˜²æŠ¤æˆåŠŸç‡
- **å¤šç§Ÿæˆ·éš”ç¦»**: 0ä¸ªæ•°æ®æ³„éœ²
- **SQLæ³¨å…¥é˜²æŠ¤**: 100% æœ‰æ•ˆ
- **XSSé˜²æŠ¤**: 100% å‰ç«¯å®‰å…¨ ğŸ†•
- **æ•°æ®åŒæ­¥å®‰å…¨**: 100% å®Œæ•´æ€§éªŒè¯ ğŸ†•ğŸ”¥

## ğŸ“Š ç›‘æ§ä¸è¿ç»´

### å®æ—¶ç›‘æ§é¢æ¿ ğŸ†•

#### ç³»ç»Ÿå¥åº·æ£€æŸ¥
```bash
# åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# è¯¦ç»†å¥åº·æ£€æŸ¥ï¼ˆåŒ…å«æ‰€æœ‰ä¾èµ–ï¼‰
curl http://localhost:8080/health/detailed

# å®‰å…¨ç»„ä»¶å¥åº·æ£€æŸ¥
curl http://localhost:8080/health/security
```

#### ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
```bash
# è·å–ä¸šåŠ¡æŒ‡æ ‡
curl http://localhost:8080/metrics/business

# è·å–ç»„ç»‡åŒæ­¥çŠ¶æ€ç›‘æ§ ğŸ†•ğŸ”¥
curl http://localhost:8080/health/sync-status

# æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§ ğŸ†•ğŸ”¥  
curl http://localhost:8080/health/data-consistency

# ç»„ç»‡åŒæ­¥ç›‘æ§ç»Ÿè®¡ ğŸ†•ğŸ”¥
curl http://localhost:8080/monitor/sync-stats
```

#### å®æ—¶ç›‘æ§æµ
```bash
# Server-Sent Events å®æ—¶æ•°æ®æµ
curl -N http://localhost:8080/monitor/live

# åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹å®æ—¶é¢æ¿
open http://localhost:8080/monitor/dashboard
```

### æ€§èƒ½åŸºå‡† ğŸ†•

#### å…³é”®æ€§èƒ½æŒ‡æ ‡ (KPIs)
- **APIå“åº”æ—¶é—´**: < 100ms (P95)
- **æ•°æ®åº“æŸ¥è¯¢**: < 50ms (P95)  
- **AIæŸ¥è¯¢å¤„ç†**: < 2s (P95)
- **å·¥ä½œæµå¯åŠ¨**: < 200ms (P95)
- **å‰ç«¯åŠ è½½**: < 3s (P95) ğŸ†•
- **ç»„ç»‡åŒæ­¥å»¶è¿Ÿ**: < 10ms (P95) ğŸ†•ğŸ”¥
- **æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥**: < 100ms ğŸ†•ğŸ”¥
- **ç³»ç»Ÿå¯ç”¨æ€§**: > 99.9%

#### å‹åŠ›æµ‹è¯•ç»“æœ
- **å¹¶å‘è¿æ¥**: 5000+ è¿æ¥
- **QPSå¤„ç†**: 10000+ è¯·æ±‚/ç§’
- **å†…å­˜ä½¿ç”¨**: < 2GB (å®Œæ•´ç³»ç»Ÿ)
- **CPUä½¿ç”¨**: < 60% (æ­£å¸¸è´Ÿè½½)

## ğŸ›¡ï¸ å®‰å…¨ä¸åˆè§„

### ä¼ä¸šçº§å®‰å…¨æ¶æ„ ğŸ†•

#### å¤šå±‚å®‰å…¨é˜²æŠ¤
1. **ç½‘ç»œå±‚**: TLS 1.3 åŠ å¯†ä¼ è¾“
2. **APIå±‚**: JWTè®¤è¯ + OPAæˆæƒ
3. **ä¸šåŠ¡å±‚**: è§’è‰²æƒé™æ§åˆ¶
4. **æ•°æ®å±‚**: PostgreSQL RLSéš”ç¦»
5. **å®¡è®¡å±‚**: å®Œæ•´æ“ä½œæ—¥å¿—

#### åˆè§„æ”¯æŒ
- âœ… **GDPRåˆè§„** - æ•°æ®ä¿æŠ¤å’Œéšç§æƒ
- âœ… **SOC2åˆè§„** - å®‰å…¨æ§åˆ¶æ¡†æ¶
- âœ… **ISO27001** - ä¿¡æ¯å®‰å…¨ç®¡ç†
- âœ… **å®¡è®¡è·Ÿè¸ª** - å®Œæ•´çš„æ“ä½œå®¡è®¡æ—¥å¿—

#### å®‰å…¨ç›‘æ§
```bash
# å®‰å…¨äº‹ä»¶ç›‘æ§
curl http://localhost:8080/security/events

# å¨èƒæ£€æµ‹çŠ¶æ€
curl http://localhost:8080/security/threats

# åˆè§„æ£€æŸ¥æŠ¥å‘Š
curl http://localhost:8080/security/compliance
```

## ğŸ“ˆ éƒ¨ç½²æ¶æ„

### äº‘åŸç”Ÿéƒ¨ç½² ğŸ†•

#### Kuberneteséƒ¨ç½²
```bash
# åº”ç”¨å®Œæ•´çš„Kubernetesé…ç½®
kubectl apply -f k8s/

# éªŒè¯éƒ¨ç½²çŠ¶æ€
kubectl get pods -n cube-castle
kubectl get services -n cube-castle
kubectl get ingress -n cube-castle
```

#### é«˜å¯ç”¨é…ç½®
- **å¤šå®ä¾‹éƒ¨ç½²**: Goåº”ç”¨ 3å®ä¾‹ï¼ŒAIæœåŠ¡ 2å®ä¾‹
- **æ•°æ®åº“é›†ç¾¤**: PostgreSQLä¸»ä» + è¯»å†™åˆ†ç¦»
- **ç¼“å­˜é›†ç¾¤**: Rediså“¨å…µæ¨¡å¼
- **è´Ÿè½½å‡è¡¡**: Ingress + Service Mesh

#### ç›‘æ§éƒ¨ç½²
```bash
# éƒ¨ç½²å®Œæ•´ç›‘æ§æ ˆ
kubectl apply -f k8s/monitoring/

# è®¿é—®ç›‘æ§é¢æ¿
open https://grafana.your-domain.com
open https://prometheus.your-domain.com
```

### å®¹å™¨åŒ–éƒ¨ç½²

#### å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up -d
```

#### ç”Ÿäº§ç¯å¢ƒ  
```bash
# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.production.yml up -d
```

## ğŸš€ å¼€å‘è®¡åˆ’ä¸é‡Œç¨‹ç¢‘

### å·²å®ŒæˆåŠŸèƒ½ âœ…

#### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒåŠŸèƒ½ä¼˜åŒ– (100% å®Œæˆ)
- âœ… Rediså¯¹è¯çŠ¶æ€ç®¡ç†
- âœ… ç»“æ„åŒ–æ—¥å¿—å’Œç›‘æ§  
- âœ… Temporalä¸šåŠ¡å·¥ä½œæµ

#### é˜¶æ®µäºŒï¼šæ¶æ„å¢å¼º (100% å®Œæˆ)
- âœ… åµŒå…¥å¼OPAæˆæƒç³»ç»Ÿ
- âœ… PostgreSQL RLSå¤šç§Ÿæˆ·éš”ç¦»
- âœ… å®Œå–„Temporalå·¥ä½œæµå¼•æ“

#### é˜¶æ®µä¸‰ï¼šå‰ç«¯æ¶æ„ç°ä»£åŒ– (100% å®Œæˆ) âœ…
- âœ… SWRæ¶æ„ç°ä»£åŒ–å‡çº§ (100% å®Œæˆ)
- âœ… UIç»„ä»¶åº“æ ‡å‡†åŒ–æ¢å¤ (100% å®Œæˆ)
- âœ… å‰ç«¯æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯å¤„ç† (100% å®Œæˆ)
- âœ… ç³»ç»ŸæœåŠ¡ç«¯å£é—®é¢˜è§£å†³ (100% å®Œæˆ)

### ä¸‹ä¸€é˜¶æ®µè®¡åˆ’ ğŸ“…

#### çŸ­æœŸç›®æ ‡ (1-2å‘¨)
- å®ŒæˆNext.jså‰ç«¯æ ¸å¿ƒç•Œé¢
- å®ç°å‰åç«¯å®Œæ•´é›†æˆ
- å®Œå–„ç”¨æˆ·ä½“éªŒå’Œç•Œé¢ä¼˜åŒ–

#### ä¸­æœŸç›®æ ‡ (1-2æœˆ)
- å®æ–½å¾®æœåŠ¡æ‹†åˆ†
- å®Œå–„CI/CDæµæ°´çº¿
- å¢åŠ æ›´å¤šAIåŠŸèƒ½

#### é•¿æœŸç›®æ ‡ (3-6æœˆ)
- å¤šäº‘éƒ¨ç½²æ”¯æŒ
- é«˜çº§åˆ†æå’ŒæŠ¥è¡¨
- ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡ (2025å¹´7æœˆ27æ—¥)

### ä»£ç è§„æ¨¡
- **æ€»ä»£ç è¡Œæ•°**: ~32,000 è¡Œ
- **Go åç«¯**: ~22,000 è¡Œ (åŒ…å«åŒæ­¥å·¥å…· ğŸ†•ğŸ”¥)
- **Python AI**: ~4,000 è¡Œ
- **Next.js å‰ç«¯**: ~6,000 è¡Œ
- **æµ‹è¯•ä»£ç **: ~8,500 è¡Œ
- **æ–‡æ¡£**: ~5,500 è¡Œ

### åŠŸèƒ½æ¨¡å—
- **æ ¸å¿ƒæ¨¡å—**: 13ä¸ª (CoreHR, Intelligence, Workflow, ç»„ç»‡åŒæ­¥ç³»ç»Ÿç­‰) ğŸ†•ğŸ”¥
- **å®‰å…¨æ¨¡å—**: 3ä¸ª (OPA, RLS, Audit)
- **å·¥å…·æ¨¡å—**: 12ä¸ª (Logging, Metrics, Middleware, åŒæ­¥å·¥å…·ç­‰) ğŸ†•ğŸ”¥
- **æµ‹è¯•æ¨¡å—**: å®Œæ•´æµ‹è¯•ä½“ç³»è¦†ç›–

### å¼€å‘è¿›åº¦
- **é˜¶æ®µä¸€: æ ¸å¿ƒåŠŸèƒ½**: 100% å®Œæˆ
- **é˜¶æ®µäºŒ: æ¶æ„å¢å¼º**: 100% å®Œæˆ
- **é˜¶æ®µä¸‰: å‰ç«¯æ¶æ„ç°ä»£åŒ–**: 100% å®Œæˆ âœ…
- **é˜¶æ®µå››: é¡¹ç›®æ¸…ç†ä¸æ¶æ„ä¼˜åŒ–**: 100% å®Œæˆ âœ…
- **é˜¶æ®µäº”: Vite+Canvas Kitå‰ç«¯é‡æ„**: 100% å®Œæˆ âœ…ğŸ”¥
- **ç»„ç»‡ç®¡ç†CRUDéªŒè¯**: 100% å®Œæˆ âœ…ğŸ”¥
- **å‰ç«¯UI/UXä¼˜åŒ–**: 100% å®Œæˆ âœ…ğŸ”¥
- **æŠ€æœ¯å€ºåŠ¡æ¸…ç†**: 100% å®Œæˆ âœ…
- **æ€»ä½“è¿›åº¦**: 100% å®Œæˆ ğŸ‰

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒä¸ç¤¾åŒº

- ğŸ“§ **é‚®ç®±**: support@cubecastle.com
- ğŸ“– **æ–‡æ¡£**: [DOCS2/](DOCS2/)
- ğŸ› **é—®é¢˜åé¦ˆ**: [Issues](../../issues)
- ğŸ’¬ **è®¨è®ºåŒº**: [Discussions](../../discussions)
- ğŸ“Š **é¡¹ç›®çœ‹æ¿**: [Project Board](../../projects)

## ğŸ† è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º Cube Castle é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

ç‰¹åˆ«æ„Ÿè°¢ï¼š
- **Claude Code** - AIè¾…åŠ©å¼€å‘å·¥å…·
- **Go Team** - ä¼˜ç§€çš„ç¼–ç¨‹è¯­è¨€å’Œå·¥å…·é“¾
- **Temporal Team** - å¯é çš„å·¥ä½œæµç¼–æ’å¼•æ“
- **Open Policy Agent** - å¼ºå¤§çš„ç­–ç•¥å¼•æ“
- **PostgreSQL & Neo4j** - ä¼˜ç§€çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆ
- **Next.js Team** - ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶

---

> **ğŸ° è®©ä¼ä¸šçº§ HR ç®¡ç†å˜å¾—æ™ºèƒ½ã€å®‰å…¨ã€é«˜æ•ˆï¼**
> 
> **ç‰ˆæœ¬**: v2.1.0 | **æ›´æ–°æ—¥æœŸ**: 2025å¹´8æœˆ6æ—¥ | **å¼€å‘çŠ¶æ€**: å‰ç«¯æ¶æ„Viteé‡æ„å®Œæˆ
> 
> **ğŸ¯ å½“å‰å¼€å‘çŠ¶æ€**: å‰ç«¯æ¶æ„Vite+Canvas Kitç°ä»£åŒ–é‡æ„100%å®Œæˆï¼Œå…¨æ–°çš„ä¼ä¸šçº§UIè®¾è®¡ç³»ç»Ÿ
> **ğŸ“ˆ é¡¹ç›®è¿›åº¦**: 100% å®Œæˆ ğŸ‰
> **ğŸ”’ å®‰å…¨ç­‰çº§**: ä¼ä¸šçº§
> **âš¡ æ€§èƒ½ç­‰çº§**: ç”Ÿäº§å°±ç»ª