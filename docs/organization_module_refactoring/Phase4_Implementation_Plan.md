# ğŸš€ Organization Module Refactoring - Phase 4 å®æ–½è®¡åˆ’

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**åˆ†æ”¯**: feature/organization-module-phase4  
**å¼€å§‹æ—¥æœŸ**: 2025å¹´8æœˆ2æ—¥  
**é¡¹ç›®çŠ¶æ€**: Phase 3 (CQRS+CDCæ¶æ„) å·²å®Œæˆ âœ…  
**å½“å‰ç›®æ ‡**: Phase 4 - æ€§èƒ½ä¼˜åŒ–ã€ç›‘æ§é›†æˆå’Œç”Ÿäº§å°±ç»ª  

---

## ğŸ¯ Phase 4 æ ¸å¿ƒç›®æ ‡

### æ€»ä½“ç›®æ ‡
åŸºäºPhase 3å®Œæˆçš„CQRS+CDCæ¶æ„åŸºç¡€ï¼Œå®ç°**ç”Ÿäº§å°±ç»ªçš„ä¼ä¸šçº§ç»„ç»‡ç®¡ç†ç³»ç»Ÿ**ï¼Œé‡ç‚¹å…³æ³¨æ€§èƒ½ä¼˜åŒ–ã€ç›‘æ§é›†æˆã€é«˜çº§åŠŸèƒ½å®Œå–„ã€‚

### å…³é”®æˆæœ (KPI)
- **æ€§èƒ½æŒ‡æ ‡**: å‘½ä»¤å¤„ç† <100ms, æŸ¥è¯¢å“åº” <500ms (P99)
- **å¯ç”¨æ€§**: 99.9% ç³»ç»Ÿå¯ç”¨æ€§
- **ç›‘æ§è¦†ç›–**: 100% å…³é”®ç»„ä»¶ç›‘æ§
- **åŠŸèƒ½å®Œæ•´æ€§**: äº‹ä»¶æ€»çº¿é›†æˆï¼ŒNeo4jé«˜çº§æŸ¥è¯¢

---

## ğŸ—“ï¸ å®æ–½æ—¶é—´çº¿ (6-8å‘¨)

### Week 1-2: äº‹ä»¶æ€»çº¿é›†æˆä¸å¤„ç†å™¨ä¼˜åŒ–
**ç›®æ ‡**: å®Œæˆå‘½ä»¤å¤„ç†å™¨ä¸äº‹ä»¶å‘å¸ƒçš„ç«¯åˆ°ç«¯é›†æˆ

#### Week 1: äº‹ä»¶æ€»çº¿æ¶æ„è®¾è®¡
```yaml
äº¤ä»˜ç‰©:
  âœ… äº‹ä»¶æ€»çº¿æ¥å£è®¾è®¡
  âœ… å‘½ä»¤å¤„ç†å™¨äº‹ä»¶å‘å¸ƒé›†æˆ
  âœ… äº‹ä»¶æ¶ˆè´¹è€…å®ç°
  âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

æŠ€æœ¯ä»»åŠ¡:
  - è®¾è®¡EventBusæ¥å£å’ŒKafkaå®ç°
  - ä¿®æ”¹æ‰€æœ‰å‘½ä»¤å¤„ç†å™¨é›†æˆäº‹ä»¶å‘å¸ƒ
  - å®ç°äº‹ä»¶æ¶ˆè´¹è€…ç”¨äºNeo4jæ•°æ®åŒæ­¥
  - å»ºç«‹äº‹ä»¶å‘å¸ƒå¤±è´¥é‡è¯•æœºåˆ¶
  - æ·»åŠ äº‹ä»¶ç‰ˆæœ¬ç®¡ç†å’Œåºåˆ—åŒ–

éªŒæ”¶æ ‡å‡†:
  - æ‰€æœ‰å‘½ä»¤æ“ä½œè‡ªåŠ¨å‘å¸ƒç›¸åº”é¢†åŸŸäº‹ä»¶
  - Kafkaä¸»é¢˜æ­£ç¡®æ¥æ”¶æ‰€æœ‰äº‹ä»¶
  - äº‹ä»¶æ¶ˆè´¹å¤±è´¥è‡ªåŠ¨é‡è¯• â‰¤3æ¬¡
  - äº‹ä»¶æ•°æ®ç»“æ„å‘åå…¼å®¹
```

#### Week 2: æ•°æ®åŒæ­¥ä¼˜åŒ–
```yaml
äº¤ä»˜ç‰©:
  âœ… Neo4jæ•°æ®åŒæ­¥æ¶ˆè´¹è€…
  âœ… æ•°æ®ä¸€è‡´æ€§éªŒè¯
  âœ… åŒæ­¥å»¶è¿Ÿç›‘æ§
  âœ… å†²çªè§£å†³æœºåˆ¶

æŠ€æœ¯ä»»åŠ¡:
  - å®ç°å®Œæ•´çš„Neo4jæ•°æ®åŒæ­¥æ¶ˆè´¹è€…
  - å»ºç«‹PostgreSQL-Neo4jæ•°æ®ä¸€è‡´æ€§éªŒè¯
  - å®ç°åŒæ­¥å»¶è¿Ÿç›‘æ§å’Œå‘Šè­¦
  - è®¾è®¡æ•°æ®å†²çªæ£€æµ‹å’Œè§£å†³ç­–ç•¥
  - æ·»åŠ æ‰‹åŠ¨æ•°æ®é‡åŒæ­¥å·¥å…·

éªŒæ”¶æ ‡å‡†:
  - CDCæ•°æ®åŒæ­¥å»¶è¿Ÿ P99 <1ç§’
  - æ•°æ®ä¸€è‡´æ€§éªŒè¯å·¥å…·å¯æ­£å¸¸è¿è¡Œ
  - åŒæ­¥å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹å’Œå‘Šè­¦
  - æ•°æ®å†²çªè§£å†³æˆåŠŸç‡ >99%
```

### Week 3-4: Neo4jæŸ¥è¯¢ä¼˜åŒ–ä¸é«˜çº§åŠŸèƒ½
**ç›®æ ‡**: å®ç°é«˜æ€§èƒ½çš„Neo4jå¤æ‚å›¾æŸ¥è¯¢å’Œç»„ç»‡æ¶æ„åŠŸèƒ½

#### Week 3: æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–
```yaml
äº¤ä»˜ç‰©:
  âœ… é«˜æ€§èƒ½å›¾æŸ¥è¯¢å®ç°
  âœ… æŸ¥è¯¢ç¼“å­˜ç­–ç•¥
  âœ… ç´¢å¼•ä¼˜åŒ–é…ç½®
  âœ… æŸ¥è¯¢æ€§èƒ½ç›‘æ§

æŠ€æœ¯ä»»åŠ¡:
  - å®ç°å¤æ‚ç»„ç»‡å±‚çº§æŸ¥è¯¢ (MATCHè·¯å¾„ä¼˜åŒ–)
  - è®¾è®¡RedisæŸ¥è¯¢ç»“æœç¼“å­˜ç­–ç•¥
  - ä¼˜åŒ–Neo4jç´¢å¼•é…ç½®å’ŒæŸ¥è¯¢è®¡åˆ’
  - å»ºç«‹æŸ¥è¯¢æ€§èƒ½ç›‘æ§å’Œæ…¢æŸ¥è¯¢å‘Šè­¦
  - å®ç°æŸ¥è¯¢ç»“æœåˆ†é¡µå’Œé™æµ

éªŒæ”¶æ ‡å‡†:
  - ç»„ç»‡æ¶æ„æŸ¥è¯¢å“åº”æ—¶é—´ P99 <500ms
  - æŸ¥è¯¢ç¼“å­˜å‘½ä¸­ç‡ >80%
  - æ…¢æŸ¥è¯¢ (>1s) æ¯”ä¾‹ <0.1%
  - æ”¯æŒ10å±‚ä»¥ä¸Šç»„ç»‡å±‚çº§æŸ¥è¯¢
```

#### Week 4: é«˜çº§ç»„ç»‡ç®¡ç†åŠŸèƒ½
```yaml
äº¤ä»˜ç‰©:
  âœ… æ™ºèƒ½ç»„ç»‡åˆ†ææŸ¥è¯¢
  âœ… å‘˜å·¥è·¯å¾„æŸ¥æ‰¾ç®—æ³•
  âœ… ç»„ç»‡å˜æ›´å½±å“åˆ†æ
  âœ… æ‰¹é‡æ“ä½œä¼˜åŒ–

æŠ€æœ¯ä»»åŠ¡:
  - å®ç°æœ€çŸ­è·¯å¾„æŸ¥æ‰¾ç®—æ³• (å‘˜å·¥é—´å…³ç³»è·¯å¾„)
  - å»ºç«‹ç»„ç»‡å˜æ›´å½±å“åˆ†æåŠŸèƒ½
  - å®ç°æ™ºèƒ½ç»„ç»‡ç»“æ„æ¨è
  - ä¼˜åŒ–æ‰¹é‡å‘˜å·¥æ“ä½œæ€§èƒ½
  - æ·»åŠ ç»„ç»‡æ¶æ„å¯è§†åŒ–æ•°æ®API

éªŒæ”¶æ ‡å‡†:
  - è·¯å¾„æŸ¥æ‰¾ç®—æ³•å“åº”æ—¶é—´ <200ms
  - å½±å“åˆ†æè¦†ç›–ç›´æ¥å’Œé—´æ¥å½±å“
  - æ‰¹é‡æ“ä½œæ”¯æŒ 1000+ å‘˜å·¥åŒæ—¶å¤„ç†
  - ç»„ç»‡åˆ†æAPIå®Œæ•´æ€§ 100%
```

### Week 5-6: ç›‘æ§ä½“ç³»ä¸å…ƒåˆçº¦å®Œå–„
**ç›®æ ‡**: å»ºç«‹å®Œæ•´çš„ç”Ÿäº§ç›‘æ§ä½“ç³»å’Œæ¶æ„æ²»ç†æœºåˆ¶

#### Week 5: ç›‘æ§é›†æˆ
```yaml
äº¤ä»˜ç‰©:
  âœ… PrometheusæŒ‡æ ‡æ”¶é›†
  âœ… Grafanaç›‘æ§é¢æ¿
  âœ… å‘Šè­¦è§„åˆ™é…ç½®
  âœ… æ—¥å¿—èšåˆåˆ†æ

æŠ€æœ¯ä»»åŠ¡:
  - é›†æˆPrometheusæŒ‡æ ‡æ”¶é›† (ä¸šåŠ¡+æŠ€æœ¯æŒ‡æ ‡)
  - å»ºç«‹Grafanaç›‘æ§é¢æ¿ (CQRS, CDC, ä¸šåŠ¡KPI)
  - é…ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦è§„åˆ™
  - å®ç°ç»“æ„åŒ–æ—¥å¿—è¾“å‡ºå’Œèšåˆ
  - å»ºç«‹åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª

éªŒæ”¶æ ‡å‡†:
  - ç›‘æ§æŒ‡æ ‡è¦†ç›–ç‡ 100% (æ‰€æœ‰å…³é”®ç»„ä»¶)
  - å‘Šè­¦å“åº”æ—¶é—´ <5åˆ†é’Ÿ
  - æ—¥å¿—æŸ¥è¯¢å“åº”æ—¶é—´ <10ç§’
  - é“¾è·¯è¿½è¸ªç«¯åˆ°ç«¯å¯è§†åŒ–
```

#### Week 6: å…ƒåˆçº¦ä½“ç³»
```yaml
äº¤ä»˜ç‰©:
  âœ… å…ƒåˆçº¦YAMLè§„çº¦
  âœ… åˆçº¦éªŒè¯å·¥å…·
  âœ… SLOç›‘æ§é›†æˆ
  âœ… æ¶æ„åˆè§„æ£€æŸ¥

æŠ€æœ¯ä»»åŠ¡:
  - å®ç°ç»„ç»‡æ¨¡å—å…ƒåˆçº¦å®šä¹‰
  - å»ºç«‹è‡ªåŠ¨åŒ–åˆçº¦éªŒè¯å·¥å…·
  - é›†æˆSLOæŒ‡æ ‡ç›‘æ§å’ŒæŠ¥å‘Š
  - å®ç°æ¶æ„åˆè§„è‡ªåŠ¨æ£€æŸ¥
  - å»ºç«‹åˆçº¦è¿åå‘Šè­¦æœºåˆ¶

éªŒæ”¶æ ‡å‡†:
  - å…ƒåˆçº¦è¦†ç›–æ‰€æœ‰APIç«¯ç‚¹
  - åˆçº¦éªŒè¯è‡ªåŠ¨åŒ–è¿è¡Œ
  - SLOæŒ‡æ ‡å®æ—¶ç›‘æ§
  - æ¶æ„åˆè§„æ£€æŸ¥é€šè¿‡ç‡ 100%
```

### Week 7-8: æ€§èƒ½è°ƒä¼˜ä¸ç”Ÿäº§å°±ç»ª
**ç›®æ ‡**: æœ€ç»ˆæ€§èƒ½ä¼˜åŒ–å’Œç”Ÿäº§ç¯å¢ƒå‡†å¤‡

#### Week 7: æ€§èƒ½è°ƒä¼˜
```yaml
äº¤ä»˜ç‰©:
  âœ… ç«¯åˆ°ç«¯æ€§èƒ½æµ‹è¯•
  âœ… ç³»ç»Ÿç“¶é¢ˆè¯†åˆ«å’Œä¼˜åŒ–
  âœ… å®¹é‡è§„åˆ’æŠ¥å‘Š
  âœ… æ€§èƒ½åŸºå‡†æ–‡æ¡£

æŠ€æœ¯ä»»åŠ¡:
  - æ‰§è¡Œå®Œæ•´çš„æ€§èƒ½å‹åŠ›æµ‹è¯•
  - è¯†åˆ«å’Œä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ
  - åˆ¶å®šç”Ÿäº§ç¯å¢ƒå®¹é‡è§„åˆ’
  - å»ºç«‹æ€§èƒ½åŸºå‡†å’Œå›å½’æµ‹è¯•
  - ä¼˜åŒ–èµ„æºä½¿ç”¨å’Œæˆæœ¬æ•ˆç‡

éªŒæ”¶æ ‡å‡†:
  - ç³»ç»Ÿæ”¯æŒå¹¶å‘ç”¨æˆ·æ•° 1000+
  - å³°å€¼QPSå¤„ç†èƒ½åŠ› 5000+
  - èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ– >30%
  - æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡ç‡ 100%
```

#### Week 8: ç”Ÿäº§éƒ¨ç½²å‡†å¤‡
```yaml
äº¤ä»˜ç‰©:
  âœ… ç”Ÿäº§éƒ¨ç½²è„šæœ¬
  âœ… è¿ç»´æ‰‹å†Œ
  âœ… ç¾éš¾æ¢å¤è®¡åˆ’
  âœ… å®‰å…¨å®¡è®¡æŠ¥å‘Š

æŠ€æœ¯ä»»åŠ¡:
  - å®Œå–„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬å’Œé…ç½®
  - ç¼–å†™å®Œæ•´çš„è¿ç»´æ“ä½œæ‰‹å†Œ
  - å»ºç«‹æ•°æ®å¤‡ä»½å’Œç¾éš¾æ¢å¤æœºåˆ¶
  - æ‰§è¡Œå®‰å…¨å®¡è®¡å’Œæ¼æ´æ‰«æ
  - å‡†å¤‡ç”¨æˆ·åŸ¹è®­å’Œæ–‡æ¡£

éªŒæ”¶æ ‡å‡†:
  - ä¸€é”®éƒ¨ç½²æˆåŠŸç‡ 100%
  - è¿ç»´æ‰‹å†Œè¦†ç›–æ‰€æœ‰æ“ä½œåœºæ™¯
  - æ•°æ®æ¢å¤æµ‹è¯•æˆåŠŸ
  - å®‰å…¨æ¼æ´ 0ä¸ªé«˜å±ã€ä½å±
```

---

## ğŸ§¹ é—ç•™Outboxç³»ç»Ÿè¯„ä¼°ä¸æ¸…ç†

### ç°çŠ¶åˆ†æ

é€šè¿‡ä»£ç å®¡æŸ¥å‘ç°ï¼Œé¡¹ç›®ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ª**å®Œæ•´çš„äº‹åŠ¡æ€§å‘ä»¶ç®±(Transactional Outbox)ç³»ç»Ÿ**ï¼š

#### ç°æœ‰Outboxç³»ç»Ÿç»„ä»¶
```yaml
æ ¸å¿ƒç»„ä»¶:
  âœ… /internal/outbox/ - å®Œæ•´çš„å‘ä»¶ç®±æ¨¡å—
    - models.go: äº‹ä»¶æ¨¡å‹å’Œå¤„ç†å™¨
    - service.go: å‘ä»¶ç®±æœåŠ¡å’Œäº‹ä»¶åˆ›å»º
    - repository.go: æ•°æ®åº“è®¿é—®å±‚
    - processor.go: äº‹ä»¶å¤„ç†å™¨
    - handlers.go: äº‹ä»¶å¤„ç†é€»è¾‘

æ•°æ®åº“æ”¯æŒ:
  âœ… outbox.events è¡¨: å®Œæ•´çš„äº‹ä»¶å­˜å‚¨
  âœ… RLSç­–ç•¥: å¤šç§Ÿæˆ·éš”ç¦»
  âœ… ç´¢å¼•ä¼˜åŒ–: æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–

é›†æˆç‚¹:
  âœ… CoreHRé›†æˆ: outbox_adapter.go
  âœ… æµ‹è¯•è¦†ç›–: é›†æˆæµ‹è¯•å®Œæ•´
  âœ… é¢„å®šä¹‰äº‹ä»¶: å‘˜å·¥ã€ç»„ç»‡ã€è¯·å‡ç­‰äº‹ä»¶ç±»å‹
```

#### ç°æœ‰äº‹ä»¶ç±»å‹è¦†ç›–
```go
// å·²å®ç°çš„äº‹ä»¶ç±»å‹
employee.created, employee.updated, employee.deleted, employee.phone_updated
organization.created, organization.updated, organization.deleted  
position.created, position.updated, position.deleted
leave_request.created, leave_request.approved, leave_request.rejected
notification.created
```

### ä¸CQRS+CDCæ¶æ„çš„å…³ç³»åˆ†æ

#### åŠŸèƒ½é‡å è¯„ä¼°
```yaml
é‡å é¢†åŸŸ:
  ğŸ”´ äº‹ä»¶å‘å¸ƒ: Outbox vs Kafka EventBus
  ğŸ”´ äº‹ä»¶å­˜å‚¨: outbox.events vs Kafka Topics
  ğŸ”´ äº‹åŠ¡ä¿è¯: æ•°æ®åº“äº‹åŠ¡ vs CDCç®¡é“
  ğŸ”´ äº‹ä»¶å¤„ç†: Outboxå¤„ç†å™¨ vs Kafkaæ¶ˆè´¹è€…

æ¶æ„å·®å¼‚:
  ğŸ“Š Outboxæ¨¡å¼: PostgreSQLå†…éƒ¨äº‹ä»¶å­˜å‚¨ + è½®è¯¢å¤„ç†
  ğŸ“Š CDCæ¨¡å¼: PostgreSQL WAL â†’ Kafka â†’ å®æ—¶æµå¤„ç†
  ğŸ“Š æ€§èƒ½ç‰¹å¾: Outbox(æ‰¹å¤„ç†) vs CDC(å®æ—¶æµ)
  ğŸ“Š æ‰©å±•æ€§: Outbox(å•åº“é™åˆ¶) vs CDC(åˆ†å¸ƒå¼)
```

### æ¸…ç†ç­–ç•¥å»ºè®®

#### é‡æ–°è¯„ä¼°: **ç›´æ¥åºŸå¼ƒç­–ç•¥** (æ¨è)

**å…³é”®å‘ç°**: é€šè¿‡ä»£ç åˆ†æç¡®è®¤Outboxç³»ç»Ÿ**ä»æœªåœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨**ï¼š

```yaml
ç”Ÿäº§çŠ¶æ€ç¡®è®¤:
  âŒ outbox.Service.Start() ä»æœªè¢«è°ƒç”¨
  âŒ äº‹ä»¶å¤„ç†å™¨ä»æœªå¯åŠ¨
  âŒ æ²¡æœ‰ç”Ÿäº§æ•°æ®ä¾èµ–
  âŒ ä»…åœ¨CoreHRä¸­æœ‰æ¡ä»¶æ€§è°ƒç”¨ (if s.outbox != nil)

é£é™©è¯„ä¼°:
  âœ… é›¶ç”Ÿäº§æ•°æ®ä¸¢å¤±é£é™©
  âœ… é›¶ç”¨æˆ·ä¸šåŠ¡ä¸­æ–­é£é™©  
  âœ… é›¶å‘åå…¼å®¹éœ€æ±‚
  âœ… å¯ä»¥ç›´æ¥åˆ é™¤æ‰€æœ‰Outboxä»£ç 
```

#### æ¨èæ–¹æ¡ˆ: **ä¸€æ¬¡æ€§å®Œå…¨ç§»é™¤**

```yaml
Phase 1: ç«‹å³æ¸…ç† (Week 1, Day 1-2)
åˆ é™¤ç»„ä»¶:
  âŒ /internal/outbox/ æ•´ä¸ªæ¨¡å—
  âŒ outbox.events æ•°æ®åº“è¡¨å’Œschema
  âŒ outboxç›¸å…³çš„RLSç­–ç•¥
  âŒ CoreHRä¸­çš„outboxä¾èµ–å’Œè°ƒç”¨
  âŒ æ‰€æœ‰outboxç›¸å…³æµ‹è¯•

ä¿ç•™ä»·å€¼:
  âœ… äº‹ä»¶ç±»å‹å¸¸é‡ â†’ è¿ç§»åˆ°CQRS eventså®šä¹‰
  âœ… äº‹ä»¶ç»“æ„è®¾è®¡æ€è·¯ â†’ å‚è€ƒCQRSäº‹ä»¶è®¾è®¡

Phase 2: é‡æ„CoreHRé›†æˆ (Week 1, Day 3-5)
é‡æ„æ­¥éª¤:
  1. ç§»é™¤CoreHR Serviceä¸­çš„outboxä¾èµ–
  2. ä¸´æ—¶ç§»é™¤äº‹ä»¶å‘å¸ƒè°ƒç”¨ (ç­‰å¾…Kafka EventBus)
  3. ç®€åŒ–Serviceæ„é€ å‡½æ•°
  4. æ›´æ–°æ‰€æœ‰ç›¸å…³æµ‹è¯•

Phase 3: CQRSäº‹ä»¶ç³»ç»Ÿå®ç° (Week 1 ååŠå‘¨)
å®ç°æ­¥éª¤:
  1. åŸºäºåŸoutboxäº‹ä»¶ç±»å‹è®¾è®¡CQRSäº‹ä»¶
  2. å®ç°Kafka EventBus
  3. é›†æˆåˆ°å‘½ä»¤å¤„ç†å™¨
  4. æ¢å¤äº‹ä»¶å‘å¸ƒåŠŸèƒ½ (ä½¿ç”¨Kafka)
```

#### å…·ä½“æ¸…ç†è¡ŒåŠ¨è®¡åˆ’

```yaml
ç«‹å³æ‰§è¡Œ (Phase 4 Week 1, Day 1):
  ğŸ—‘ï¸ åˆ é™¤ /internal/outbox/ æ•´ä¸ªç›®å½•
  ğŸ—‘ï¸ åˆ é™¤ outbox schema å’Œ events è¡¨
  ğŸ—‘ï¸ ç§»é™¤ main.go ä¸­çš„ outbox å¯¼å…¥å’Œåˆå§‹åŒ–
  ğŸ—‘ï¸ æ¸…ç† CoreHR Service ä¸­çš„ outbox ä¾èµ–

Day 2-3 æ‰§è¡Œ:
  ğŸ”„ é‡æ„ CoreHR Service æ„é€ å‡½æ•°
  ğŸ”„ ç§»é™¤æ‰€æœ‰ outbox ç›¸å…³çš„æ¡ä»¶åˆ¤æ–­
  ğŸ”„ æ›´æ–°é›†æˆæµ‹è¯• (ç§»é™¤ outbox éƒ¨åˆ†)
  ğŸ”„ æ¸…ç†æ•°æ®åº“è¿ç§»è„šæœ¬

Day 4-5 å®ç°:
  âœ… åŸºäºåŸ outbox äº‹ä»¶ç±»å‹è®¾è®¡ CQRS äº‹ä»¶
  âœ… å¼€å§‹å®ç° Kafka EventBus æ¥å£
  âœ… éªŒè¯æ¸…ç†åçš„ç³»ç»ŸåŠŸèƒ½å®Œæ•´æ€§
  âœ… ä¸ºåç»­ CQRS äº‹ä»¶é›†æˆåšå‡†å¤‡
```

### ç›´æ¥åºŸå¼ƒçš„ä¼˜åŠ¿

#### æ—¶é—´æ•ˆç‡
```yaml
æ—¶é—´èŠ‚çº¦:
  - æ¸è¿›è¿ç§»æ–¹æ¡ˆ: 3å‘¨ (åˆ†æ+è¿ç§»+æ¸…ç†)
  - ç›´æ¥åºŸå¼ƒæ–¹æ¡ˆ: 3-5å¤© (åˆ é™¤+é‡æ„+éªŒè¯)
  - èŠ‚çº¦æ—¶é—´: 2.5å‘¨ â†’ ç”¨äºæ ¸å¿ƒCQRSåŠŸèƒ½å¼€å‘

å¼€å‘æ•ˆç‡:
  - é¿å…ç»´æŠ¤ä¸¤å¥—äº‹ä»¶ç³»ç»Ÿ
  - ç›´æ¥åŸºäºCDC+Kafkaæ„å»ºç»Ÿä¸€æ¶æ„
  - å‡å°‘æŠ€æœ¯å€ºåŠ¡å’Œæ¶æ„å¤æ‚åº¦
```

#### æ¶æ„çº¯å‡€åº¦
```yaml
æ¶æ„ä¼˜åŠ¿:
  - å•ä¸€äº‹ä»¶æµæ¶æ„ (Kafka only)
  - é¿å…äº‹ä»¶ç³»ç»ŸäºŒå…ƒåŒ–
  - ç¬¦åˆCQRS+CDCè®¾è®¡åŸåˆ™
  - é™ä½è¿ç»´å¤æ‚åº¦

ä»£ç è´¨é‡:
  - åˆ é™¤6000+è¡Œunusedä»£ç 
  - ç®€åŒ–CoreHR Serviceæ¥å£
  - æé«˜ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§
  - å‡å°‘æµ‹è¯•å¤æ‚åº¦
```

#### é›¶é£é™©ç¡®è®¤
```yaml
é£é™©è¯„ä¼°ç¡®è®¤:
  âœ… æ— ç”Ÿäº§æ•°æ®: outbox.eventsè¡¨ä»æœªè¢«ä½¿ç”¨
  âœ… æ— ç”¨æˆ·ä¾èµ–: äº‹ä»¶å¤„ç†å™¨ä»æœªå¯åŠ¨
  âœ… æ— APIæš´éœ²: outboxä¸å¯¹å¤–æä¾›æœåŠ¡
  âœ… æ— é›†æˆä¾èµ–: å…¶ä»–ç³»ç»Ÿä¸ä¾èµ–outboxäº‹ä»¶

æŠ€æœ¯ç¡®è®¤:
  âœ… outbox.Service.Start() ä»æœªè¢«è°ƒç”¨
  âœ… äº‹ä»¶å¤„ç†åç¨‹ä»æœªå¯åŠ¨
  âœ… ä»…åœ¨CoreHRä¸­æœ‰é˜²å¾¡æ€§nilæ£€æŸ¥
  âœ… å¯ä»¥ç›´æ¥åˆ é™¤è€Œä¸å½±å“ç°æœ‰åŠŸèƒ½
```

### æ›´æ–°åçš„Phase 4è®¡åˆ’è°ƒæ•´

#### Week 1 ä»»åŠ¡æ›´æ–°
```yaml
Day 1-2: Outboxç³»ç»Ÿå®Œå…¨ç§»é™¤
  ğŸ—‘ï¸ åˆ é™¤æ•´ä¸ª /internal/outbox/ æ¨¡å—
  ğŸ—‘ï¸ æ¸…ç†æ•°æ®åº“schemaå’Œè¡¨
  ğŸ—‘ï¸ ç§»é™¤æ‰€æœ‰ç›¸å…³å¯¼å…¥å’Œä¾èµ–
  ğŸ—‘ï¸ ç®€åŒ–CoreHR Serviceæ„é€ å‡½æ•°

Day 3-4: äº‹ä»¶ç³»ç»Ÿé‡æ–°è®¾è®¡
  âœ… åŸºäºåˆ é™¤çš„outboxäº‹ä»¶è®¾è®¡CQRSäº‹ä»¶
  âœ… å®ç°Kafka EventBusæ¥å£
  âœ… è®¾è®¡å‘½ä»¤å¤„ç†å™¨äº‹ä»¶å‘å¸ƒé›†æˆ
  âœ… å»ºç«‹äº‹ä»¶æ¶ˆè´¹è€…æ¶æ„

Day 5-7: é›†æˆå’ŒéªŒè¯
  âœ… é›†æˆEventBusåˆ°å‘½ä»¤å¤„ç†å™¨
  âœ… å®ç°äº‹ä»¶æ¶ˆè´¹è€…
  âœ… æ›´æ–°æµ‹è¯•ç”¨ä¾‹
  âœ… éªŒè¯ç«¯åˆ°ç«¯äº‹ä»¶æµ

è°ƒæ•´åæ”¶ç›Š:
  âš¡ èŠ‚çº¦2.5å‘¨å¼€å‘æ—¶é—´
  ğŸ¯ ä¸“æ³¨æ ¸å¿ƒCQRS+CDCåŠŸèƒ½
  ğŸ§¹ ä»£ç åº“æ›´åŠ ç®€æ´
  ğŸ“ˆ æ¶æ„ä¸€è‡´æ€§æå‡
```

#### æ–°çš„å®æ–½ä¼˜å…ˆçº§
```yaml
Week 1: Outboxæ¸…ç† + äº‹ä»¶ç³»ç»Ÿå®ç°
  - ä¼˜å…ˆçº§æå‡: ç›´æ¥åºŸå¼ƒoutboxç³»ç»Ÿ
  - é‡ç‚¹ä»»åŠ¡: å¿«é€Ÿå®ç°Kafka EventBus
  - éªŒè¯ç›®æ ‡: äº‹ä»¶å‘å¸ƒå’Œæ¶ˆè´¹æ­£å¸¸å·¥ä½œ

Week 2: æ•°æ®åŒæ­¥å®Œå–„ (è®¡åˆ’ä¸å˜)
  - CDCæ•°æ®åŒæ­¥ä¼˜åŒ–
  - Neo4jæ¶ˆè´¹è€…å®ç°
  - ä¸€è‡´æ€§éªŒè¯å·¥å…·

Week 3-4: Neo4jæŸ¥è¯¢ä¼˜åŒ– (è®¡åˆ’ä¸å˜)
  - é«˜æ€§èƒ½å›¾æŸ¥è¯¢
  - æŸ¥è¯¢ç¼“å­˜ç­–ç•¥
  - å¤æ‚ç»„ç»‡ç®¡ç†åŠŸèƒ½

Week 5-8: ç›‘æ§ä¸ç”Ÿäº§å°±ç»ª (è®¡åˆ’ä¸å˜)
  - ç›‘æ§ä½“ç³»å»ºç«‹
  - å…ƒåˆçº¦å®Œå–„
  - æ€§èƒ½è°ƒä¼˜
  - ç”Ÿäº§éƒ¨ç½²å‡†å¤‡
```

---

## ğŸ”§ æŠ€æœ¯å®æ–½è¯¦æƒ…

### 1. äº‹ä»¶æ€»çº¿é›†æˆæ¶æ„

#### äº‹ä»¶æ€»çº¿æ¥å£è®¾è®¡
```go
// internal/cqrs/events/event_bus.go
type EventBus interface {
    Publish(ctx context.Context, event DomainEvent) error
    Subscribe(ctx context.Context, eventType string, handler EventHandler) error
    Start(ctx context.Context) error
    Stop() error
}

type KafkaEventBus struct {
    producer *kafka.Producer
    consumer *kafka.Consumer
    topics   map[string]string
}

// äº‹ä»¶å‘å¸ƒå®ç°
func (k *KafkaEventBus) Publish(ctx context.Context, event DomainEvent) error {
    topic := k.getTopicForEvent(event)
    message := &kafka.Message{
        TopicPartition: kafka.TopicPartition{
            Topic:     &topic,
            Partition: kafka.PartitionAny,
        },
        Key:   []byte(event.GetAggregateID()),
        Value: event.Serialize(),
        Headers: []kafka.Header{
            {Key: "event-type", Value: []byte(event.GetEventType())},
            {Key: "event-version", Value: []byte(event.GetVersion())},
            {Key: "timestamp", Value: []byte(event.GetTimestamp().Format(time.RFC3339))},
        },
    }
    
    return k.producer.Produce(message, nil)
}
```

#### å‘½ä»¤å¤„ç†å™¨é›†æˆç¤ºä¾‹
```go
// internal/cqrs/handlers/command_handlers.go
func (h *CommandHandler) HireEmployee(ctx context.Context, cmd HireEmployeeCommand) error {
    // 1. ä¸šåŠ¡é€»è¾‘éªŒè¯
    if err := h.validateHireEmployee(cmd); err != nil {
        return fmt.Errorf("validation failed: %w", err)
    }
    
    // 2. å¼€å§‹æ•°æ®åº“äº‹åŠ¡
    tx, err := h.db.BeginTx(ctx, nil)
    if err != nil {
        return fmt.Errorf("failed to begin transaction: %w", err)
    }
    defer tx.Rollback()
    
    // 3. åˆ›å»ºå‘˜å·¥èšåˆ
    employee := domain.NewEmployee(cmd.TenantID, cmd.FirstName, cmd.LastName, cmd.Email)
    
    // 4. æŒä¹…åŒ–åˆ°PostgreSQL
    if err := h.repo.SaveEmployee(ctx, tx, employee); err != nil {
        return fmt.Errorf("failed to save employee: %w", err)
    }
    
    // 5. æäº¤äº‹åŠ¡
    if err := tx.Commit(); err != nil {
        return fmt.Errorf("failed to commit transaction: %w", err)
    }
    
    // 6. å‘å¸ƒé¢†åŸŸäº‹ä»¶ (äº‹åŠ¡å¤–ï¼Œç¡®ä¿æ•°æ®å·²æŒä¹…åŒ–)
    event := events.EmployeeHired{
        EventID:      uuid.New(),
        EmployeeID:   employee.ID,
        TenantID:     employee.TenantID,
        FirstName:    employee.FirstName,
        LastName:     employee.LastName,
        Email:        employee.Email,
        HireDate:     employee.HireDate,
        Timestamp:    time.Now(),
        Version:      "v1.0",
    }
    
    // å¼‚æ­¥å‘å¸ƒäº‹ä»¶ï¼Œä¸é˜»å¡ä¸»æµç¨‹
    go func() {
        ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
        defer cancel()
        
        if err := h.eventBus.Publish(ctx, event); err != nil {
            h.logger.Error("Failed to publish EmployeeHired event", 
                "error", err, 
                "employee_id", employee.ID,
                "event_id", event.EventID)
            // å¯ä»¥è€ƒè™‘å°†å¤±è´¥çš„äº‹ä»¶å­˜å‚¨åˆ°outboxè¡¨ä¸­ï¼Œç¨åé‡è¯•
        }
    }()
    
    return nil
}
```

### 2. Neo4jæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥

#### é«˜æ€§èƒ½ç»„ç»‡æ¶æ„æŸ¥è¯¢
```cypher
// æŸ¥è¯¢ç»„ç»‡æ¶æ„æ ‘ (ä¼˜åŒ–ç‰ˆæœ¬)
MATCH path = (root:OrganizationUnit {tenant_id: $tenantId})-[:PARENT_OF*0..5]->(child:OrganizationUnit)
WHERE root.id = $rootUnitId OR $rootUnitId IS NULL
WITH path, nodes(path) as unitNodes, length(path) as depth
WHERE depth <= $maxDepth
OPTIONAL MATCH (unit:OrganizationUnit)-[:CONTAINS]->(emp:Employee {employment_status: 'ACTIVE'})
WHERE unit IN unitNodes AND emp.tenant_id = $tenantId
RETURN 
  unit.id as unit_id,
  unit.name as unit_name,
  unit.unit_type as unit_type,
  depth,
  collect({
    employee_id: emp.id,
    employee_name: emp.first_name + ' ' + emp.last_name,
    employee_email: emp.email
  }) as employees
ORDER BY depth, unit.name
```

#### å‘˜å·¥å…³ç³»è·¯å¾„æŸ¥æ‰¾
```cypher
// æŸ¥æ‰¾å‘˜å·¥é—´æœ€çŸ­ç®¡ç†è·¯å¾„
MATCH path = shortestPath((emp1:Employee {id: $fromEmployeeId})-[:REPORTS_TO*]-(emp2:Employee {id: $toEmployeeId}))
WHERE emp1.tenant_id = $tenantId AND emp2.tenant_id = $tenantId
RETURN 
  [node in nodes(path) | {
    employee_id: node.id,
    employee_name: node.first_name + ' ' + node.last_name,
    position_title: node.current_position_title
  }] as relationship_path,
  length(path) as path_length,
  [rel in relationships(path) | type(rel)] as relationship_types
```

### 3. ç›‘æ§æŒ‡æ ‡å®šä¹‰

#### å…³é”®ä¸šåŠ¡æŒ‡æ ‡
```go
// internal/metrics/business_metrics.go
var (
    // å‘½ä»¤å¤„ç†æŒ‡æ ‡
    CommandProcessingDuration = prometheus.NewHistogramVec(
        prometheus.HistogramOpts{
            Name: "cqrs_command_processing_duration_seconds",
            Help: "Duration of command processing",
            Buckets: []float64{0.01, 0.05, 0.1, 0.25, 0.5, 1.0, 2.5, 5.0},
        },
        []string{"command_type", "tenant_id", "status"},
    )
    
    // æŸ¥è¯¢å“åº”æŒ‡æ ‡
    QueryResponseDuration = prometheus.NewHistogramVec(
        prometheus.HistogramOpts{
            Name: "cqrs_query_response_duration_seconds", 
            Help: "Duration of query processing",
            Buckets: []float64{0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1.0},
        },
        []string{"query_type", "tenant_id", "cache_hit"},
    )
    
    // CDCå»¶è¿ŸæŒ‡æ ‡
    CDCLatency = prometheus.NewHistogramVec(
        prometheus.HistogramOpts{
            Name: "cdc_end_to_end_latency_seconds",
            Help: "End-to-end CDC processing latency",
            Buckets: []float64{0.1, 0.25, 0.5, 1.0, 2.0, 5.0, 10.0},
        },
        []string{"source_table", "target_system"},
    )
    
    // äº‹ä»¶æ€»çº¿æŒ‡æ ‡
    EventBusMetrics = prometheus.NewCounterVec(
        prometheus.CounterOpts{
            Name: "event_bus_messages_total",
            Help: "Total number of event bus messages",
        },
        []string{"event_type", "status", "tenant_id"},
    )
)
```

---

## ğŸ“Š éªŒæ”¶æ ‡å‡†å’Œè´¨é‡é—¨ç¦

### Phase 4 å®Œæˆæ ‡å‡†

#### æ€§èƒ½æŒ‡æ ‡
```yaml
å¿…è¾¾æŒ‡æ ‡ (Hard Requirements):
  - å‘½ä»¤å¤„ç†å»¶è¿Ÿ P99 < 100ms
  - æŸ¥è¯¢å“åº”å»¶è¿Ÿ P99 < 500ms  
  - CDCç«¯åˆ°ç«¯å»¶è¿Ÿ P99 < 1000ms
  - ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%
  - äº‹ä»¶å‘å¸ƒæˆåŠŸç‡ > 99.95%

ä¼˜åŒ–ç›®æ ‡ (Stretch Goals):
  - å‘½ä»¤å¤„ç†å»¶è¿Ÿ P95 < 50ms
  - æŸ¥è¯¢ç¼“å­˜å‘½ä¸­ç‡ > 85%
  - æŸ¥è¯¢å¹¶å‘å¤„ç† > 1000 QPS
  - å†…å­˜ä½¿ç”¨ < 2GB (å®Œæ•´ç³»ç»Ÿ)
```

#### åŠŸèƒ½å®Œæ•´æ€§
```yaml
äº‹ä»¶ç³»ç»Ÿ:
  âœ… æ‰€æœ‰å‘½ä»¤æ“ä½œå‘å¸ƒå¯¹åº”é¢†åŸŸäº‹ä»¶
  âœ… äº‹ä»¶æ¶ˆè´¹è€…æ­£ç¡®åŒæ­¥æ•°æ®åˆ°Neo4j
  âœ… äº‹ä»¶å¤±è´¥é‡è¯•æœºåˆ¶å·¥ä½œæ­£å¸¸
  âœ… äº‹ä»¶ç‰ˆæœ¬ç®¡ç†å’Œå‘åå…¼å®¹

æŸ¥è¯¢ç³»ç»Ÿ:
  âœ… ç»„ç»‡æ¶æ„å¤æ‚æŸ¥è¯¢ (<500ms)
  âœ… å‘˜å·¥å…³ç³»è·¯å¾„æŸ¥æ‰¾ (<200ms)
  âœ… æ‰¹é‡æ“ä½œæ”¯æŒ (1000+ å‘˜å·¥)
  âœ… æŸ¥è¯¢ç»“æœç¼“å­˜å’Œå¤±æ•ˆç­–ç•¥

ç›‘æ§ç³»ç»Ÿ:
  âœ… æ‰€æœ‰å…³é”®ç»„ä»¶ç›‘æ§è¦†ç›–
  âœ… ä¸šåŠ¡å’ŒæŠ€æœ¯æŒ‡æ ‡æ”¶é›†
  âœ… å‘Šè­¦è§„åˆ™é…ç½®å’Œæµ‹è¯•
  âœ… ç›‘æ§é¢æ¿å¯è§†åŒ–
```

#### ç”Ÿäº§å°±ç»ªåº¦
```yaml
éƒ¨ç½²å’Œè¿ç»´:
  âœ… ä¸€é”®éƒ¨ç½²è„šæœ¬å’Œé…ç½®
  âœ… å¥åº·æ£€æŸ¥å’Œè‡ªæ¢å¤æœºåˆ¶
  âœ… æ—¥å¿—èšåˆå’ŒæŸ¥è¯¢èƒ½åŠ›
  âœ… æ€§èƒ½åŸºå‡†å’Œå›å½’æµ‹è¯•

å®‰å…¨å’Œåˆè§„:
  âœ… å®‰å…¨æ¼æ´æ‰«æé€šè¿‡
  âœ… æ•°æ®éšç§ä¿æŠ¤åˆè§„
  âœ… è®¿é—®æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—
  âœ… æ•°æ®å¤‡ä»½å’Œæ¢å¤éªŒè¯

æ–‡æ¡£å’ŒåŸ¹è®­:
  âœ… å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£
  âœ… è¿ç»´æ“ä½œæ‰‹å†Œ
  âœ… APIä½¿ç”¨æŒ‡å—
  âœ… æ•…éšœæ’é™¤æ‰‹å†Œ
```

---

## ğŸ›¡ï¸ é£é™©ç®¡ç†

### æŠ€æœ¯é£é™©

#### æ€§èƒ½é£é™©
- **é£é™©**: Neo4jå¤æ‚æŸ¥è¯¢æ€§èƒ½ä¸è¾¾æ ‡
- **ç¼“è§£**: 
  - å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œæ—©æœŸè¯†åˆ«ç“¶é¢ˆ
  - å‡†å¤‡æŸ¥è¯¢ä¼˜åŒ–å’Œç´¢å¼•è°ƒä¼˜æ–¹æ¡ˆ
  - è®¾è®¡é™çº§ç­–ç•¥ (ç¼“å­˜+ç®€åŒ–æŸ¥è¯¢)

#### æ•°æ®ä¸€è‡´æ€§é£é™©  
- **é£é™©**: CDCæ•°æ®åŒæ­¥å»¶è¿Ÿæˆ–å¤±è´¥
- **ç¼“è§£**:
  - å®ç°ç«¯åˆ°ç«¯æ•°æ®ä¸€è‡´æ€§éªŒè¯
  - å»ºç«‹æ•°æ®é‡åŒæ­¥å·¥å…·å’Œæµç¨‹
  - è®¾è®¡æœ€ç»ˆä¸€è‡´æ€§è¡¥å¿æœºåˆ¶

#### é›†æˆå¤æ‚åº¦é£é™©
- **é£é™©**: äº‹ä»¶æ€»çº¿é›†æˆå½±å“ç³»ç»Ÿç¨³å®šæ€§
- **ç¼“è§£**:
  - é‡‡ç”¨è“ç»¿éƒ¨ç½²ï¼Œåˆ†é˜¶æ®µæ¨å‡º
  - ä¿ç•™åŸæœ‰APIä½œä¸ºfallback
  - å»ºç«‹å®Œæ•´çš„å›æ»šè®¡åˆ’

### æ—¶é—´é£é™©

#### é‡Œç¨‹ç¢‘å»¶æœŸé£é™©
- **ç¼“è§£ç­–ç•¥**:
  - æ¯å‘¨milestone reviewå’Œé£é™©è¯„ä¼°
  - ä¼˜å…ˆçº§åŠ¨æ€è°ƒæ•´ (æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆ)
  - å¤–éƒ¨ä¸“å®¶å’¨è¯¢å’ŒæŠ€æœ¯æ”¯æŒ

#### èµ„æºç“¶é¢ˆé£é™©
- **ç¼“è§£ç­–ç•¥**:
  - å›¢é˜ŸæŠ€èƒ½åŸ¹è®­å’ŒçŸ¥è¯†åˆ†äº«
  - å·¥ä½œè´Ÿè½½åˆç†åˆ†é…å’Œå¹¶è¡Œæ‰§è¡Œ
  - å…³é”®è·¯å¾„è¯†åˆ«å’Œèµ„æºä¼˜å…ˆä¿éšœ

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡å’Œç›‘æ§

### å®æ–½è¿›åº¦ç›‘æ§

#### æ¯å‘¨æ£€æŸ¥ç‚¹
```yaml
Week 1: äº‹ä»¶æ€»çº¿åŸºç¡€æ¶æ„å®Œæˆ
  - EventBusæ¥å£å®ç°å’Œæµ‹è¯•
  - å‘½ä»¤å¤„ç†å™¨äº‹ä»¶å‘å¸ƒé›†æˆ
  - åŸºç¡€äº‹ä»¶æ¶ˆè´¹è€…å®ç°

Week 2: æ•°æ®åŒæ­¥éªŒè¯é€šè¿‡  
  - Neo4jæ•°æ®åŒæ­¥å®Œæ•´æ€§
  - CDCå»¶è¿Ÿç›‘æ§å»ºç«‹
  - åŒæ­¥å¼‚å¸¸å¤„ç†æœºåˆ¶

Week 3: æŸ¥è¯¢æ€§èƒ½è¾¾æ ‡
  - æ ¸å¿ƒæŸ¥è¯¢å“åº”æ—¶é—´ <500ms
  - æŸ¥è¯¢ç¼“å­˜æœºåˆ¶å·¥ä½œ
  - æ€§èƒ½ç›‘æ§æŒ‡æ ‡æ­£å¸¸

Week 4: é«˜çº§åŠŸèƒ½å®ç°
  - ç»„ç»‡åˆ†æåŠŸèƒ½å®Œæ•´
  - æ‰¹é‡æ“ä½œæ€§èƒ½ä¼˜åŒ–
  - APIåŠŸèƒ½å®Œæ•´æ€§éªŒè¯

Week 5: ç›‘æ§ä½“ç³»å»ºç«‹
  - PrometheusæŒ‡æ ‡æ”¶é›†
  - Grafanaé¢æ¿é…ç½®
  - å‘Šè­¦è§„åˆ™æµ‹è¯•é€šè¿‡

Week 6: å…ƒåˆçº¦ä½“ç³»å®Œå–„
  - åˆçº¦å®šä¹‰å’ŒéªŒè¯å·¥å…·
  - SLOç›‘æ§é›†æˆ
  - æ¶æ„åˆè§„æ£€æŸ¥

Week 7: æ€§èƒ½è°ƒä¼˜å®Œæˆ
  - ç«¯åˆ°ç«¯æ€§èƒ½æµ‹è¯•é€šè¿‡
  - ç³»ç»Ÿç“¶é¢ˆä¼˜åŒ–
  - å®¹é‡è§„åˆ’å®Œæˆ

Week 8: ç”Ÿäº§å°±ç»ª
  - éƒ¨ç½²è„šæœ¬å’Œæ–‡æ¡£å®Œæ•´
  - å®‰å…¨å®¡è®¡é€šè¿‡
  - è¿ç»´æ‰‹å†Œå®Œå–„
```

### è´¨é‡ä¿è¯æ£€æŸ¥ç‚¹

#### æ¯ä¸ªé˜¶æ®µçš„è´¨é‡é—¨ç¦
```yaml
äº‹ä»¶ç³»ç»Ÿè´¨é‡é—¨ç¦:
  - äº‹ä»¶å‘å¸ƒæˆåŠŸç‡ > 99.9%
  - äº‹ä»¶æ¶ˆè´¹å»¶è¿Ÿ P95 < 100ms
  - é‡è¯•æœºåˆ¶æµ‹è¯•é€šè¿‡
  - äº‹ä»¶æ•°æ®ä¸€è‡´æ€§éªŒè¯

æŸ¥è¯¢ç³»ç»Ÿè´¨é‡é—¨ç¦:
  - æŸ¥è¯¢å“åº”æ—¶é—´è¾¾æ ‡ P99 < 500ms
  - ç¼“å­˜å‘½ä¸­ç‡ > 80%
  - å¹¶å‘æŸ¥è¯¢æµ‹è¯•é€šè¿‡
  - æŸ¥è¯¢æ­£ç¡®æ€§éªŒè¯ 100%

ç›‘æ§ç³»ç»Ÿè´¨é‡é—¨ç¦:
  - ç›‘æ§æŒ‡æ ‡è¦†ç›–ç‡ 100%
  - å‘Šè­¦å“åº”æ—¶é—´ < 5åˆ†é’Ÿ  
  - ç›‘æ§æ•°æ®å‡†ç¡®æ€§éªŒè¯
  - é¢æ¿å¯è§†åŒ–å®Œæ•´æ€§

ç”Ÿäº§å°±ç»ªè´¨é‡é—¨ç¦:
  - æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡
  - å®‰å…¨æ‰«æ 0ä¸ªé«˜å±æ¼æ´
  - éƒ¨ç½²æˆåŠŸç‡ 100%
  - æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡
```

---

## ğŸ¯ Phase 4 æ€»ç»“

**Phase 4ç›®æ ‡**: åŸºäºå·²å®Œæˆçš„CQRS+CDCæ ¸å¿ƒæ¶æ„ï¼Œå®ç°**ç”Ÿäº§çº§ä¼ä¸šç»„ç»‡ç®¡ç†ç³»ç»Ÿ**çš„æœ€ç»ˆå®Œå–„ã€‚

**æ ¸å¿ƒä»·å€¼**:
- ğŸ”§ **ç”Ÿäº§å°±ç»ª**: æ€§èƒ½ã€ç›‘æ§ã€è¿ç»´å…¨é¢ä¼˜åŒ–
- âš¡ **æ€§èƒ½å“è¶Š**: æ¯«ç§’çº§å“åº”ï¼Œæ”¯æŒå¤§è§„æ¨¡å¹¶å‘
- ğŸ“Š **å¯è§‚æµ‹æ€§**: å…¨æ–¹ä½ç›‘æ§å’Œæ™ºèƒ½å‘Šè­¦
- ğŸ›¡ï¸ **ä¼ä¸šçº§**: å®‰å…¨ã€åˆè§„ã€é«˜å¯ç”¨æ¶æ„

**é•¿æœŸå½±å“**:
- ä¸ºç»„ç»‡ç®¡ç†ä¸šåŠ¡æä¾›å¼ºå¤§çš„æŠ€æœ¯åŸºç¡€
- å»ºç«‹ç°ä»£åŒ–çš„ä¼ä¸šçº§ç³»ç»Ÿæ¶æ„æ ‡å‡†  
- åŸ¹å…»å›¢é˜Ÿçš„åˆ†å¸ƒå¼ç³»ç»Ÿå’ŒDevOpsèƒ½åŠ›
- ä¸ºåç»­å¾®æœåŠ¡åŒ–æ¼”è¿›å¥ å®šåšå®åŸºç¡€

---

**ğŸš€ Phase 4 å£å·**: "Performance, Monitoring, Production-Ready - è®©ä¼ä¸šçº§ç»„ç»‡ç®¡ç†ç³»ç»Ÿå®Œç¾è¿è¡Œï¼"

**é¡¹ç›®çŠ¶æ€**: ğŸ“‹ **è®¡åˆ’åˆ¶å®šå®Œæˆ** - å‡†å¤‡å¯åŠ¨Phase 4å®æ–½ï¼