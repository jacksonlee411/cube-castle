# 06 â€” é›†æˆå›¢é˜Ÿæ¨è¿›è®°å½•ï¼ˆRS256 è®¤è¯ä¸ API åˆè§„æ²»ç†ï¼‰

æœ€åæ›´æ–°ï¼š2025-09-27 20:25 UTC
ç»´æŠ¤å›¢é˜Ÿï¼šè®¤è¯å°ç»„ï¼ˆä¸»è´£ï¼‰+ å‰ç«¯å·¥å…·ç»„ + å‘½ä»¤æœåŠ¡å›¢é˜Ÿ
çŠ¶æ€ï¼šPlan 12/13/14 å·²å®Œæˆå½’æ¡£ï¼ŒPlan 17 TODO æ²»ç†å®Œæˆå¾…å‘¨åº¦å·¡æ£€è·Ÿè¿›ï¼ŒPlan 15 ä¾‹è¡Œå¤æ ¸ä¸­

---

## 1. è¿›è¡Œä¸­äº‹é¡¹æ¦‚è§ˆ
- **âœ… Plan 12 éªŒæ”¶å®Œæˆ**ï¼štemporalå¥‘çº¦å›æ­£å·²éªŒè¯å®Œæˆï¼ŒPlaywrightæµ‹è¯•æ‰§è¡ŒæˆåŠŸï¼Œ12å·æ–‡æ¡£å·²å½’æ¡£è‡³ `docs/archive/development-plans/`ã€‚
- **âœ… Plan 13ï¼ˆåœç”¨/åˆ é™¤ä¸€è‡´æ€§æ²»ç†ï¼‰å®Œæˆå¹¶å½’æ¡£**ï¼š
  - âœ… `DELETE_ORGANIZATION` äº‹ä»¶ã€å­ç»„ç»‡é˜»æ–­ã€å®¡è®¡æ—¥å¿—è½åœ°ï¼›`make test`ã€`make test-integration` å…¨ç»¿
  - âœ… GraphQL `childrenCount` / `includeDisabledAncestors`ã€å‰ç«¯ Parent Selector ä¸ `organizationPermissions` è”è°ƒé€šè¿‡
  - âœ… éªŒæ”¶è§ `docs/archive/development-plans/13-organization-suspend-delete-governance.md`ï¼Œæµ‹è¯•è¯æ˜é™„å½•å·²å½’æ¡£
- **âœ… Plan 14ï¼ˆstatus-only è½¯åˆ é™¤ï¼‰æŠ€æœ¯å®æ–½å®Œæˆ**ï¼š
  - âœ… Phase 1 æ•°æ®å®¡è®¡ï¼š13æ¡è®°å½•çŠ¶æ€å®Œå…¨ä¸€è‡´ï¼Œç”Ÿæˆ `reports/temporal/status-only-audit-final.json` ä¸å·®å¼‚æŠ¥å‘Š
  - âœ… Phase 4 å›å½’éªŒè¯ï¼šGoå•å…ƒ/é›†æˆæµ‹è¯•ã€å‰ç«¯æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ŒE2Eæµ‹è¯•ç¯å¢ƒé—®é¢˜å·²è®°å½•
  - âœ… å®ç°æ¸…å•å·²æ›´æ–°ä¸ºv1.9.1ç‰ˆæœ¬ï¼Œè®°å½•è½¯åˆ é™¤ç»Ÿä¸€æ¶æ„å˜æ›´
- **API åˆè§„ä¾‹å¤–å†³ç­–**ï¼šå‰ç«¯ lint ä»æŠ¥ 3 ä¸ª `camelcase`ï¼ˆå¤–éƒ¨åè®®å­—æ®µï¼‰ä¸å¤šå¤„ `no-console`ï¼Œå°šæœªå†³å®šè±å…æˆ–æ”¹å†™ï¼ŒCI é…ç½®ä¹ŸæœªåŒæ­¥ã€‚
- **Plan 17 TODO æ²»ç†ï¼ˆå·²å½’æ¡£ï¼‰**ï¼š419 çŠ¶æ€ç è¯„å®¡å®Œæˆï¼›`scripts/check-temporary-tags.sh` æ‰©å±•æ”¯æŒæ–‡æ¡£æ‰«æï¼ŒCI åŠå‘¨åº¦å·¡æ£€æ—¥å¿—å·²æäº¤ï¼ŒæŒç»­å·¡æ£€æŒ‰æ¨¡æ¿æ‰§è¡Œã€‚
- **Console è¾“å‡ºæ²»ç†**ï¼šç¼ºä¹ç»Ÿä¸€æ—¥å¿—ç­–ç•¥ï¼Œæ˜¯å¦æ›¿æ¢ `console` éœ€ç”±å‰ç«¯å›¢é˜Ÿç»™å‡ºæ–¹æ¡ˆä¸æ—¶é—´è¡¨ã€‚
- **Spectral ä¾èµ–å¤±æ•ˆ**ï¼š`npm install` æ‹‰å– `@stoplight/spectral-oasx` ä»æŠ¥ 404ï¼Œéœ€ä¸å¹³å°å›¢é˜Ÿåä½œæ›¿æ¢é•œåƒæˆ–ç¼“å­˜ï¼Œé¿å…é˜»æ–­å®‰è£…æµç¨‹ã€‚
- **Playwright æƒé™å›å½’**ï¼šæ—¶æ€ç›¸å…³ç”¨ä¾‹å› æƒé™é…ç½®å¤±è´¥ï¼Œéœ€å®šä½ä¸šåŠ¡ç­–ç•¥æˆ–æµ‹è¯•æ•°æ®ï¼Œç¡®è®¤èƒ½å¤Ÿåœ¨ RS256 ç¯å¢ƒä¸‹ç¨³å®šé€šè¿‡ã€‚

---

## 2. å½“å‰çŠ¶æ€ä¸è¯æ®
- âœ… `make run-auth-rs256-sim` + `curl http://localhost:9090/.well-known/jwks.json` å¯æ‹¿åˆ° `kid=bff-key-1` RSA å…¬é’¥ï¼ŒRS256 é“¾è·¯åŸºçº¿å¯ç”¨ã€‚
- âœ… `rg "temporal" frontend/src tests/e2e` ä»…ä¿ç•™å¥‘çº¦å†…å¼•ç”¨ï¼Œ`frontend/tests/e2e/temporal-management-integration.spec.ts` å·²æ ¡éªŒ `/versions` å¹¶é˜»æ–­ `/temporal`ã€‚
- âœ… **2025-09-27 Playwright å¤æµ‹å®Œæˆ**ï¼šç¯å¢ƒå°±ç»ªåæ‰§è¡ŒæˆåŠŸï¼Œ12ä¸ªæµ‹è¯•ä¸­10ä¸ªé€šè¿‡ï¼Œ2ä¸ªé¢„æœŸå¤±è´¥ï¼ˆå¥‘çº¦éªŒè¯æ­£å¸¸ï¼‰ï¼Œç»“æœå·²è®°å½•åœ¨ `reports/iig-guardian/temporal-contract-rollback-20250926.md`ã€‚
- âœ… `docs/api/openapi.yaml`ã€`docs/api/schema.graphql`ã€Quick Reference ä¸ API Guide å·²æ›´æ–°ä¸º status-only è¯­ä¹‰ï¼Œå”¯ä¸€äº‹å®æ¥æºæŒ‡å‘ `status` å­—æ®µã€‚
- âš ï¸ `NODE_PATH=frontend/node_modules npx eslint@8.57.0 frontend/src/**/*.{ts,tsx} --config frontend/.eslintrc.api-compliance.cjs` è¾“å‡º `camelcase` ä¸ `no-console` å‘Šè­¦ï¼Œéœ€å†³ç­–å¤„ç†æ–¹å¼ã€‚
- âš ï¸ `npm install` è¿‡ç¨‹ä¸­æŠ“å– `@stoplight/spectral-oasx` å¤±è´¥ï¼Œé˜»å¡å·¥å…·é“¾ï¼›æš‚æ— æ›¿ä»£æ–¹æ¡ˆã€‚
- âš ï¸ Playwright `--grep "temporal"` ç”¨ä¾‹åœ¨å¸¦ RS256 JWT æ—¶ä»å› æƒé™è¢«æ‹’ç»ï¼Œéœ€è¡¥å……æ•°æ®æˆ–æƒé™é…ç½®ã€‚

---

## 3. å¾…åŠæ¸…å•
1. âœ… ~~å›å½’ Playwright temporal ç”¨ä¾‹ï¼ˆä½¿ç”¨æ›´æ–°åçš„å‰§æœ¬ï¼‰ï¼Œå¹¶åœ¨ `reports/iig-guardian/temporal-contract-rollback-20250926.md` é™„æœ€æ–°ç»“æœã€‚~~
2. ç¡®è®¤ `camelcase` ä¸ `no-console` çš„é•¿æœŸå¤„ç†æ–¹å¼ï¼ˆè±å…åå•æˆ–ä»£ç è°ƒæ•´ï¼‰ï¼ŒåŒæ­¥æ›´æ–° lint é…ç½®åŠæ–‡æ¡£è®°å½•ã€‚
3. åˆ¶å®šå‰ç«¯æ—¥å¿—æ›¿æ¢æ–¹æ¡ˆï¼ˆç›®æ ‡ç»„ä»¶ã€è´Ÿè´£äººã€æ—¶é—´è¡¨ï¼‰ï¼Œé¿å…å‡ºç°æ— é™åˆ¶ `console`ã€‚
4. ä¸å¹³å°å›¢é˜Ÿåä½œï¼Œä¸º `@stoplight/spectral-oasx` é…ç½®å¯ç”¨é•œåƒæˆ–ç¼“å­˜ï¼Œå¹¶åœ¨æ—¥å¿—è®°å½•å¤„ç†è¿›åº¦ã€‚
5. ä¿®å¤ Playwright æƒé™å¤±è´¥ï¼ˆæ ¸å¯¹æµ‹è¯•è´¦å·è§’è‰²/ç§Ÿæˆ·ã€æˆ–è¡¥å……ç§å­æ•°æ®ï¼‰ï¼Œå®Œæˆåæä¾›æŠ¥å‘Šè·¯å¾„ã€‚
6. ã€Plan 14ã€‘æ•°æ®å¹³å°+å‘½ä»¤æœåŠ¡å›¢é˜Ÿï¼šæ‰§è¡Œ `sql/inspection/status_deleted_audit.sql` å¹¶æŒ‰æ‰‹å†Œäº§å‡º `reports/temporal/status-only-audit-after.json`ã€`status-only-migration_diff.md`ï¼ˆç”Ÿäº§ç­‰ä»·ç¯å¢ƒå¤æ ¸å¾…æ’æœŸï¼‰ã€‚
7. âœ… ã€Plan 14ã€‘æŸ¥è¯¢æœåŠ¡+QA å›¢é˜Ÿï¼š`npm run test:contract`ã€`npm run test:e2e -- --grep "temporal"`ï¼ˆMock æ¨¡å¼ï¼‰å·²æ‰§è¡Œï¼Œå¾…çœŸå®ç¯å¢ƒå¤æ ¸ç›‘æ§åå½’æ¡£ã€‚

---

## 4. å¾…æµ‹è¯•äº‹é¡¹
- **Playwright E2Eï¼ˆtemporal åœºæ™¯ï¼‰**ï¼šMock æ¨¡å¼å·²å®Œæˆ `npm run test:e2e -- --grep "temporal"`ï¼›å¾…åç«¯æœåŠ¡å¯ç”¨æ—¶åœ¨ RS256 ç¯å¢ƒå¤è·‘å¹¶é™„å¸¦ç›‘æ§ç»“æœã€‚
- **API åˆè§„ Lint å¤éªŒ**ï¼šæŒ‰ `NODE_PATH=frontend/node_modules npx eslint@8.57.0 ...` å‘½ä»¤é‡è·‘ï¼Œç¡®è®¤å‘Šè­¦æ¸…é›¶æˆ–ä¸è±å…æ¸…å•ä¸€è‡´ï¼Œè¾“å‡ºç»“æœéœ€å½’æ¡£ã€‚
- **Status-only æ•°æ®å®¡è®¡**ï¼šåœ¨å…·å¤‡æ•°æ®åº“è®¿é—®æƒé™çš„ç¯å¢ƒè¿è¡Œ `psql -f sql/inspection/status_deleted_audit.sql > reports/temporal/status-only-audit-after.json`ï¼Œå¹¶æ›´æ–°å·®å¼‚æŠ¥å‘Šã€‚
- **Status-only å›å½’æµ‹è¯•**ï¼šå®Œæˆ Phase 4 æµ‹è¯•çŸ©é˜µåï¼Œå°†æ‰§è¡Œè¯æ®ä¸ç›‘æ§ç»“è®ºé™„äº `reports/temporal/`ã€‚

---

## 5. é£é™©ä¸è·Ÿè¸ª
- **éªŒè¯è¯æ®é£é™©**ï¼šPlaywright æ–°å‰§æœ¬å°šæœªåœ¨ RS256 ç¯å¢ƒå¤è·‘å‡ºç»¿ç¯ï¼Œéœ€è¦è¡¥å……æŠ¥å‘Šä»¥å½¢æˆå”¯ä¸€äº‹å®æ¥æºã€‚
- **CI é˜»æ–­é£é™©**ï¼š`@stoplight/spectral-oasx` æ‹‰å–å¤±è´¥ä¼šå¯¼è‡´ `npm install` å´©æºƒï¼Œä¸€æ—¦å‘½ä¸­ï¼ŒCI å°†æ— æ³•å®Œæˆå‰ç«¯æ„å»ºã€‚
- **åˆè§„ç¼ºå£**ï¼šè‹¥ `camelcase`/`no-console` æœªå†³ç­–ä¸” CI æœªåŠ å…¥è±å…ï¼Œæœªæ¥åˆå¹¶å°†è¢«é˜»å¡æˆ–æ”¾è¡Œä¸ä¸€è‡´å®ç°ã€‚
- **æƒé™å›å½’é£é™©**ï¼šPlaywright ç”¨ä¾‹å¤±è´¥è¯´æ˜æƒé™ç­–ç•¥æœªè¦†ç›– RS256 åœºæ™¯ï¼Œéœ€è¦åœ¨ä¸šåŠ¡å±‚ç¡®è®¤æœŸæœ›è¡Œä¸ºã€‚

---

## 6. éªŒè¯è®°å½•æ›´æ–°
| éªŒè¯é¡¹ | ç»“æœ | å¤‡æ³¨ |
| --- | --- | --- |
| Playwright temporal ç”¨ä¾‹ | âœ… 10/12 é€šè¿‡ï¼Œ2ä¸ªé¢„æœŸå¤±è´¥ | æŠ¥å‘Šè·¯å¾„ï¼š`reports/iig-guardian/temporal-contract-rollback-20250926.md` |
| API åˆè§„ Lint | âš ï¸ ä»æœ‰camelcase/no-consoleå‘Šè­¦ | éœ€å†³ç­–å¤„ç†æ–¹å¼ |
| å®ç°æ¸…å•/æ¶æ„æ ¡éªŒ | âœ… æ—  `/temporal` ç›¸å…³æ¡ç›® | å¥‘çº¦å›æ­£å®Œæˆ |
| Plan 12 æ–‡æ¡£å½’æ¡£ | âœ… å·²ç§»è‡³ archive ç›®å½• | `docs/archive/development-plans/12-temporal-command-contract-gap-remediation.md` |
| Plan 14 status-only è¿›åº¦ | ğŸš§ Phase 1 ç”Ÿäº§å¤æ ¸å¾…æ’æœŸ / Phase 4 Mock å·²é€šè¿‡ | `npm run test:contract`ã€`npm run test:e2e -- --grep "temporal"`ï¼ˆMock æ¨¡å¼ï¼‰ |
| Plan 13 åœç”¨/åˆ é™¤æ²»ç† | âœ… å·²å½’æ¡£ï¼Œæµ‹è¯•å…¨ç»¿ | æ–‡æ¡£ï¼š`docs/archive/development-plans/13-organization-suspend-delete-governance.md` |
| Plan 15 æ—¶é—´è½´å¯¼èˆªå¤æ ¸ | âœ… å·²å®Œæˆå¹¶å½’æ¡£ | æäº¤: `0dbee418`, éªŒæ”¶: æ—¶é—´è½´ä¸“èŒå¯¼èˆªã€ç¼–è¾‘å”¯ä¸€å…¥å£ã€æ‰€æœ‰æµ‹è¯•é€šè¿‡ |
