# 06 号文档：职位管理 Stage 0 验收测试计划（相对 80 号方案）

**创建日期**：2025-10-13  
**维护人**：集成团队（前端验证小组）  
**关联计划**：80 号《职位管理模块设计方案》 Stage 0  

---

## 1. 验收范围

- 仅针对 80 号计划 *Stage 0「前端布局与交互确认」* 的交付物进行测试确认。
- 验证对象：`feature/position-ui-frame` 分支中的 `/positions` Mock 页面及相关导航改动。
- 不纳入范围：真实 API 数据接入、命令服务实现、后续 Stage 1+ 的业务逻辑。

---

## 2. 前置条件

1. 前端依赖已安装：`npm install`（在 `frontend/` 目录下执行）。  
2. 使用本计划指定分支：`feature/position-ui-frame`。  
3. 构建/测试命令可本地执行（Node.js ≥ 20 / PNPM/NPM 均可，本计划以 NPM 为基准）。  
4. 无需启动后端服务，Mock 页面不依赖 API。  
5. 默认情况下，前端以 *Mock 模式* 渲染 `/positions`，该模式通过 `VITE_POSITIONS_MOCK_MODE` 控制：  
   - 未显式设置或设为 `true` 时，页面免认证可直接访问；  
   - 设为 `false` 时恢复认证保护，需按常规流程登录。  

---

## 3. 测试步骤与预期

### 3.1 单元测试（Vitest）

| 步骤 | 命令 | 预期结果 |
|------|------|----------|
| 1 | `npm run test -- PositionDashboard`（目录：`frontend/`） | 测试通过；`PositionDashboard` 套件 2 个用例均为 PASS，无警告或错误 |

### 3.2 类型检查 / Lint

| 步骤 | 命令 | 预期结果 |
|------|------|----------|
| 2 | `npm run typecheck` | TypeScript 无错误（0 issue） |
| 3 | `npm run lint` | ESLint 通过，无 BLOCKER 级别告警 |

### 3.3 手动验证

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 4 | 启动本地前端：`npm run dev`；浏览器访问 `http://localhost:3000/positions`（Mock 模式下无需登录） | 页面可加载“职位管理（Stage 0 Mock）”标题，无认证拦截或后端依赖错误 |
| 5 | 观察「岗位总数 / 编制容量 / 规划职位」统计卡片 | 数据与 `mockData.ts` 保持一致（4 岗位、容量 12 FTE 等） |
| 6 | 列表选择「保洁主管」行 | 右侧详情显示主管信息、编制 1/1、最近事件列表 |
| 7 | 输入筛选条件（如搜索“保洁”或筛选职类 `OPER`） | 列表与详情按筛选结果更新，筛选后可用编制数据同步变化 |
| 8 | 切换到 `Sidebar` → “职位管理” | 导航按钮高亮，侧边栏其它菜单不受影响，组织菜单可继续访问 |

证据收集：截图或录屏保存至 `test-results/positions-stage0/`（可选，但若出现差异必须提供）。  

---

## 4. 验收结论模板

完成测试后，请在本节补充表格记录：

| 日期 | 执行人 | 结果 | 备注 |
|------|--------|------|------|
| YYYY-MM-DD | （填写） | ✅ / ⚠️ / ❌ | （记录命令输出、截图等证据） |

若出现 ❌：需列明问题、影响范围、回滚/修复建议，并在 80 号计划对应章节登记。  

---

## 5. 后续推进建议

- Stage 0 验收通过后，方可进入 80 号计划 Stage 1（真实数据接入）。
- Stage 1 开始前需：  
  1. 输出《职位管理前端布局验收报告》（80 号计划待办）。  
  2. 根据本验收记录更新 `docs/development-plans/80-...` 中的进度表。  
- Stage 1 测试计划将补充 API 契约验证与集成测试，另行发布。  

---

> 本文档作为 80 号计划 Stage 0 的唯一测试验收依据，如需修改请先在 PR 中更新本文件并说明变更原因。
