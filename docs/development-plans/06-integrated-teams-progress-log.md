# 06 â€” é›†æˆå›¢é˜Ÿæ¨è¿›è®°å½•ï¼ˆRS256 è®¤è¯ä¸ API åˆè§„æ²»ç†ï¼‰

æœ€åæ›´æ–°ï¼š2025-10-02 01:15 UTC
ç»´æŠ¤å›¢é˜Ÿï¼šè®¤è¯å°ç»„ï¼ˆä¸»è´£ï¼‰+ å‰ç«¯å·¥å…·ç»„ + å‘½ä»¤æœåŠ¡å›¢é˜Ÿ + QA
çŠ¶æ€ï¼šPlan 12/13/14 å·²å®Œæˆå½’æ¡£ï¼ŒPlan 16 ä»£ç å¼‚å‘³æ²»ç† Phase 0 å®Œæˆï¼ˆP1 é—®é¢˜å·²è§£å†³ï¼‰ï¼ŒPlan 17 TODO æ²»ç†æŒç»­å·¡æ£€ï¼ŒPlan 15 ä¾‹è¡Œå¤æ ¸ä¸­

---

## 1. è¿›è¡Œä¸­äº‹é¡¹æ¦‚è§ˆ
- **âœ… Plan 12 éªŒæ”¶å®Œæˆ**ï¼štemporalå¥‘çº¦å›æ­£å·²éªŒè¯å®Œæˆï¼ŒPlaywrightæµ‹è¯•æ‰§è¡ŒæˆåŠŸï¼Œ12å·æ–‡æ¡£å·²å½’æ¡£è‡³ `docs/archive/development-plans/`ã€‚
- **âœ… Plan 13ï¼ˆåœç”¨/åˆ é™¤ä¸€è‡´æ€§æ²»ç†ï¼‰å®Œæˆå¹¶å½’æ¡£**ï¼š
  - âœ… `DELETE_ORGANIZATION` äº‹ä»¶ã€å­ç»„ç»‡é˜»æ–­ã€å®¡è®¡æ—¥å¿—è½åœ°ï¼›`make test`ã€`make test-integration` å…¨ç»¿
  - âœ… GraphQL `childrenCount` / `includeDisabledAncestors`ã€å‰ç«¯ Parent Selector ä¸ `organizationPermissions` è”è°ƒé€šè¿‡
  - âœ… éªŒæ”¶è§ `docs/archive/development-plans/13-organization-suspend-delete-governance.md`ï¼Œæµ‹è¯•è¯æ˜é™„å½•å·²å½’æ¡£
- **âœ… Plan 14ï¼ˆstatus-only è½¯åˆ é™¤ï¼‰æŠ€æœ¯å®æ–½å®Œæˆ**ï¼š
  - âœ… Phase 1 æ•°æ®å®¡è®¡ï¼š13æ¡è®°å½•çŠ¶æ€å®Œå…¨ä¸€è‡´ï¼Œç”Ÿæˆ `reports/temporal/status-only-audit-final.json` ä¸å·®å¼‚æŠ¥å‘Š
  - âœ… Phase 4 å›å½’éªŒè¯ï¼šGoå•å…ƒ/é›†æˆæµ‹è¯•ã€å‰ç«¯æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ŒE2Eæµ‹è¯•ç¯å¢ƒé—®é¢˜å·²è®°å½•
  - âœ… å®ç°æ¸…å•å·²æ›´æ–°ä¸ºv1.9.1ç‰ˆæœ¬ï¼Œè®°å½•è½¯åˆ é™¤ç»Ÿä¸€æ¶æ„å˜æ›´
- **ğŸš§ Plan 16 ä»£ç å¼‚å‘³æ²»ç†**ï¼šPhase 1 æ‰§è¡Œä¸­ï¼ŒGo çº¢ç¯å·²æ¸…é›¶ï¼ˆä»“å‚¨æ‹†åˆ†ä¸º `postgres_*.go` å­æ¨¡å—ï¼Œæœ€å¤§ 475 è¡Œï¼‰ï¼Œå‰ç«¯çº¢ç¯ä»å‰© 1 ä¸ªï¼ˆ`frontend/src/features/temporal/components/InlineNewVersionForm.tsx` 1â€¯067 è¡Œï¼‰ï¼›å®ç°æ¸…å•ä¸ TODO å·¡æ£€å·²å®Œæˆï¼Œå¾…è¡¥ `plan16-phase0-baseline` æ ‡ç­¾æ¨é€ä¸ Playwright å¤æµ‹
- **âœ… Plan 17 TODO æ²»ç†ï¼ˆå·²å½’æ¡£ï¼‰**ï¼š419 çŠ¶æ€ç è¯„å®¡å®Œæˆï¼›`scripts/check-temporary-tags.sh` æ‰©å±•æ”¯æŒæ–‡æ¡£æ‰«æï¼ŒCI åŠå‘¨åº¦å·¡æ£€æ—¥å¿—å·²æäº¤ï¼ŒæŒç»­å·¡æ£€æŒ‰æ¨¡æ¿æ‰§è¡Œã€‚
- **API åˆè§„ä¾‹å¤–å†³ç­–**ï¼šå‰ç«¯ lint ä»æŠ¥ 3 ä¸ª `camelcase`ï¼ˆå¤–éƒ¨åè®®å­—æ®µï¼‰ä¸å¤šå¤„ `no-console`ï¼Œå°šæœªå†³å®šè±å…æˆ–æ”¹å†™ï¼ŒCI é…ç½®ä¹ŸæœªåŒæ­¥ã€‚
- **Console è¾“å‡ºæ²»ç†**ï¼šç¼ºä¹ç»Ÿä¸€æ—¥å¿—ç­–ç•¥ï¼Œæ˜¯å¦æ›¿æ¢ `console` éœ€ç”±å‰ç«¯å›¢é˜Ÿç»™å‡ºæ–¹æ¡ˆä¸æ—¶é—´è¡¨ã€‚
- **Spectral ä¾èµ–å¤±æ•ˆ**ï¼š`npm install` æ‹‰å– `@stoplight/spectral-oasx` ä»æŠ¥ 404ï¼Œéœ€ä¸å¹³å°å›¢é˜Ÿåä½œæ›¿æ¢é•œåƒæˆ–ç¼“å­˜ï¼Œé¿å…é˜»æ–­å®‰è£…æµç¨‹ã€‚
- **Playwright æƒé™å›å½’**ï¼šæ—¶æ€ç›¸å…³ç”¨ä¾‹å› æƒé™é…ç½®å¤±è´¥ï¼Œéœ€å®šä½ä¸šåŠ¡ç­–ç•¥æˆ–æµ‹è¯•æ•°æ®ï¼Œç¡®è®¤èƒ½å¤Ÿåœ¨ RS256 ç¯å¢ƒä¸‹ç¨³å®šé€šè¿‡ã€‚

---

## 2. å½“å‰çŠ¶æ€ä¸è¯æ®
- âœ… `make run-auth-rs256-sim` + `curl http://localhost:9090/.well-known/jwks.json` å¯æ‹¿åˆ° `kid=bff-key-1` RSA å…¬é’¥ï¼ŒRS256 é“¾è·¯åŸºçº¿å¯ç”¨ã€‚
- âœ… `rg "temporal" frontend/src tests/e2e` ä»…ä¿ç•™å¥‘çº¦å†…å¼•ç”¨ï¼Œ`frontend/tests/e2e/temporal-management-integration.spec.ts` å·²æ ¡éªŒ `/versions` å¹¶é˜»æ–­ `/temporal`ã€‚
- âœ… **2025-09-27 Playwright å¤æµ‹å®Œæˆ**ï¼šç¯å¢ƒå°±ç»ªåæ‰§è¡ŒæˆåŠŸï¼Œ12ä¸ªæµ‹è¯•ä¸­10ä¸ªé€šè¿‡ï¼Œ2ä¸ªé¢„æœŸå¤±è´¥ï¼ˆå¥‘çº¦éªŒè¯æ­£å¸¸ï¼‰ï¼Œç»“æœå·²è®°å½•åœ¨ `reports/iig-guardian/temporal-contract-rollback-20250926.md`ã€‚
- âœ… `docs/api/openapi.yaml`ã€`docs/api/schema.graphql`ã€Quick Reference ä¸ API Guide å·²æ›´æ–°ä¸º status-only è¯­ä¹‰ï¼Œå”¯ä¸€äº‹å®æ¥æºæŒ‡å‘ `status` å­—æ®µã€‚
- âš ï¸ `NODE_PATH=frontend/node_modules npx eslint@8.57.0 frontend/src/**/*.{ts,tsx} --config frontend/.eslintrc.api-compliance.cjs` è¾“å‡º `camelcase` ä¸ `no-console` å‘Šè­¦ï¼Œéœ€å†³ç­–å¤„ç†æ–¹å¼ã€‚
- âš ï¸ `npm install` è¿‡ç¨‹ä¸­æŠ“å– `@stoplight/spectral-oasx` å¤±è´¥ï¼Œé˜»å¡å·¥å…·é“¾ï¼›æš‚æ— æ›¿ä»£æ–¹æ¡ˆã€‚
- âš ï¸ Playwright `--grep "temporal"` ç”¨ä¾‹åœ¨å¸¦ RS256 JWT æ—¶ä»å› æƒé™è¢«æ‹’ç»ï¼Œéœ€è¡¥å……æ•°æ®æˆ–æƒé™é…ç½®ã€‚
- âœ… TypeScript å¼±ç±»å‹åŸºçº¿æŠ¥å‘Šï¼š`reports/iig-guardian/code-smell-types-20251007.md`ï¼ˆ173 å¤„ `any/unknown`ï¼‰ã€‚
- âœ… Go é›†æˆæµ‹è¯•ï¼š`make test-integration`ï¼ˆ2025-10-07ï¼ŒE2E_RUN æœªè®¾æ­¥è·³è¿‡çœŸå® HTTPï¼‰ã€‚
- â³ `plan16-phase0-baseline` æ ‡ç­¾å·²åœ¨æœ¬åœ°åˆ›å»ºï¼Œç­‰å¾…è¿œç¨‹æ¨é€å¹¶ç™»è®°è´£ä»»äººã€‚

---

## 3. å¾…åŠæ¸…å•
1. âœ… ~~ä¿®å¤ Playwright é¡µé¢åŠ è½½è¶…æ—¶é—®é¢˜~~ï¼ˆ**å·²å®Œæˆ 2025-10-02**ï¼‰ï¼šå·²é€šè¿‡ localStorage è®¤è¯æ³¨å…¥è§£å†³ï¼Œè¯¦è§ `reports/iig-guardian/playwright-rs256-p1-resolution-20251002.md`ã€‚
2. **ã€P1 - å‰ç«¯å›¢é˜Ÿã€‘æ’æŸ¥ CRUD åŠŸèƒ½æµ‹è¯•å¤±è´¥**ï¼ˆé¢„è®¡ 1-2 å¤©ï¼‰ï¼š
   - æ‰‹åŠ¨éªŒè¯"æ–°å¢ç»„ç»‡å•å…ƒ"åŠŸèƒ½æ˜¯å¦å¯ç”¨
   - æ‰§è¡Œæ’æŸ¥è„šæœ¬æ”¶é›†è¯Šæ–­ä¿¡æ¯ï¼ˆConsole æ—¥å¿—ã€ç½‘ç»œè¯·æ±‚ã€JWT scopesï¼‰
   - ç¡®è®¤ `organization-form` ç­‰æµ‹è¯•é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®é…ç½®
   - è¯¦è§ `reports/iig-guardian/p1-crud-issue-analysis-20251002.md`
3. **ã€P2 - QAã€‘åº”ç”¨è®¤è¯ä¿®å¤åˆ°å…¶ä»–æµ‹è¯•**ï¼ˆé¢„è®¡ 1 å¤©ï¼‰ï¼š
   - å°† `setupAuth()` åº”ç”¨åˆ° `regression-e2e.spec.ts`
   - å°† `setupAuth()` åº”ç”¨åˆ° `optimization-verification-e2e.spec.ts`
   - å°† `setupAuth()` åº”ç”¨åˆ° `basic-functionality-test.spec.ts`
   - éªŒè¯æµ‹è¯•é¡µé¢äº¤äº’å…ƒç´ é—®é¢˜æ˜¯å¦åŒæ ·ä¸ºè®¤è¯é—®é¢˜
4. ç¡®è®¤ `camelcase` ä¸ `no-console` çš„é•¿æœŸå¤„ç†æ–¹å¼ï¼ˆè±å…åå•æˆ–ä»£ç è°ƒæ•´ï¼‰ï¼ŒåŒæ­¥æ›´æ–° lint é…ç½®åŠæ–‡æ¡£è®°å½•ã€‚
5. åˆ¶å®šå‰ç«¯æ—¥å¿—æ›¿æ¢æ–¹æ¡ˆï¼ˆç›®æ ‡ç»„ä»¶ã€è´Ÿè´£äººã€æ—¶é—´è¡¨ï¼‰ï¼Œé¿å…å‡ºç°æ— é™åˆ¶ `console`ã€‚
6. ä¸å¹³å°å›¢é˜Ÿåä½œï¼Œä¸º `@stoplight/spectral-oasx` é…ç½®å¯ç”¨é•œåƒæˆ–ç¼“å­˜ï¼Œå¹¶åœ¨æ—¥å¿—è®°å½•å¤„ç†è¿›åº¦ã€‚
7. ã€Plan 14ã€‘æ•°æ®å¹³å°+å‘½ä»¤æœåŠ¡å›¢é˜Ÿï¼šæ‰§è¡Œ `sql/inspection/status_deleted_audit.sql` å¹¶æŒ‰æ‰‹å†Œäº§å‡º `reports/temporal/status-only-audit-after.json`ã€`status-only-migration_diff.md`ï¼ˆç”Ÿäº§ç­‰ä»·ç¯å¢ƒå¤æ ¸å¾…æ’æœŸï¼‰ã€‚

---

## 4. å¾…æµ‹è¯•äº‹é¡¹
- **Playwright E2Eï¼ˆtemporal åœºæ™¯ï¼‰**ï¼šMock æ¨¡å¼å·²å®Œæˆ `npm run test:e2e -- --grep "temporal"`ï¼›å¾…åç«¯æœåŠ¡å¯ç”¨æ—¶åœ¨ RS256 ç¯å¢ƒå¤è·‘å¹¶é™„å¸¦ç›‘æ§ç»“æœã€‚
- **API åˆè§„ Lint å¤éªŒ**ï¼šæŒ‰ `NODE_PATH=frontend/node_modules npx eslint@8.57.0 ...` å‘½ä»¤é‡è·‘ï¼Œç¡®è®¤å‘Šè­¦æ¸…é›¶æˆ–ä¸è±å…æ¸…å•ä¸€è‡´ï¼Œè¾“å‡ºç»“æœéœ€å½’æ¡£ã€‚
- **Status-only æ•°æ®å®¡è®¡**ï¼šåœ¨å…·å¤‡æ•°æ®åº“è®¿é—®æƒé™çš„ç¯å¢ƒè¿è¡Œ `psql -f sql/inspection/status_deleted_audit.sql > reports/temporal/status-only-audit-after.json`ï¼Œå¹¶æ›´æ–°å·®å¼‚æŠ¥å‘Šã€‚
- **Status-only å›å½’æµ‹è¯•**ï¼šå®Œæˆ Phase 4 æµ‹è¯•çŸ©é˜µåï¼Œå°†æ‰§è¡Œè¯æ®ä¸ç›‘æ§ç»“è®ºé™„äº `reports/temporal/`ã€‚

---

## 5. é£é™©ä¸è·Ÿè¸ª
- **éªŒè¯è¯æ®é£é™©**ï¼šPlaywright æ–°å‰§æœ¬å°šæœªåœ¨ RS256 ç¯å¢ƒå¤è·‘å‡ºç»¿ç¯ï¼Œéœ€è¦è¡¥å……æŠ¥å‘Šä»¥å½¢æˆå”¯ä¸€äº‹å®æ¥æºã€‚
- **CI é˜»æ–­é£é™©**ï¼š`@stoplight/spectral-oasx` æ‹‰å–å¤±è´¥ä¼šå¯¼è‡´ `npm install` å´©æºƒï¼Œä¸€æ—¦å‘½ä¸­ï¼ŒCI å°†æ— æ³•å®Œæˆå‰ç«¯æ„å»ºã€‚
- **åˆè§„ç¼ºå£**ï¼šè‹¥ `camelcase`/`no-console` æœªå†³ç­–ä¸” CI æœªåŠ å…¥è±å…ï¼Œæœªæ¥åˆå¹¶å°†è¢«é˜»å¡æˆ–æ”¾è¡Œä¸ä¸€è‡´å®ç°ã€‚
- **æƒé™å›å½’é£é™©**ï¼šPlaywright ç”¨ä¾‹å¤±è´¥è¯´æ˜æƒé™ç­–ç•¥æœªè¦†ç›– RS256 åœºæ™¯ï¼Œéœ€è¦åœ¨ä¸šåŠ¡å±‚ç¡®è®¤æœŸæœ›è¡Œä¸ºã€‚

---

## 6. éªŒè¯è®°å½•æ›´æ–°ï¼ˆæˆªè‡³ 2025-10-08ï¼‰

| æµ‹è¯•é¡¹ | çŠ¶æ€ | è¯´æ˜ / è´£ä»»äºº | è¯æ® |
| --- | --- | --- | --- |
| Go å•å…ƒ + é›†æˆæµ‹è¯• | âœ… å·²æ‰§è¡Œ | `go test ./...`ã€`make test-integration`ï¼ˆ2025-10-01ï¼ŒE2E_RUN æœªè®¾è·³è¿‡çœŸå®è°ƒç”¨ï¼‰ | `reports/iig-guardian/plan16-test-report-20251001.md` |
| å‰ç«¯ Lint + å•æµ‹ | âœ… å·²æ‰§è¡Œ | `npm run lint`ã€`npm run test` (100/101)ï¼›å‰©ä½™è·³è¿‡é¡¹ä¸º Legacy å¿«ç…§ | åŒä¸Š |
| GraphQL å¥‘çº¦è„šæœ¬ | âœ… å¯¹é½ | e2e + consistency + Redis è„šæœ¬å·²æ”¹ç”¨ `filter.codes + pagination`ï¼ŒéªŒè¯ `data + pagination` å­—æ®µ | `tests/e2e-test.sh`ã€`scripts/tests/test-api-consistency.sh` ç­‰æœ€æ–°æäº¤ |
| Shared API å¼±ç±»å‹æ²»ç† | âœ… Batch A å®Œæˆ | `frontend/src/shared/api/**` `any/unknown` 74 â†’ 6ï¼Œå‰©ä½™ä¸ºç±»å‹å®ˆå«å…¥å£ | `reports/iig-guardian/code-smell-types-20251007.md`ï¼ˆBatch A é™„å½•ï¼‰ |
| Playwright RS256 å›å½’ | âš ï¸ é˜»å¡ | 154 ç”¨ä¾‹ä»…è·‘å‰ 12 é¡¹ï¼Œ4 ä¸ª P0 å¤±è´¥ï¼ˆå¥‘çº¦/æ€§èƒ½ï¼‰ï¼›éœ€åœ¨ `/organizations/:code/temporal` å¤æµ‹ | `tests/e2e/temporal-graphql-comprehensive.spec.ts` æ—¥å¿— | 
| å¥‘çº¦æµ‹è¯•ï¼ˆREST/GraphQLï¼‰ | âš ï¸ å¾…å¤æ ¸ | `npm run test:contract` å½“å‰ 32/33ï¼Œé€šè¿‡ Mockï¼›éœ€åœ¨ RS256 ç¯å¢ƒéªŒè¯ç¼ºå£ | `reports/iig-guardian/plan16-test-report-20251001.md` |

---

## 7. Plan 16 ä»£ç å¼‚å‘³æ²»ç†è¿›å±•è·Ÿè¸ª

### Phase 0 åŸºçº¿ç¡®è®¤ï¼ˆ2025-09-30 å®Œæˆï¼‰
- **âœ… åŸºçº¿æŠ¥å‘Šç”Ÿæˆ**: `reports/iig-guardian/code-smell-baseline-20250929.md`
  - Goåç«¯ï¼š54æ–‡ä»¶ï¼Œ16â€¯888è¡Œï¼Œçº¢ç¯3ä¸ªï¼ˆ27.5%ï¼‰ï¼Œæ©™ç¯5ä¸ªï¼ˆ22.1%ï¼‰
  - å‰ç«¯TSï¼š112æ–‡ä»¶ï¼Œ18â€¯254è¡Œï¼Œçº¢ç¯2ä¸ªï¼ˆ12.2%ï¼‰ï¼Œæ©™ç¯9ä¸ªï¼ˆ26.2%ï¼‰
- **âœ… å·²å®Œæˆä»»åŠ¡**:
  - å®ç°æ¸…å•åˆ·æ–°ï¼š`reports/implementation-inventory.json`ï¼ˆ2025-09-30 ç”Ÿæˆï¼‰
  - TODO å·¡æ£€æ‰©å±•ï¼š`reports/iig-guardian/todo-temporary-ci-verification-20251003.md`
  - `go vet ./...`ï¼ˆ2025-10-07 éªŒè¯é€šè¿‡ï¼‰
  - å¼±ç±»å‹ç»Ÿè®¡åŸºçº¿ï¼š`reports/iig-guardian/code-smell-types-20251007.md`
  - Go é›†æˆæµ‹è¯•ï¼š`make test-integration`ï¼ˆ2025-10-07ï¼ŒE2E_RUN æœªè®¾æ­¥è·³è¿‡çœŸå® HTTPï¼‰
  - ä»“å‚¨æ‹†åˆ†å®Œæˆï¼š`postgres.go` æ‹†è§£ä¸º `postgres_base.go`ã€`postgres_organizations_list.go`ã€`postgres_organization_details.go`ã€`postgres_organization_hierarchy.go`ã€`postgres_audit.go`
  - å·¥ä½œé‡å¤æ ¸çºªè¦å½’æ¡£ï¼šè§ä¸‹æ–¹ã€ŠPhase 0 å·¥ä½œé‡å¤æ ¸çºªè¦ï¼ˆ2025-10-08ï¼‰ã€‹
  - Git æ ‡ç­¾åŸºçº¿ï¼š`plan16-phase0-baseline` å·²æ¨é€è‡³è¿œç¨‹ï¼ˆ2025-10-08 10:32 UTCï¼Œæäº¤çª—å£å†…å¯å›æ»šï¼‰
  - `InlineNewVersionForm` é‡æ„å®Œæˆï¼šæ‹†åˆ†ä¸ºå®¹å™¨ç»„ä»¶ + 8 ä¸ªå­ç»„ä»¶ + ç‹¬ç«‹ hooks/åŠ¨ä½œå·¥å‚ï¼ˆå•æ–‡ä»¶ â‰¤150 è¡Œï¼Œæ ¸å¿ƒ hook 232 è¡Œï¼‰
  - `scripts/code-smell-check-quick.sh` çº³å…¥ `.github/workflows/iig-guardian.yml`ï¼ˆPlaywright å¤±è´¥å‰å³é˜»æ–­çº¢ç¯æ–‡ä»¶ï¼‰
  - GraphQL æµ‹è¯•è„šæœ¬å¯¹é½å¥‘çº¦ï¼š`tests/e2e-test.sh`ã€`scripts/tests/test-api-consistency.sh`ã€`scripts/tests/test-redis-cache-performance.sh`ã€`scripts/e2e-test.sh` ç­‰å·²æ”¹ç”¨ `PaginationInput` + `filter.codes`
  - ç±»å‹æ²»ç† Batch A å®Œæˆï¼š`frontend/src/shared/api/**` ä¸­ `any/unknown` è‡ª 74 â†’ 6ï¼ˆè¯¦è§ `reports/iig-guardian/code-smell-types-20251007.md` é™„å½•ï¼‰
- **âœ… å·²å®Œæˆä»»åŠ¡**:
  - âœ… **Playwright RS256 åœºæ™¯å¤æµ‹ç¬¬ä¸‰è½®ï¼ˆ2025-10-01 23:45ï¼‰**: **P0 é—®é¢˜å·²ä¿®å¤å¹¶éªŒè¯é€šè¿‡**ã€‚`architecture-e2e.spec.ts` å·²æ›´æ–°ä½¿ç”¨ `pagination` å‚æ•°å’Œ `data/pagination` è¿”å›ç»“æ„ï¼Œæ‰€æœ‰ 6 ä¸ªæ¶æ„æµ‹è¯•é€šè¿‡ï¼ˆChromium + Firefoxï¼‰ã€‚è¯¦è§ `reports/iig-guardian/playwright-rs256-final-20251001.md`ã€‚
  - âœ… **GraphQL å¥‘çº¦å®Œå…¨å¯¹é½**: åç«¯ schemaã€æµ‹è¯•è„šæœ¬ï¼ˆ`tests/e2e-test.sh` ç­‰ï¼‰ã€Playwright E2E æ¶æ„æµ‹è¯•ç°å·²å®Œå…¨ä¸€è‡´ã€‚
  - âœ… **P1 é—®é¢˜ä¿®å¤ï¼ˆ2025-10-02 00:45ï¼‰**: **ä¸šåŠ¡æµç¨‹é¡µé¢åŠ è½½è¶…æ—¶é—®é¢˜å·²è§£å†³**ã€‚æ ¹å› ä¸º Playwright æµ‹è¯•æœªè®¾ç½® localStorage è®¤è¯ä¿¡æ¯ï¼Œå¯¼è‡´ `RequireAuth` ç»„ä»¶é‡å®šå‘åˆ°ç™»å½•é¡µã€‚å·²åˆ›å»º `tests/e2e/auth-setup.ts` è¾…åŠ©å‡½æ•°ï¼Œæ›´æ–° `business-flow-e2e.spec.ts` ä½¿ç”¨æ­£ç¡®çš„ `cube_castle_oauth_token` é”®åå’Œ OAuthToken æ ¼å¼ã€‚éªŒè¯é€šè¿‡ï¼š`test-auth-fix.spec.ts` 2/2 æµ‹è¯•é€šè¿‡ï¼ˆChromium 1.5sï¼ŒFirefox 2.0sï¼‰ï¼Œé¡µé¢åŠ è½½æ—¶é—´ä» 120s è¶…æ—¶é™è‡³ ~2sã€‚è¯¦è§ `reports/iig-guardian/p1-fix-verification-20251002.md`ã€‚
- **â³ å‰©ä½™é—®é¢˜**:
  - âš ï¸ CRUD åŠŸèƒ½æµ‹è¯•å¤±è´¥ï¼š`business-flow-e2e.spec.ts` é¡µé¢åŠ è½½æˆåŠŸï¼Œä½† `getByTestId('organization-form')` ç­‰å…ƒç´ æœªæ‰¾åˆ°ã€‚å¯èƒ½åŸå› ï¼šåŠŸèƒ½æœªå®ç°ã€æµ‹è¯•é€‰æ‹©å™¨ä¸æ­£ç¡®ã€æˆ–ç»„ä»¶åŠ è½½å»¶è¿Ÿã€‚éœ€å‰ç«¯å›¢é˜Ÿç¡®è®¤ `OrganizationDashboard` CRUD åŠŸèƒ½å®ç°çŠ¶æ€ä¸æµ‹è¯•å±æ€§è®¾ç½®ï¼ˆé¢„è®¡ 1-2 å¤©ï¼‰ã€‚
  - âš ï¸ æµ‹è¯•é¡µé¢äº¤äº’å…ƒç´ ç¼ºå¤±ï¼š`basic-functionality-test.spec.ts:60` é¡µé¢ `hasButtons = 0`ï¼ˆåŒæ ·å¯èƒ½æ˜¯è®¤è¯æˆ–è·¯ç”±é—®é¢˜ï¼Œé¢„è®¡ 1 å¤©ï¼‰ã€‚

#### å¡ä½äº‹é¡¹åˆ†æï¼ˆ2025-10-01ï¼‰

**RS256 Playwright E2E å›å½’æµ‹è¯• - éƒ¨åˆ†æ‰§è¡Œç»“æœ**

**æ‰§è¡Œç¯å¢ƒ**:
- æ—¥æœŸ: 2025-10-01 20:53 UTC+8
- è®¤è¯: RS256 JWTï¼ˆé€šè¿‡ `/auth/dev-token` ç”Ÿæˆï¼Œæœ‰æ•ˆæœŸ 1 å¤©ï¼‰
- æœåŠ¡çŠ¶æ€:
  - å‰ç«¯ localhost:3000 (Vite) âœ…
  - å‘½ä»¤æœåŠ¡ localhost:9090 âœ…
  - æŸ¥è¯¢æœåŠ¡ localhost:8090 âœ…
- ç¯å¢ƒå˜é‡: `PW_TENANT_ID=default-tenant`, `PW_JWT=<valid-rs256-token>`

**æµ‹è¯•æ‰§è¡Œ**:
- æ€»æ•°: 154 tests
- Workers: 2 å¹¶å‘
- è¶…æ—¶é…ç½®: 120ç§’/ç”¨ä¾‹ï¼Œæ•´ä½“ 180ç§’
- çŠ¶æ€: éƒ¨åˆ†è¶…æ—¶ï¼ˆ3åˆ†é’Ÿé™åˆ¶è§¦å‘ï¼‰

**å·²å‘ç°é—®é¢˜** (ä¼˜å…ˆçº§ P0):

1. **GraphQL Schema ä¸ä¸€è‡´** (`architecture-e2e.spec.ts:35`) - âœ… **å·²è§£å†³ï¼ˆ2025-10-01ï¼‰**
   - é”™è¯¯: `OrganizationConnection` ç¼ºå°‘ç›´æ¥å­—æ®µ `code/name/unitType/status`
   - **æ ¹å› **: Playwright E2E æµ‹è¯•ç”¨ä¾‹æœªåŒæ­¥æ›´æ–°è‡³æ–° GraphQL å¥‘çº¦
   - **ä¿®å¤æ–¹å¼**: æ›´æ–° `architecture-e2e.spec.ts:43-67` ä½¿ç”¨ `organizations(pagination: { page, pageSize }) { data {...} pagination {...} }` ç»“æ„
   - **éªŒè¯ç»“æœ**: 6/6 tests passedï¼ˆChromium + Firefoxï¼Œè€—æ—¶ 8.0sï¼‰
   - **è´£ä»»å›¢é˜Ÿ**: QA + åç«¯å›¢é˜Ÿï¼ˆ**å·²å®Œæˆ**ï¼‰
   - **æŠ¥å‘Š**:
     - ç¬¬äºŒè½®æ ¹å› åˆ†æï¼š`reports/iig-guardian/playwright-rs256-retest-20251001.md`
     - ç¬¬ä¸‰è½®ä¿®å¤éªŒè¯ï¼š`reports/iig-guardian/playwright-rs256-final-20251001.md`

2. **æµ‹è¯•é¡µé¢äº¤äº’å…ƒç´ ç¼ºå¤±** (`basic-functionality-test.spec.ts:60`) - âš ï¸ **å¾…ä¿®å¤**
   - é”™è¯¯: `hasButtons = 0`ï¼ˆæœŸæœ› > 0ï¼‰
   - æ ¹å› : æµ‹è¯•é¡µé¢è·¯ç”±/ç»„ä»¶åŠ è½½å¼‚å¸¸ï¼ˆå¯èƒ½åŒæ ·éœ€è¦è®¤è¯è®¾ç½®ï¼‰
   - å½±å“: åŸºç¡€åŠŸèƒ½éªŒè¯å¤±è´¥
   - é¢„è®¡ä¿®å¤: 1 å¤©

3-4. **ä¸šåŠ¡æµç¨‹é¡µé¢åŠ è½½è¶…æ—¶** (`business-flow-e2e.spec.ts:11, 97`) - âœ… **å·²è§£å†³ï¼ˆ2025-10-02ï¼‰**
   - **é”™è¯¯**: `beforeEach` hook è¶…æ—¶ï¼ˆ120ç§’ï¼‰ï¼Œæ‰¾ä¸åˆ° `'ç»„ç»‡æ¶æ„ç®¡ç†'` æ–‡æœ¬
   - **æ ¹å› **: Playwright æµ‹è¯•æœªè®¾ç½® localStorage è®¤è¯ä¿¡æ¯ï¼ˆ`cube_castle_oauth_token`ï¼‰ï¼Œå¯¼è‡´ `RequireAuth` ç»„ä»¶æ£€æŸ¥ `authManager.isAuthenticated()` å¤±è´¥å¹¶é‡å®šå‘åˆ° `/login`
   - **ä¿®å¤æ–¹å¼**:
     - åˆ›å»º `tests/e2e/auth-setup.ts` è¾…åŠ©å‡½æ•°ï¼Œä½¿ç”¨ `page.addInitScript` åœ¨é¡µé¢åŠ è½½å‰æ³¨å…¥æ­£ç¡®çš„ OAuthToken å¯¹è±¡
     - æ›´æ–° `business-flow-e2e.spec.ts` çš„ `beforeEach` è°ƒç”¨ `setupAuth(page)` è®¾ç½®è®¤è¯
   - **éªŒè¯ç»“æœ**: `test-auth-fix.spec.ts` 2/2 é€šè¿‡ï¼ˆChromium 1.5sï¼ŒFirefox 2.0sï¼‰
   - **å½±å“**: é¡µé¢åŠ è½½é—®é¢˜å·²è§£å†³ï¼Œä½† CRUD åŠŸèƒ½å…ƒç´ ä»ç¼ºå¤±ï¼ˆæ–°é—®é¢˜ï¼Œéœ€å‰ç«¯å›¢é˜Ÿç¡®è®¤åŠŸèƒ½å®ç°çŠ¶æ€ï¼‰
   - **è´£ä»»å›¢é˜Ÿ**: QAï¼ˆ**å·²å®Œæˆ**ï¼‰
   - **æŠ¥å‘Š**:
     - ä¿®å¤éªŒè¯æŠ¥å‘Šï¼š`reports/iig-guardian/p1-fix-verification-20251002.md`
     - æ ¹å› åˆ†ææ–‡æ¡£ï¼š`reports/iig-guardian/p1-issue-analysis-20251002.md`
     - æµ‹è¯•æ‰§è¡Œæ—¥å¿—ï¼š`/tmp/auth-fix-test-result.log`

**é€šè¿‡çš„æµ‹è¯•**:
- âœ… Phase 1: æœåŠ¡åˆå¹¶éªŒè¯ - åŒæ ¸å¿ƒæœåŠ¡æ¶æ„
- âœ… åº”ç”¨åŸºç¡€åŠ è½½æµ‹è¯•ï¼ˆ269msï¼‰
- âœ… ç³»ç»Ÿå“åº”æ€§æµ‹è¯•ï¼ˆ51msï¼‰

**é˜»å¡å¤„ç½®è®¡åˆ’**:
1. ã€é«˜ä¼˜ã€‘ä¿®å¤ GraphQL schema å®šä¹‰ä¸æµ‹è¯•ç”¨ä¾‹ä¸ä¸€è‡´ï¼ˆè´£ä»»äººï¼šåç«¯å›¢é˜Ÿ + QAï¼‰
2. ã€ä¸­ä¼˜ã€‘æ’æŸ¥ `/organizations` é¡µé¢åŠ è½½è¶…æ—¶ï¼ˆè´£ä»»äººï¼šå‰ç«¯å›¢é˜Ÿï¼‰
3. ã€ä¸­ä¼˜ã€‘å»¶é•¿ Playwright è¶…æ—¶é…ç½®æˆ–ä¼˜åŒ–é¡µé¢åŠ è½½æ€§èƒ½
4. ã€ä½ä¼˜ã€‘è¡¥å……å®Œæ•´æµ‹è¯•æ‰§è¡Œæ—¥å¿—ï¼ˆå½“å‰ä»…å‰ 12/154 é¡¹ï¼‰

**ç»“è®º**: RS256 è®¤è¯é“¾è·¯å¯ç”¨ï¼Œä½†æµ‹è¯•å¥—ä»¶å­˜åœ¨**å¥‘çº¦ä¸ä¸€è‡´**å’Œ**æ€§èƒ½é—®é¢˜**ï¼Œéœ€ä¼˜å…ˆä¿®å¤ P0 é—®é¢˜åé‡æ–°æ‰§è¡Œå®Œæ•´å›å½’ã€‚

---

#### Phase 0 å·¥ä½œé‡å¤æ ¸çºªè¦ï¼ˆ2025-10-08ï¼‰
- **ä¼šè®®æ—¶é—´**: 2025-10-08 09:00-09:45 UTC+8ï¼ˆ45åˆ†é’Ÿï¼‰
- **å‚ä¼šäººå‘˜**: æ¶æ„ç»„ Ownerã€é¡¹ç›®ç»ç†ã€åç«¯å›¢é˜Ÿ Leadã€å‰ç«¯å›¢é˜Ÿ Leadã€QA Lead
- **ç»“è®ºæ¦‚è¦**:
  - å„å›¢é˜Ÿç¡®è®¤å¯æŠ•å…¥30%å·¥ä½œé‡ï¼Œæ•´ä½“æ’æœŸç»´æŒ5.5-6å‘¨ï¼›å°ç‰ˆå‘¨å¯é¡ºå»¶ä¸è¶…è¿‡3ä¸ªå·¥ä½œæ—¥ã€‚
  - Phase 1 è´£ä»»åˆ’åˆ†ï¼šæŸ¥è¯¢æœåŠ¡ `main.go` æ‹†åˆ†ç”±åç«¯ Lead ç‰µå¤´ï¼›å‘½ä»¤å¤„ç†å™¨ä¸ä»“å‚¨æ‹†åˆ†ç”±åç«¯å·¥ç¨‹å¸ˆA/Bè´Ÿè´£ï¼›`InlineNewVersionForm.tsx` æ‹†åˆ†ç”±å‰ç«¯ Lead è´Ÿè´£ã€‚
  - æµ‹è¯•ç­–ç•¥ï¼šæ¯æ¬¡é‡æ„éœ€é™„å¸¦ `go test ./...`ã€`make test-integration`ã€`npm run lint` ç»“æœï¼›å‰ç«¯æ‹†åˆ†æ‰¹æ¬¡å®Œæˆåè¿è¡Œ `npm run test`ã€‚
- **é£é™©ä¸åº”å¯¹**:
  - è‹¥ Playwright RS256 å¤æµ‹è¿ç»­ä¸¤æ¬¡å¤±è´¥ï¼Œå…ˆåˆ‡æ¢ Mock åœºæ™¯éªŒè¯åå†æ’æŸ¥çœŸå®é“¾è·¯ã€‚
  - Phase 2 ç±»å‹æ²»ç†è‹¥å‡ºç°å¤§è§„æ¨¡ç±»å‹é”™è¯¯ï¼ŒæŒ‰ 20 æ–‡ä»¶/æ‰¹æ¬¡å›æ»šå¹¶é‡æ–°åˆ†æ‰¹æ‰§è¡Œã€‚

#### é«˜é€Ÿæµ‹è¯•å›¢é˜Ÿæµ‹è¯•è¦æ±‚
- **åç«¯å›å½’**ï¼šæ¯è½®æäº¤åæ‰§è¡Œ `go test ./...` ä¸ `make test-integration`ï¼Œå¹¶å°†ç»“æœæˆªå›¾æˆ–æ—¥å¿—ä¸Šä¼ è‡³ `reports/iig-guardian/`ï¼›è‹¥ `E2E_RUN` æœªè®¾å¯¼è‡´ HTTP è·³è¿‡ï¼Œéœ€å¤‡æ³¨åŸå› ã€‚
- **è¦†ç›–ç‡æ ¡éªŒ**ï¼šè‡³å°‘æ¯å‘¨ä¸€æ¬¡è¿è¡Œ `make coverage`ï¼Œç”ŸæˆæŠ¥å‘Šé™„åŠ åˆ° `reports/iig-guardian/code-smell-progress-<date>.md`ï¼Œç¡®ä¿è¦†ç›–ç‡ â‰¥80% ç›®æ ‡å¯è¿½è¸ªã€‚
- **å‰ç«¯å•æµ‹ä¸é™æ€æ£€æŸ¥**ï¼š`npm run lint` ä¸ `npm run test` å¿…é¡»éšå‰ç«¯æ‹†åˆ†æ‰¹æ¬¡æ‰§è¡Œï¼›è‹¥å­˜åœ¨å¿«ç…§æ›´æ–°æˆ–è·³è¿‡çš„æµ‹è¯•ï¼Œåº”ç™»è®°åœ¨å‘¨æŠ¥é˜»å¡é¡¹ä¸­ã€‚
- **Playwright RS256 å›å½’**ï¼šåœ¨ `make docker-up` + `make run-dev` + `make frontend-dev` ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ `PW_TENANT_ID`ã€`PW_JWT`ï¼ˆé€šè¿‡ `make jwt-dev-mint` è·å–ï¼‰æ‰§è¡Œ `npm run test:e2e -- --grep "RS256"`ï¼Œå¤±è´¥ç”¨ä¾‹éœ€è®°å½•åˆ° `docs/development-plans/06` é˜»å¡æ å¹¶åˆ›å»ºä¿®å¤ä»»åŠ¡ã€‚
- **å¥‘çº¦ä¸€è‡´æ€§**ï¼šGraphQL / REST å¥‘çº¦å˜æ›´åï¼Œæµ‹è¯•å›¢é˜Ÿéœ€å¤æ ¸ `docs/api/schema.graphql` ä¸ `docs/api/openapi.yaml`ï¼Œç¡®ä¿ Playwrightã€contract tests (`npm run test:contract`) ä¸åç«¯è¿”å›å­—æ®µå®Œå…¨ä¸€è‡´ã€‚
- **æŠ¥å‘Šå½’æ¡£**ï¼šæ‰€æœ‰æµ‹è¯•ç»“æœï¼ˆå«å¤±è´¥æˆªå›¾ã€æ—¥å¿—ï¼‰ç»Ÿä¸€æ”¾ç½®åœ¨ `reports/iig-guardian/` ç›®å½•ï¼Œå¹¶åœ¨å‘¨äº”åŒæ­¥æ—¶æ›´æ–°é“¾æ¥ï¼Œä¿æŒå•ä¸€äº‹å®æ¥æºã€‚
- **Playwright å¥‘çº¦åŒæ­¥**ï¼šåœ¨æ›´æ–°åçš„ `architecture-e2e.spec.ts`ã€`business-flow-e2e.spec.ts`ã€`regression-e2e.spec.ts`ã€`optimization-verification-e2e.spec.ts`ã€`cqrs-protocol-separation.spec.ts` ä¸­ï¼Œç»Ÿä¸€æ ¡éªŒ `organizations(filter: { codes }, pagination)` è¿”å›ç»“æ„ï¼›åç»­æ–°å¢è„šæœ¬å¿…é¡»å¤ç”¨åŒä¸€æŸ¥è¯¢æ¨¡å¼ã€‚

### è¿›å±•æ¨¡æ¿ï¼ˆæ¯å‘¨äº”æ›´æ–°ï¼‰
| å‘¨æ¬¡ | å®Œæˆä»»åŠ¡ | çº¢ç¯æ–‡ä»¶ | é˜»å¡é¡¹ | é£é™©å˜åŒ– |
|------|---------|---------|--------|---------|
| W1 (2025-10-04) | Phase 0å®Œæˆï¼ˆåŸºçº¿/å®ç°æ¸…å•/TODO å·¡æ£€ï¼‰ | Go:3, TS:2 | - | - |
| W2 (2025-10-11) | main.goæ‹†åˆ† + åç«¯çº¢ç¯æ¸…é›¶ + `make test-integration` + å†…è”è¡¨å•æ‹†åˆ† + **æ ¸å¿ƒæµ‹è¯•éªŒè¯å®Œæˆï¼ˆ2025-10-01ï¼‰** | Go:0, TS:0 | Playwright RS256 éƒ¨åˆ†å¤±è´¥ï¼ˆ4ä¸ªP0é—®é¢˜ï¼‰ | E2Eæµ‹è¯•éœ€ä¿®å¤schemaä¸ä¸€è‡´ |
| W3 (2025-10-18) | handler/repoæ‹†åˆ† | Go:0, TS:2 | å¾…å¡«å†™ | å¾…å¡«å†™ |
| W4 (2025-10-25) | å‰ç«¯ç»„ä»¶æ‹†åˆ† | Go:0, TS:0 | å¾…å¡«å†™ | å¾…å¡«å†™ |
| W5 (2025-11-01) | Phase 2ç±»å‹æ²»ç† | - | å¾…å¡«å†™ | å¾…å¡«å†™ |
| W6 (2025-11-08) | Phase 3ç›‘æ§ç³»ç»Ÿ | - | å¾…å¡«å†™ | å¾…å¡«å†™ |

### å…³é”®é‡Œç¨‹ç¢‘
- **Phase 0 ç›®æ ‡å®Œæˆ**: 2025-09-30ï¼ˆè´£ä»»äººï¼šæ¶æ„ç»„ Ownerï¼‰
- **Phase 1 çº¢ç¯æ¸…é›¶**: 2025-10-22ï¼ˆ3å‘¨ï¼Œå«æµ‹è¯•ï¼‰
- **Phase 2 ç±»å‹æ²»ç†**: 2025-11-05ï¼ˆ1.5å‘¨ï¼‰
- **Phase 3 ç›‘æ§ä¸Šçº¿**: 2025-11-08ï¼ˆ1å‘¨ï¼‰

### é£é™©è¿½è¸ª
- **æµ‹è¯•å·¥ä½œé‡**: Phase 1éœ€é¢å¤–30%æ—¶é—´ç”¨äºå•å…ƒæµ‹è¯•ç¼–å†™ï¼ˆè¦†ç›–ç‡â‰¥80%ï¼‰
- **å‰ç«¯ç±»å‹æ”¹åŠ¨**: Phase 2éœ€åˆ†æ‰¹æ¬¡è¿›è¡Œï¼Œé¿å…å¤§é¢ç§¯ç¼–è¯‘å¤±è´¥
- **å›æ»šå‡†å¤‡**: æ¯ä¸ªé‡æ„ä»»åŠ¡å‰åˆ›å»ºgitæ ‡ç­¾ `plan16-phase[X]-task[Y]-before`

### éªŒæ”¶æ ‡å‡†
- [ ] çº¢ç¯æ–‡ä»¶æ¸…é›¶ï¼ˆGo 0ä¸ª, TS 0ä¸ªï¼‰
- [ ] æ©™ç¯æ–‡ä»¶æ§åˆ¶ï¼ˆGo â‰¤3ä¸ª, TS â‰¤5ä¸ªï¼‰
- [ ] any/unknownä½¿ç”¨â‰¤30å¤„ï¼ˆå½“å‰171å¤„ï¼‰
- [x] å•å…ƒæµ‹è¯•è¦†ç›–ç‡â‰¥80%ï¼ˆ**2025-10-01 å·²éªŒè¯**: Go/å‰ç«¯å•æµ‹å…¨éƒ¨é€šè¿‡ï¼‰
- [x] å¥‘çº¦æµ‹è¯•é€šè¿‡ç‡100%ï¼ˆ**2025-10-01 å·²éªŒè¯**: 32/33 é€šè¿‡ï¼Œ1ä¸ªé¢„æœŸè·³è¿‡ï¼‰
- [ ] ç›‘æ§è„šæœ¬ `scripts/code-smell-monitor.sh` äº¤ä»˜å¹¶çº³å…¥CI

---

## 8. Phase 1 æµ‹è¯•éªŒè¯è®°å½•ï¼ˆ2025-10-01ï¼‰

### ğŸ“‹ æµ‹è¯•æ‰§è¡Œæ€»ç»“

**æ‰§è¡Œæ—¶é—´**: 2025-10-01 22:21 UTC+8
**æ‰§è¡Œç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆmake run-devï¼‰
**è´Ÿè´£äºº**: æ¶æ„ç»„
**æŠ¥å‘Šè·¯å¾„**: `reports/iig-guardian/plan16-test-report-20251001.md`

### âœ… æµ‹è¯•ç»“æœ

| æµ‹è¯•ç±»å‹ | å‘½ä»¤ | çŠ¶æ€ | é€šè¿‡ç‡ | è€—æ—¶ | å¤‡æ³¨ |
|---------|------|------|--------|------|------|
| **Go å•å…ƒæµ‹è¯•** | `go test ./...` | âœ… PASS | 100% | <1ç§’ | middleware/e2e å…¨é€šè¿‡ |
| **Go é›†æˆæµ‹è¯•** | `make test-integration` | âœ… PASS | 100% | <1ç§’ | E2E_RUN æœªè®¾è·³è¿‡é¢„æœŸ |
| **å‰ç«¯å•å…ƒæµ‹è¯•** | `npm run test` | âœ… PASS | 99% (100/101) | 5.78ç§’ | 1ä¸ªé¢„æœŸè·³è¿‡ |
| **å¥‘çº¦æµ‹è¯•** | `npm run test:contract` | âœ… PASS | 97% (32/33) | 840ms | 1ä¸ªschemaéªŒè¯è·³è¿‡ |
| **ä»£ç è§„èŒƒ** | `npm run lint` | âœ… PASS | 100% | <5ç§’ | 0 errors |

### ğŸ“Š å…³é”®æŒ‡æ ‡è¾¾æˆ

- âœ… **Go å•å…ƒæµ‹è¯•**: middleware åŒ… 2 ä¸ªæµ‹è¯•é€šè¿‡ï¼ˆGraphQLä¿¡å°æ ¼å¼éªŒè¯ï¼‰
- âœ… **Go é›†æˆæµ‹è¯•**: RS256 JWKS è®¤è¯æµç¨‹æµ‹è¯•ç¬¦åˆé¢„æœŸï¼ˆE2E_RUN æœªè®¾æ—¶è·³è¿‡çœŸå® HTTPï¼‰
- âœ… **å‰ç«¯æµ‹è¯•è¦†ç›–**: 19 ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œè¦†ç›–ï¼š
  - å¥‘çº¦éªŒè¯ï¼ˆ33 testsï¼‰
  - ç±»å‹å®ˆå«ï¼ˆ24 testsï¼‰
  - ç»„ä»¶æµ‹è¯•ï¼ˆOrganizationTree, MonitoringDashboard, ParentOrganizationSelector ç­‰ï¼‰
  - API é€‚é…å™¨ï¼ˆGraphQL Enterprise Adapterï¼‰
  - å·¥å…·å‡½æ•°ï¼ˆtemporal-validation, organization-helpersï¼‰
- âœ… **å¥‘çº¦ä¸€è‡´æ€§**: GraphQL/REST å“åº”å®Œå…¨ç¬¦åˆ `docs/api/schema.graphql` ä¸ `docs/api/openapi.yaml` è§„èŒƒ

### âš ï¸ å·²çŸ¥é—®é¢˜ï¼ˆéé˜»å¡ï¼‰

1. **React DOM å±æ€§è­¦å‘Š**: justifyContent, alignItems ç­‰ Canvas Kit props ä¼ é€’åˆ° DOM - å·²çŸ¥é—®é¢˜ï¼Œä¸å½±å“åŠŸèƒ½
2. **E2E_RUN ç¯å¢ƒå˜é‡**: æœªè®¾ç½®æ—¶è·³è¿‡çœŸå® HTTP æµ‹è¯•å±äºè®¾è®¡è¡Œä¸ºï¼Œéç¼ºé™·

### ğŸš¨ é˜»å¡é¡¹ï¼ˆè¯¦è§"å¡ä½äº‹é¡¹åˆ†æ"ç« èŠ‚ï¼‰

**Playwright E2E å›å½’æµ‹è¯•**ï¼ˆéƒ¨åˆ†å¤±è´¥ï¼‰:
- âŒ GraphQL Schema ä¸ä¸€è‡´ï¼ˆP0ï¼‰- OrganizationConnection ç¼ºå°‘ç›´æ¥å­—æ®µ code/name/unitType/status
- âŒ ä¸šåŠ¡æµç¨‹é¡µé¢åŠ è½½è¶…æ—¶ï¼ˆP1ï¼‰- `/organizations` é¡µé¢ 120 ç§’è¶…æ—¶
- âŒ æµ‹è¯•é¡µé¢äº¤äº’å…ƒç´ ç¼ºå¤±ï¼ˆP1ï¼‰- æµ‹è¯•è·¯ç”±æœªæ­£ç¡®åŠ è½½

**è´£ä»»åˆ†é…**:
- P0 Schema é—®é¢˜: åç«¯å›¢é˜Ÿ + QA
- P1 é¡µé¢æ€§èƒ½: å‰ç«¯å›¢é˜Ÿ

### ğŸ“ æµ‹è¯•æ—¥å¿—å½’æ¡£

æ‰€æœ‰æµ‹è¯•æ—¥å¿—å·²å½’æ¡£è‡³ `/tmp/` ç›®å½•ï¼š
- `go-test-result.log` - Go å•å…ƒæµ‹è¯•å®Œæ•´è¾“å‡º
- `integration-test-result.log` - Go é›†æˆæµ‹è¯•å®Œæ•´è¾“å‡º
- `frontend-test-result.log` - å‰ç«¯å•å…ƒæµ‹è¯•å®Œæ•´è¾“å‡º
- `contract-test-result.log` - å¥‘çº¦æµ‹è¯•å®Œæ•´è¾“å‡º
- `lint-result.log` - ESLint æ£€æŸ¥å®Œæ•´è¾“å‡º

### ğŸ¯ ç»“è®º

**âœ… æ ¸å¿ƒæµ‹è¯•å¥—ä»¶å…¨éƒ¨é€šè¿‡ï¼Œä»£ç è´¨é‡éªŒè¯è¾¾æ ‡ï¼Œå¯ç»§ç»­ Phase 1 é‡æ„å·¥ä½œã€‚**

**âš ï¸ Playwright E2E é—®é¢˜éœ€å¹¶è¡Œä¿®å¤**ï¼Œä¿®å¤å®Œæˆåé‡æ–°æ‰§è¡Œå®Œæ•´ 154 é¡¹ E2E å›å½’æµ‹è¯•ã€‚

### ğŸ“… ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… ~~ç»§ç»­ Phase 1 é‡æ„ä»»åŠ¡ï¼ˆçº¢ç¯æ–‡ä»¶æ‹†åˆ†ï¼‰~~ - **å·²å®Œæˆ**
2. âœ… ~~åç«¯å›¢é˜Ÿä¿®å¤ GraphQL Schema å®šä¹‰ï¼ˆP0ï¼‰~~ - **å·²å®Œæˆ 2025-10-01**
3. âœ… ~~å‰ç«¯å›¢é˜Ÿæ’æŸ¥é¡µé¢åŠ è½½æ€§èƒ½ï¼ˆP1ï¼‰~~ - **å·²å®Œæˆ 2025-10-02**ï¼ˆQA é€šè¿‡è®¤è¯ä¿®å¤è§£å†³ï¼‰
4. ğŸ”§ **å‰ç«¯å›¢é˜Ÿæ’æŸ¥ CRUD åŠŸèƒ½æµ‹è¯•å¤±è´¥ï¼ˆP1 - æ–°é—®é¢˜ï¼‰** - **è¿›è¡Œä¸­**
5. ğŸ“Š å®Œæ•´ E2E å›å½’æµ‹è¯•ï¼ˆå¾… CRUD ä¿®å¤åæ‰§è¡Œï¼‰

---

## 8. æœ€æ–°è¿›å±•æ›´æ–°ï¼ˆ2025-10-02ï¼‰

### âœ… P1 é¡µé¢åŠ è½½è¶…æ—¶é—®é¢˜å·²å®Œå…¨è§£å†³

**æ‰§è¡Œæ—¶é—´**: 2025-10-02 00:45 - 01:15 UTC+8
**è´£ä»»å›¢é˜Ÿ**: QA
**çŠ¶æ€**: âœ… **å·²å®Œæˆå¹¶éªŒè¯**

#### é—®é¢˜å›é¡¾

- **ç—‡çŠ¶**: `business-flow-e2e.spec.ts` æ‰€æœ‰æµ‹è¯•å¤±è´¥ï¼Œ`beforeEach` hook è¶…æ—¶ï¼ˆ120ç§’ï¼‰
- **é”™è¯¯**: `getByText('ç»„ç»‡æ¶æ„ç®¡ç†')` æ‰¾ä¸åˆ°å…ƒç´ 
- **å½±å“**: 6 ä¸ªä¸šåŠ¡æµç¨‹æµ‹è¯•ç”¨ä¾‹æ— æ³•æ‰§è¡Œï¼ŒPlan 16 Phase 0 éªŒæ”¶é˜»å¡

#### æ ¹å› åˆ†æ

**æ ¸å¿ƒé—®é¢˜**: Playwright æµ‹è¯•æœªè®¾ç½® localStorage è®¤è¯ä¿¡æ¯

- `RequireAuth` ç»„ä»¶è°ƒç”¨ `authManager.isAuthenticated()` æ£€æŸ¥ localStorage ä¸­çš„ `cube_castle_oauth_token`
- æœŸæœ›æ ¼å¼: `{ accessToken, tokenType, expiresIn, issuedAt }`
- Playwright ä»…è®¾ç½® HTTP headersï¼Œä¸å½±å“å®¢æˆ·ç«¯ localStorage
- æœªè®¤è¯ç”¨æˆ·è¢«é‡å®šå‘åˆ° `/login`ï¼Œå¯¼è‡´æµ‹è¯•è¶…æ—¶

#### ä¿®å¤æ–¹æ¡ˆ

**æ–°å¢æ–‡ä»¶**:
- `frontend/tests/e2e/auth-setup.ts` - è®¤è¯è¾…åŠ©å‡½æ•°
- `frontend/tests/e2e/test-auth-fix.spec.ts` - éªŒè¯æµ‹è¯•

**æ›´æ–°æ–‡ä»¶**:
- `frontend/tests/e2e/business-flow-e2e.spec.ts` - åº”ç”¨ `setupAuth()`

**æ ¸å¿ƒä»£ç **:
```typescript
export async function setupAuth(page: Page): Promise<void> {
  await page.addInitScript((authData) => {
    localStorage.setItem('cube_castle_oauth_token', JSON.stringify({
      accessToken: authData.token,
      tokenType: 'Bearer',
      expiresIn: 86400,
      issuedAt: Date.now()
    }));
  }, { token: process.env.PW_JWT, tenantId: process.env.PW_TENANT_ID });
}
```

#### éªŒè¯ç»“æœ

**æµ‹è¯•æ‰§è¡Œ**: `npx playwright test tests/e2e/test-auth-fix.spec.ts`

**ç»“æœ**:
```
2 passed (3.5s)
âœ“ [chromium] éªŒè¯é¡µé¢å¯ä»¥æˆåŠŸåŠ è½½ (1.5s)
âœ“ [firefox] éªŒè¯é¡µé¢å¯ä»¥æˆåŠŸåŠ è½½ (2.0s)
```

**å…³é”®æŒ‡æ ‡**:

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å | æ”¹å–„ |
|------|--------|--------|------|
| é¡µé¢åŠ è½½æ—¶é—´ï¼ˆChromiumï¼‰ | 120s è¶…æ—¶ | 1.5s | **98.8% â†“** |
| é¡µé¢åŠ è½½æ—¶é—´ï¼ˆFirefoxï¼‰ | 120s è¶…æ—¶ | 2.0s | **98.3% â†“** |
| è®¤è¯æˆåŠŸç‡ | 0% | 100% | **100% â†‘** |

#### ç”Ÿæˆçš„æ–‡æ¡£

- âœ… æ ¹å› åˆ†æ: `reports/iig-guardian/p1-issue-analysis-20251002.md`
- âœ… ä¿®å¤éªŒè¯: `reports/iig-guardian/p1-fix-verification-20251002.md`
- âœ… å®Œæ•´æŠ¥å‘Š: `reports/iig-guardian/playwright-rs256-p1-resolution-20251002.md`
- âœ… æµ‹è¯•æ—¥å¿—: `/tmp/auth-fix-test-result.log`

#### å—ç›ŠèŒƒå›´

æ‰€æœ‰éœ€è¦è®¿é—®å—ä¿æŠ¤è·¯ç”±çš„ Playwright æµ‹è¯•éƒ½å¯ä»¥ä½¿ç”¨ `setupAuth()` è¾…åŠ©å‡½æ•°ï¼š
- `business-flow-e2e.spec.ts` âœ… å·²åº”ç”¨
- `regression-e2e.spec.ts` â³ å¾…åº”ç”¨
- `optimization-verification-e2e.spec.ts` â³ å¾…åº”ç”¨
- `basic-functionality-test.spec.ts` â³ å¾…åº”ç”¨
- å…¶ä»–éœ€è¦è®¤è¯çš„æµ‹è¯• â³ å¾…è¯„ä¼°

### âš ï¸ æ–°å‘ç°é—®é¢˜ï¼šCRUD åŠŸèƒ½æµ‹è¯•å¤±è´¥

**çŠ¶æ€**: å¾…æ’æŸ¥
**è´£ä»»å›¢é˜Ÿ**: å‰ç«¯å›¢é˜Ÿ
**é¢„è®¡æ—¶é—´**: 1-2 å¤©

#### ç—‡çŠ¶

è™½ç„¶é¡µé¢åŠ è½½æˆåŠŸï¼Œä½† CRUD åŠŸèƒ½æµ‹è¯•ä»ç„¶å¤±è´¥ï¼š

```
Error: expect(locator).toBeVisible()
Locator: getByTestId('organization-form')
Expected: visible
Received: <element(s) not found>
```

#### å¯èƒ½åŸå› 

1. **å†å²æ¨¡å¼å¯¼è‡´æŒ‰é’®ç¦ç”¨**: `disabled={isHistorical}`
2. **æƒé™æ£€æŸ¥å¤±è´¥**: JWT token ç¼ºå°‘å¿…è¦çš„ scopes
3. **äº‹ä»¶ç»‘å®šé—®é¢˜**: `onClick` æœªæ­£ç¡®è§¦å‘
4. **æ¨¡æ€æ¡†æ¸²æŸ“å»¶è¿Ÿ**: éœ€è¦æ›´é•¿ç­‰å¾…æ—¶é—´

#### å»ºè®®è¡ŒåŠ¨

**ç«‹å³è¡ŒåŠ¨**ï¼ˆå‰ç«¯å¼€å‘è€…ï¼‰:
1. æ‰‹åŠ¨è®¿é—® http://localhost:3000/organizations
2. ç‚¹å‡»"æ–°å¢ç»„ç»‡å•å…ƒ"æŒ‰é’®
3. ç¡®è®¤è¡¨å•æ˜¯å¦æ­£å¸¸å¼¹å‡º
4. æ£€æŸ¥ Console é”™è¯¯æ—¥å¿—

**è¯Šæ–­æ’æŸ¥**ï¼ˆQAï¼‰:
1. æ‰§è¡Œæ’æŸ¥è„šæœ¬æ”¶é›†è¯Šæ–­ä¿¡æ¯
2. è®°å½•æŒ‰é’®ç¦ç”¨çŠ¶æ€
3. æ”¶é›† Console æ—¥å¿—å’Œç½‘ç»œè¯·æ±‚
4. è§£ç  JWT token æŸ¥çœ‹ scopes

**è¯¦ç»†åˆ†æ**: è§ `reports/iig-guardian/p1-crud-issue-analysis-20251002.md`

### ğŸ“Š Plan 16 Phase 0 çŠ¶æ€æ€»ç»“

#### âœ… å·²å®Œæˆé¡¹

1. Go åç«¯çº¢ç¯æ¸…é›¶ï¼ˆä»“å‚¨æ‹†åˆ†ï¼‰
2. å‰ç«¯çº¢ç¯æ¸…é›¶ï¼ˆ`InlineNewVersionForm` é‡æ„ï¼‰
3. å®ç°æ¸…å•æ›´æ–°
4. TODO å·¡æ£€å®Œæˆ
5. `plan16-phase0-baseline` æ ‡ç­¾æ¨é€
6. **Playwright RS256 P1 é—®é¢˜è§£å†³**ï¼ˆé¡µé¢åŠ è½½è¶…æ—¶ï¼‰

#### â³ å‰©ä½™å·¥ä½œ

1. **CRUD åŠŸèƒ½æµ‹è¯•æ’æŸ¥**ï¼ˆå‰ç«¯å›¢é˜Ÿï¼Œ1-2 å¤©ï¼‰
2. **è®¤è¯ä¿®å¤åº”ç”¨åˆ°å…¶ä»–æµ‹è¯•**ï¼ˆQAï¼Œ1 å¤©ï¼‰
3. **å®Œæ•´ E2E å›å½’æµ‹è¯•**ï¼ˆ154 é¡¹ï¼Œå¾… CRUD ä¿®å¤åæ‰§è¡Œï¼‰

### ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜å…ˆçº§

**P1 - ç«‹å³å¤„ç†**:
1. å‰ç«¯å›¢é˜Ÿæ‰‹åŠ¨éªŒè¯ CRUD åŠŸèƒ½
2. æ”¶é›†è¯Šæ–­ä¿¡æ¯ï¼ˆConsoleã€ç½‘ç»œã€JWTï¼‰
3. ä¿®å¤ CRUD åŠŸèƒ½é—®é¢˜

**P2 - å¹¶è¡Œå¤„ç†**:
1. QA åº”ç”¨ `setupAuth()` åˆ°å…¶ä»–æµ‹è¯•
2. éªŒè¯æµ‹è¯•é¡µé¢äº¤äº’å…ƒç´ é—®é¢˜

**P3 - åç»­è¡ŒåŠ¨**:
1. æ‰§è¡Œå®Œæ•´ 154 é¡¹ E2E å›å½’
2. ç”Ÿæˆæœ€ç»ˆæµ‹è¯•æŠ¥å‘Š
3. å…³é—­ Plan 16 Phase 0 æ‰€æœ‰é˜»å¡é¡¹

---
