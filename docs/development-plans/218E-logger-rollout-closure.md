# Plan 218E - 结构化日志迁移收尾与桥接器清理

**母计划**: Plan 218
**子计划编号**: 218E
**时间窗口**: Week 3 Day 7
**责任团队**: 平台 / DevExp

---

## 1. 前置条件
- Plan 218A ~ 218D 均完成且通过回归。
- 项目代码中 `rg "\*log.Logger"` 仅剩历史文档或已标记的兼容层。

---

## 2. 目标
1. 清理 `pkg/logger.NewStdLogger` 的生产代码使用（视情况保留测试/工具场景）。
2. 再次全局扫描，确保无 `log.Printf`/`log.Println` 残留。
3. 更新 Plan 218 主文档、`docs/reference/01-DEVELOPER-QUICK-REFERENCE.md` 的日志章节。
4. 输出迁移总结（风险、字段规范、后续维护指引）。

---

## 3. 实施步骤
1. 运行 `rg "NewStdLogger"`，确认仅在保留点使用；若仍在生产代码中，替换为结构化注入。
2. 扫描并清理 `log.`、`fmt.Println` 等遗留日志输出。
3. 更新文档：
   - Plan 218 主文档增加“迁移完成”章节
   - Reference 文档新增字段规范 / 调试方法
4. 全量执行 `go test ./...`，并在必要时运行 `make lint`、`make security`。
5. 提交最终总结（可另建 REPORT 文档或更新执行日志）。

---

## 4. 验收标准
- [ ] 代码仓库（非测试环境）无 `*log.Logger`、`log.Printf` 等遗留。
- [ ] 桥接器仅保留在测试/工具场景，否则移除。
- [ ] 文档已更新，明确日志字段规范与使用方式。
- [ ] 全量测试与核心工具链通过。

---

## 5. 风险与缓解
| 风险 | 说明 | 缓解 |
|------|------|------|
| 仍有遗留模块未迁移 | 高 | 回溯 218A~D，补充遗漏模块后再收尾 |
| 桥接器仍在使用但无替代方案 | 中 | 标记 TODO / Plan 218E follow-up，或在文档中注明原因 |
| 文档未同步导致误用 | 中 | 在 Reference 文档中提供示例与约束，强调 LOG_LEVEL 行为 |

---

## 6. 交付物
- 文档更新（Plan 218、Reference）
- 迁移总结（可选：在执行日志或 CHANGELOG 中记录）
- 清理后的代码与测试结果

---

**说明**：218E 作为收尾子计划，仅在前四个子计划完成后执行；如发现新模块或外部依赖仍使用标准库日志，可追加 218F 进行专项治理。
