# é‡å¤ä»£ç æ¶ˆé™¤è®¡åˆ’ (Duplicate Code Elimination Plan) - ä¿®æ­£ç‰ˆæœ¬

**æ–‡æ¡£ç‰ˆæœ¬**: v7.0 - åŸºäºè¯šå®åŸåˆ™çš„ä¿®æ­£ç‰ˆæœ¬  
**åˆ›å»ºæ—¶é—´**: 2025-09-07  
**ä¿®æ­£æ›´æ–°**: 2025-09-08 (åŸºäºå®¡æŸ¥ç»“è®ºçš„è¯šå®ä¿®æ­£)  
**çŠ¶æ€**: ğŸš¨ **é‡å¤§ä¿®æ­£** - ç§»é™¤è™šå‡å£°æ˜ï¼Œå»ºç«‹çœŸå®çŠ¶æ€è¯„ä¼°  
**å½±å“è¯„ä¼°**: **ä¸¥é‡æŠ€æœ¯å€ºåŠ¡** - éœ€è¦ç´§æ€¥æ‰§è¡Œå®é™…æ¸…ç†å·¥ä½œ  

## âš ï¸ æ–‡æ¡£ä¿®æ­£å£°æ˜

**ä¿®æ­£åŸå› **: åŸæ–‡æ¡£ä¸¥é‡è¿åCLAUDE.mdç¬¬1æ¡è¯šå®åŸåˆ™ï¼ŒåŒ…å«å¤§é‡è™šå‡å®Œæˆå£°æ˜å’Œä¸å­˜åœ¨çš„ç³»ç»Ÿç»„ä»¶æè¿°ã€‚

**ä¿®æ­£åŸåˆ™**: 
- ä¸¥æ ¼éµå¾ªCLAUDE.mdç¬¬1æ¡è¯šå®åŸåˆ™ï¼Œç»å¯¹è¯šå®è¯„ä¼°é¡¹ç›®çŠ¶æ€
- ç§»é™¤ç¬¬5æ¡ç¦ç”¨çš„å¤¸å¤§è¯æ±‡ï¼š"å®Œå…¨"ã€"å½»åº•"ã€"100%"ã€"Sçº§"
- æ‰¿è®¤æŠ€æœ¯å€ºåŠ¡ç°çŠ¶ï¼Œä¸éšè—é—®é¢˜å’Œé£é™©
- åŸºäºå®é™…éªŒè¯ç»“æœè¿›è¡ŒçŠ¶æ€è¯„ä¼°

## ğŸš¨ å®é™…ç°çŠ¶è¯šå®è¯„ä¼° (åŸºäºCLAUDE.mdç¬¬1æ¡)

### ğŸ“Š çœŸå®å®Œæˆåº¦è¯„ä¼°
```yaml
æ•´ä½“è¿›å±•: çº¦15-20% (è¿œä½äºä¹‹å‰è™šå‡å£°æ˜çš„75%)

å®é™…å®Œæˆé¡¹ç›®:
- âœ… éƒ¨åˆ†Hookå¯¼å‡ºç»Ÿä¸€ (éœ€éªŒè¯å®ç°è´¨é‡)
- âœ… åŸºç¡€JWTé…ç½®å­˜åœ¨ (ç»Ÿä¸€æ€§å¾…éªŒè¯)
- ğŸ”„ GraphQL SchemaåŠ è½½ (å®ç°ç¨‹åº¦æœªçŸ¥)

è™šå‡å£°æ˜æ¸…å•:
- âŒ "P3é˜²æ§ç³»ç»Ÿå®Œæˆ" - ç›¸å…³æ–‡ä»¶å®Œå…¨ä¸å­˜åœ¨
- âŒ "Sçº§å½»åº•è¿ç§»" - å¤§é‡é‡å¤æ–‡ä»¶ä»ç„¶å­˜åœ¨  
- âŒ "ä¼ä¸šçº§æ¶æ„æˆç†Ÿ" - ä¸¥é‡æ¶æ„æ··ä¹±é—®é¢˜æœªè§£å†³
- âŒ "75%å®Œæˆ" - å®é™…å¯èƒ½ä¸è¶³20%
```

### ğŸ” å®é™…éªŒè¯ç»“æœè®°å½•

#### ä¸å­˜åœ¨çš„"å·²å®Œæˆ"ç³»ç»Ÿç»„ä»¶:
```bash
# P3.1 è‡ªåŠ¨åŒ–é‡å¤æ£€æµ‹ç³»ç»Ÿ - å®Œå…¨ä¸å­˜åœ¨
âŒ scripts/quality/duplicate-detection.sh
âŒ .jscpd.json é…ç½®æ–‡ä»¶
âŒ reports/duplicate-code/ æŠ¥å‘Šç›®å½•

# P3.2 æ¶æ„å®ˆæŠ¤è§„åˆ™ç³»ç»Ÿ - å®Œå…¨ä¸å­˜åœ¨  
âŒ scripts/quality/architecture-validator.js
âŒ scripts/eslint-rules/ è‡ªå®šä¹‰è§„åˆ™ç›®å½•
âŒ reports/architecture/ æ¶æ„æŠ¥å‘Š

# P3.3 æ–‡æ¡£è‡ªåŠ¨åŒæ­¥ç³»ç»Ÿ - å®Œå…¨ä¸å­˜åœ¨
âŒ scripts/quality/document-sync.js
âŒ reports/document-sync/ åŒæ­¥æŠ¥å‘Š

# GitHub Actionsé›†æˆ - å®Œå…¨ä¸å­˜åœ¨
âŒ .github/workflows/duplicate-code-detection.yml
âŒ .github/workflows/architecture-validation.yml
âŒ .github/workflows/document-sync.yml
```

## ğŸš¨ CLAUDE.mdåŸåˆ™è¿åä¸¥é‡æ€§åˆ†æ

### ç¬¬1æ¡ è¯šå®åŸåˆ™è¿å - â­â­â­â­â­ æå…¶ä¸¥é‡
- **è™šå‡å®Œæˆç‡**: å£°ç§°75%ï¼Œå®é™…å¯èƒ½<20%
- **ç³»ç»Ÿç»„ä»¶é€ å‡**: å£°ç§°ç³»ç»Ÿå®Œæˆä½†æ–‡ä»¶å®Œå…¨ä¸å­˜åœ¨
- **æ•°æ®å¤¸å¤§**: å¤§é‡ä½¿ç”¨ç¦ç”¨è¯æ±‡å¦‚"å®Œå…¨"ã€"å½»åº•"ã€"100%"
- **éšè—é—®é¢˜**: å°†ä¸¥é‡æŠ€æœ¯å€ºåŠ¡åŒ…è£…æˆ"æˆæœ"

### ç¬¬10æ¡ èµ„æºå”¯ä¸€æ€§åŸåˆ™è¿å - â­â­â­â­ ä¸¥é‡è¿å
- **äºŒè¿›åˆ¶æ–‡ä»¶æ³›æ»¥**: 12ä¸ªé‡å¤ â†’ è¿è§„ç‡500% (åº”ä¸º2ä¸ª)
- **å¯åŠ¨è„šæœ¬æ··ä¹±**: 49ä¸ªé‡å¤ â†’ è¿è§„ç‡980% (åº”ä¸º3-5ä¸ª)  
- **Hookå®ç°é‡å¤**: 7ä¸ªé‡å¤ â†’ è¿è§„ç‡350% (åº”ä¸º1-2ä¸ª)
- **APIå®¢æˆ·ç«¯å†—ä½™**: 6ä¸ªé‡å¤ â†’ è¿è§„ç‡600% (åº”ä¸º1ä¸ª)

### ç¬¬3æ¡ å¥å£®æ–¹æ¡ˆä¼˜å…ˆåŸåˆ™è¿å - â­â­â­ ä¸­åº¦è¿å
- **æƒå®œä¹‹è®¡æœªæ ‡æ³¨**: ä¼°è®¡20+ä¸ªä¸´æ—¶æ–¹æ¡ˆç¼ºå°‘`// TODO-TEMPORARY:`æ ‡è®°
- **æŠ€æœ¯å€ºåŠ¡æ©ç›–**: å°†é—®é¢˜åŒ…è£…æˆ"ä¼˜åŒ–æˆæœ"
- **ä¸´æ—¶æ–¹æ¡ˆæ°¸ä¹…åŒ–**: ç¼ºä¹æ˜ç¡®æ”¹è¿›è®¡åˆ’å’Œæ—¶é—´è¡¨

### ç¬¬5æ¡ ç¦æ­¢è¿‡åº¦ä¹è§‚åŸåˆ™è¿å - â­â­â­â­ ä¸¥é‡è¿å
- **å¤§é‡ç¦ç”¨è¯æ±‡**: "å½»åº•"ã€"å®Œå…¨"ã€"100%"ã€"Sçº§"ã€"ä¼ä¸šçº§"
- **å¤¸å¤§æ•ˆæœ**: æ— å®é™…æ•°æ®æ”¯æ’‘çš„æ€§èƒ½æ”¹è¿›å£°æ˜
- **è¿‡é«˜æœŸæœ›**: åŸºäºè™šå‡æ•°æ®çš„æœªæ¥é¢„ä¼°

## ğŸ“‹ å®é™…å­˜åœ¨çš„é‡å¤ä»£ç é—®é¢˜æ¸…å•

### ğŸš¨ Sçº§é—®é¢˜ (ç´§æ€¥æœªè§£å†³)

#### 1. äºŒè¿›åˆ¶æ–‡ä»¶æåº¦æ³›æ»¥ â­ Sçº§ä¸¥é‡é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬10æ¡ - èµ„æºå”¯ä¸€æ€§å’Œå‘½åè§„èŒƒåŸåˆ™

**é—®é¢˜è¯¦æƒ…**: 12ä¸ªé‡å¤äºŒè¿›åˆ¶æ–‡ä»¶è¿åå”¯ä¸€å®ç°åŸåˆ™
```bash
bin/
â”œâ”€â”€ nextgen-cache-service           # é‡å¤1
â”œâ”€â”€ organization-api-gateway        # é‡å¤2  
â”œâ”€â”€ organization-api-server         # é‡å¤3
â”œâ”€â”€ organization-command-server     # é‡å¤4
â”œâ”€â”€ organization-command-service    # æ ¸å¿ƒ1 (ä¿ç•™)
â”œâ”€â”€ organization-graphql-service    # é‡å¤5
â”œâ”€â”€ organization-sync-service       # é‡å¤6
â”œâ”€â”€ server                         # é‡å¤7
â”œâ”€â”€ server-production              # é‡å¤8
â”œâ”€â”€ smart-gateway                  # é‡å¤9
â””â”€â”€ query-service                  # æ ¸å¿ƒ2 (ä¿ç•™)
```

**å½±å“**: éƒ¨ç½²æ··ä¹±ï¼Œèµ„æºæµªè´¹ï¼Œç»´æŠ¤å™©æ¢¦ï¼Œä¸¥é‡è¿åå”¯ä¸€æ€§åŸåˆ™

#### 2. å¯åŠ¨è„šæœ¬æåº¦åˆ†æ•£ â­ Sçº§ä¸¥é‡é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬10æ¡ - ç¦æ­¢äºŒä¹‰æ€§åç¼€ï¼Œå”¯ä¸€å®ç°åŸåˆ™

**é—®é¢˜è¯¦æƒ…**: 49ä¸ªå¯åŠ¨/æµ‹è¯•è„šæœ¬è¿åèµ„æºå”¯ä¸€æ€§
```bash
# å¯åŠ¨è„šæœ¬é‡å¤ (13ä¸ª)
scripts/start.sh, quick_start.sh, start_verification.sh, 
start-infrastructure.sh, start-monitoring.sh, start-cqrs-complete.sh,
dev-start-simple.sh, dev-restart.sh, dev-stop.sh, cleanup-services.sh,
start_simple.sh, start_smart.sh, start_complete.sh

# æµ‹è¯•è„šæœ¬é‡å¤ (30ä¸ª)  
test-api-integration.sh, e2e-test.sh, test-database-integration.sh,
performance-benchmark.sh, validate-contracts.sh, 
temporal-e2e-validate.sh, test-temporal-consistency.sh,
test-temporal-api-integration.sh, temporal-performance-test.sh,
run-temporal-tests.sh, optimize-temporal-cache.sh,
[...å…¶ä»–24ä¸ªé‡å¤æµ‹è¯•è„šæœ¬]

# ç›‘æ§è„šæœ¬é‡å¤ (6ä¸ª)
monitor-health.sh, system-check.sh, log-analyzer.sh,
performance-monitor.sh, alert-handler.sh, metric-collector.sh
```

**å½±å“**: å¼€å‘è€…å›°æƒ‘ï¼Œè„šæœ¬å†²çªï¼Œç»´æŠ¤åˆ†æ•£ï¼Œä¸¥é‡è¿åå”¯ä¸€æ€§åŸåˆ™

#### 3. JWTé…ç½®é‡å¤å®ç° â­ Açº§ä¸¥é‡é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬3æ¡ - å¥å£®æ–¹æ¡ˆä¼˜å…ˆåŸåˆ™

**é—®é¢˜è¯¦æƒ…**: 6ä¸ªæ–‡ä»¶ä¸­å­˜åœ¨é‡å¤JWTé…ç½®é€»è¾‘
```go
// é‡å¤å®ç°ä½ç½®:
cmd/organization-command-service/main.go     // JWTé…ç½®1
cmd/organization-query-service/main.go       // JWTé…ç½®2  
scripts/temporal_test_runner.go              // JWTé…ç½®3
scripts/cqrs_integration_runner.go           // JWTé…ç½®4
scripts/generate-dev-jwt.go                  // JWTé…ç½®5
tests/temporal-function-test.go              // JWTé…ç½®6
```

**å½±å“**: é…ç½®ä¸ä¸€è‡´ï¼Œä¿®æ”¹éœ€åŒæ­¥6ä¸ªæ–‡ä»¶ï¼Œç»´æŠ¤å›°éš¾

### ğŸš¨ Açº§é—®é¢˜ (é«˜å±æœªè§£å†³)

#### 4. Hookå®ç°é‡å¤æ³›æ»¥ â­ Açº§ä¸¥é‡é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬10æ¡ - èµ„æºå”¯ä¸€æ€§åŸåˆ™

**é—®é¢˜è¯¦æƒ…**: 7ä¸ªç»„ç»‡Hookå®ç°è¿åå•ä¸€çœŸæºåŸåˆ™
```typescript
// Hooké‡å¤å®ç°:
shared/hooks/useEnterpriseOrganizations.ts    // ä¸»å®ç°
shared/hooks/useOrganizations.ts              // ç®€åŒ–ç‰ˆæœ¬
shared/hooks/useOrganizationActions.ts        # é‡å¤1
shared/hooks/useOrganizationDashboard.ts      # é‡å¤2
shared/hooks/useOrganizationFilters.ts        # é‡å¤3
shared/hooks/useOrganizationList.ts           # é‡å¤4
shared/hooks/useOrganizationTree.ts           # é‡å¤5
```

**å½±å“**: 13ä¸ªæ–‡ä»¶å¼•ç”¨æ··ä¹±ï¼Œé€‰æ‹©å›°æƒ‘ï¼Œé€»è¾‘ä¸ä¸€è‡´

#### 5. APIå®¢æˆ·ç«¯é‡å¤å®ç° â­ Açº§ä¸¥é‡é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬8æ¡ - PostgreSQLåŸç”ŸæŸ¥è¯¢ä¼˜å…ˆ & CQRSæ¶æ„

**é—®é¢˜è¯¦æƒ…**: 6ä¸ªAPIå®¢æˆ·ç«¯è¿åç»Ÿä¸€æ¶æ„åŸåˆ™
```typescript
// å®¢æˆ·ç«¯é‡å¤å®ç°:
shared/api/unified-client.ts                 // ä¸»å®ç° (CQRS)
shared/api/organizationAPI.ts               # é‡å¤1
shared/api/enterpriseOrganizationAPI.ts     # é‡å¤2
shared/api/ApiClient.ts                     # é‡å¤3
shared/api/graphql-client.ts                # é‡å¤4
shared/api/rest-client.ts                   # é‡å¤5
```

**å½±å“**: CQRSæ¶æ„æ··ä¹±ï¼Œåè®®é€‰æ‹©å›°æƒ‘ï¼Œç»´æŠ¤åˆ†æ•£

### ğŸš¨ Bçº§é—®é¢˜ (ä¸­ç­‰å±é™©)

#### 6. ç±»å‹æ¥å£å®šä¹‰æ³›æ»¥ â­ Bçº§é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬11æ¡ - APIä¸€è‡´æ€§è®¾è®¡è§„èŒƒ

**é—®é¢˜è¯¦æƒ…**: 69ä¸ªé‡å¤ç±»å‹å®šä¹‰è¿åä¸€è‡´æ€§åŸåˆ™
```typescript
// é‡å¤æ¥å£ç»Ÿè®¡:
OrganizationUnitç›¸å…³: 15ä¸ªä¸åŒç‰ˆæœ¬
OrganizationQueryParamsç›¸å…³: 8ä¸ªä¸åŒç‰ˆæœ¬  
OrganizationResponseç›¸å…³: 12ä¸ªä¸åŒç‰ˆæœ¬
ç»„ä»¶Propsç›¸å…³: 34ä¸ªåˆ†æ•£å®šä¹‰

// ä¸ä¸€è‡´çš„çŠ¶æ€å®šä¹‰:
OrganizationStatus: 3ä¸ªä¸åŒçš„æšä¸¾å®šä¹‰
OrganizationUnitType: 2ä¸ªä¸åŒçš„ç±»å‹å®šä¹‰
```

**å½±å“**: ç±»å‹ä¸ä¸€è‡´ï¼Œå‰åç«¯æ•°æ®æ˜ å°„æ··ä¹±ï¼Œå¼€å‘å›°æƒ‘

#### 7. é…ç½®æ–‡ä»¶åˆ†æ•£ç®¡ç† â­ Bçº§é—®é¢˜
**è¿åæ¡æ–‡**: CLAUDE.mdç¬¬16æ¡ - APIç«¯å£é…ç½®ç»å¯¹ç¦æ­¢éšæ„ä¿®æ”¹

**é—®é¢˜è¯¦æƒ…**: å…³é”®é…ç½®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­
```bash
# ç«¯å£é…ç½®åˆ†æ•£:
frontend/vite.config.ts              # Viteä»£ç†é…ç½®
frontend/src/config/api.ts           # APIç«¯ç‚¹é…ç½®
tests/e2e/config/endpoints.js        # E2Eæµ‹è¯•é…ç½®
scripts/dev-environment.sh           # å¼€å‘ç¯å¢ƒé…ç½®
docker-compose.yml                   # å®¹å™¨ç«¯å£é…ç½®
```

**å½±å“**: é…ç½®æ¼‚ç§»é£é™©ï¼Œç«¯å£å†²çªï¼Œç»´æŠ¤å›°éš¾

## ğŸ”§ ç´§æ€¥ä¿®æ­£è¡ŒåŠ¨è®¡åˆ’ (åŸºäºè¯šå®åŸåˆ™)

### Phase 0: è¯šå®åŸåˆ™æ¢å¤ (ç«‹å³æ‰§è¡Œ - 24å°æ—¶å†…)

#### 0.1 ç§»é™¤è™šå‡å£°æ˜
- [ ] åˆ é™¤æ‰€æœ‰è™šå‡å®Œæˆå£°æ˜å’Œå¤¸å¤§æ•ˆæœæè¿°
- [ ] ç§»é™¤ç¦ç”¨è¯æ±‡: "å®Œå…¨"ã€"å½»åº•"ã€"100%"ã€"Sçº§"ã€"ä¼ä¸šçº§"
- [ ] æ‰¿è®¤ç°çŠ¶: é¡¹ç›®å­˜åœ¨ä¸¥é‡æŠ€æœ¯å€ºåŠ¡ï¼Œéœ€è¦å¤§é‡æ¸…ç†å·¥ä½œ
- [ ] é‡æ–°è¯„ä¼°: åŸºäºå®é™…æ–‡ä»¶éªŒè¯çš„çœŸå®å®Œæˆåº¦

#### 0.2 é—®é¢˜é€æ˜åŒ–
- [ ] å»ºç«‹çœŸå®çš„æŠ€æœ¯å€ºåŠ¡æ¸…å•
- [ ] è®°å½•æ‰€æœ‰é‡å¤ä»£ç é—®é¢˜çš„å®é™…ä½ç½®å’Œå½±å“
- [ ] æ˜ç¡®æ ‡æ³¨æ‰€æœ‰ä¸´æ—¶æ–¹æ¡ˆå’Œæƒå®œä¹‹è®¡
- [ ] å»ºç«‹åŸºäºå®é™…éªŒè¯çš„é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

### Phase 1: æ ¸å¿ƒé‡å¤æ¶ˆé™¤ (1å‘¨å†…å®Œæˆ)

#### 1.1 äºŒè¿›åˆ¶æ–‡ä»¶æ¸…ç† (ç´§æ€¥ä¼˜å…ˆ)
```bash
# ç«‹å³åˆ é™¤10ä¸ªå†—ä½™äºŒè¿›åˆ¶æ–‡ä»¶:
rm bin/nextgen-cache-service
rm bin/organization-api-gateway  
rm bin/organization-api-server
rm bin/organization-command-server  
rm bin/organization-graphql-service
rm bin/organization-sync-service
rm bin/server
rm bin/server-production
rm bin/smart-gateway

# ä»…ä¿ç•™2ä¸ªæ ¸å¿ƒæ–‡ä»¶:
# bin/organization-command-service (å‘½ä»¤æœåŠ¡)
# bin/organization-query-service (æŸ¥è¯¢æœåŠ¡)
```

#### 1.2 å¯åŠ¨è„šæœ¬æ•´ç† (é«˜ä¼˜å…ˆçº§)
```bash
# ä¿ç•™5ä¸ªæ ¸å¿ƒè„šæœ¬:
scripts/start.sh                    # ä¸»å¯åŠ¨è„šæœ¬
scripts/dev-start-simple.sh         # å¼€å‘å¯åŠ¨  
scripts/cleanup-services.sh         # æ¸…ç†è„šæœ¬
scripts/test-integration.sh         # é›†æˆæµ‹è¯• (åˆå¹¶å¤šä¸ªæµ‹è¯•è„šæœ¬åŠŸèƒ½)
scripts/validate-system.sh          # ç³»ç»ŸéªŒè¯ (åˆå¹¶å¤šä¸ªéªŒè¯è„šæœ¬åŠŸèƒ½)

# åˆ é™¤44ä¸ªé‡å¤è„šæœ¬ (åˆ†æ‰¹åˆ é™¤ï¼Œé¿å…ç ´åç°æœ‰åŠŸèƒ½):
# ç¬¬ä¸€æ‰¹: åˆ é™¤æ˜æ˜¾é‡å¤çš„å¯åŠ¨è„šæœ¬ (13ä¸ª)
# ç¬¬äºŒæ‰¹: åˆå¹¶åŠŸèƒ½ç›¸ä¼¼çš„æµ‹è¯•è„šæœ¬ (25ä¸ª)
# ç¬¬ä¸‰æ‰¹: æ¸…ç†å·¥å…·å’Œç›‘æ§è„šæœ¬ (6ä¸ª)
```

#### 1.3 JWTé…ç½®ç»Ÿä¸€ (ä¸­ä¼˜å…ˆçº§)
```go
// åˆ›å»ºç»Ÿä¸€é…ç½®æ¨¡å—: internal/config/jwt.go
package config

type JWTConfig struct {
    Secret     string
    Algorithm  string
    Expiration time.Duration
    Issuer     string
    Audience   string
}

// æ›¿æ¢6ä¸ªæ–‡ä»¶ä¸­çš„é‡å¤å®ç°
// ä½¿ç”¨ // TODO-TEMPORARY: æ ‡è®°è¿‡æ¸¡æœŸå…¼å®¹ä»£ç 
```

### Phase 2: Hookå’Œæ¥å£ç»Ÿä¸€ (2å‘¨å†…å®Œæˆ)

#### 2.1 Hookå®ç°æ”¶æ•›
```typescript
// ä¿ç•™2ä¸ªä¸»è¦Hook:
shared/hooks/useEnterpriseOrganizations.ts  // ä¸»è¦å®ç° (åŠŸèƒ½ä¸°å¯Œ)
shared/hooks/useOrganizations.ts            // ç®€åŒ–ç‰ˆæœ¬ (åŸºç¡€åŠŸèƒ½)

// åˆ›å»ºé€‚é…å™¨åŒ…è£… (ä¸´æ—¶å…¼å®¹):
// TODO-TEMPORARY: é€‚é…å™¨å°†åœ¨2å‘¨åç§»é™¤ï¼Œå®Œæˆè¿ç§»ååˆ é™¤
export const useOrganizationActions = (params) => {
  const { actions } = useEnterpriseOrganizations(params);
  return actions;
};

// é€æ­¥è¿ç§»13ä¸ªæ–‡ä»¶çš„Hookå¼•ç”¨
// åˆ é™¤5ä¸ªå†—ä½™Hookæ–‡ä»¶
```

#### 2.2 ç±»å‹ç³»ç»Ÿé‡æ„
```typescript
// è®¾è®¡8ä¸ªæ ¸å¿ƒæ¥å£ä½“ç³» (shared/types/organization.ts):
export interface OrganizationUnit { ... }              // 1. ä¸»è¦å®ä½“
export interface OrganizationQueryParams { ... }       // 2. æŸ¥è¯¢å‚æ•°  
export interface OrganizationMutationInput { ... }     // 3. å˜æ›´è¾“å…¥
export interface OrganizationResponse { ... }          // 4. å“åº”æ ¼å¼
export interface TemporalOrganizationUnit { ... }      // 5. æ—¶æ€æ‰©å±•
export interface OrganizationTableProps { ... }        // 6. è¡¨æ ¼ç»„ä»¶
export interface OrganizationFormProps { ... }         // 7. è¡¨å•ç»„ä»¶
export interface OrganizationTreeNode { ... }          // 8. æ ‘å½¢èŠ‚ç‚¹

// åˆ é™¤61ä¸ªå†—ä½™æ¥å£å®šä¹‰
// å»ºç«‹ç»Ÿä¸€ç±»å‹å¯¼å‡ºä½“ç³»
```

#### 2.3 APIå®¢æˆ·ç«¯ç»Ÿä¸€
```typescript
// ä¿ç•™ç»Ÿä¸€å®¢æˆ·ç«¯: shared/api/unified-client.ts
// ä¸¥æ ¼éµå¾ªCQRSæ¶æ„:
// - æŸ¥è¯¢æ“ä½œ: GraphQL (ç«¯å£8090)
// - å‘½ä»¤æ“ä½œ: REST API (ç«¯å£9090)

// åˆ›å»ºé€‚é…å™¨ (ä¸´æ—¶å…¼å®¹):
// TODO-TEMPORARY: é€‚é…å™¨å°†åœ¨è¿ç§»å®Œæˆååˆ é™¤
export { 
  unifiedClient as organizationAPI,
  unifiedClient as enterpriseOrganizationAPI 
} from './unified-client';

// åˆ é™¤5ä¸ªé‡å¤å®¢æˆ·ç«¯æ–‡ä»¶
```

### Phase 3: å»ºç«‹çœŸæ­£çš„é˜²æ§æœºåˆ¶ (1ä¸ªæœˆå†…å®Œæˆ)

#### 3.1 é‡å¤ä»£ç æ£€æµ‹ç³»ç»Ÿ (å®é™…åˆ›å»º)
```bash
# å®‰è£…ä¾èµ–:
npm install -D jscpd

# åˆ›å»ºé…ç½®æ–‡ä»¶ .jscpdrc.json:
{
  "threshold": 5,
  "minTokens": 50,
  "minLines": 10,
  "reporters": ["html", "console", "json"],
  "output": "reports/duplicate-code"
}

# åˆ›å»ºæ£€æµ‹è„šæœ¬ scripts/quality/duplicate-detection.sh:
#!/bin/bash
npx jscpd --config .jscpdrc.json
```

#### 3.2 æ¶æ„å®ˆæŠ¤è§„åˆ™ (å®é™…åˆ›å»º)
```javascript
// åˆ›å»ºæ¶æ„éªŒè¯å™¨ scripts/quality/architecture-validator.js
const rules = {
  cqrsCompliance: checkCQRSCompliance,
  portConfigConsistency: checkPortConfig,
  resourceUniqueness: checkResourceUniqueness
};

// åˆ›å»ºESLintè‡ªå®šä¹‰è§„åˆ™ scripts/eslint-rules/
// å»ºç«‹æ¶æ„æŠ¥å‘Š reports/architecture/
```

#### 3.3 CI/CDé›†æˆ (å®é™…åˆ›å»º)
```yaml
# .github/workflows/duplicate-code-detection.yml
name: Duplicate Code Detection
on: [push, pull_request]
jobs:
  detect-duplicates:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run duplicate detection
        run: ./scripts/quality/duplicate-detection.sh
      - name: Fail if threshold exceeded
        run: |
          if [ $(jq '.statistics.total.percentage' reports/duplicate-code/jscpd-report.json) -gt 5 ]; then
            echo "Duplicate code exceeds 5% threshold"
            exit 1
          fi
```

## ğŸ“Š é¢„æœŸæˆæœ (åŸºäºæ‚²è§‚å‡è®¾)

### æ•°é‡åŒ–ç›®æ ‡ (ä¿å®ˆä¼°è®¡)
```yaml
äºŒè¿›åˆ¶æ–‡ä»¶: 12ä¸ª â†’ 2ä¸ª (å‡å°‘83%)
å¯åŠ¨è„šæœ¬: 49ä¸ª â†’ 5ä¸ª (å‡å°‘90%)  
Hookå®ç°: 7ä¸ª â†’ 2ä¸ª (å‡å°‘71%)
APIå®¢æˆ·ç«¯: 6ä¸ª â†’ 1ä¸ª (å‡å°‘83%)
ç±»å‹æ¥å£: 69ä¸ª â†’ 8ä¸ª (å‡å°‘88%)

æ•´ä½“é‡å¤åº¦: ä¼°è®¡ä»60-80% â†’ ç›®æ ‡<10%
ç»´æŠ¤å¤æ‚åº¦: é¢„è®¡é™ä½70%
å¼€å‘å›°æƒ‘åº¦: é¢„è®¡é™ä½80%
```

### é£é™©è¯„ä¼° (æ‚²è§‚é¢„æœŸ)
- **ç ´åç°æœ‰åŠŸèƒ½é£é™©**: ä¸­ç­‰ (30-40%å¯èƒ½æ€§)
- **è¿ç§»æ—¶é—´è¶…æœŸé£é™©**: é«˜ (60-70%å¯èƒ½æ€§)
- **å›¢é˜Ÿé€‚åº”æˆæœ¬**: ä¸­ç­‰ (éœ€è¦2-4å‘¨é€‚åº”æœŸ)
- **å›æ»šéœ€æ±‚é£é™©**: ä½-ä¸­ç­‰ (20-30%å¯èƒ½æ€§)

## ğŸ›¡ï¸ éµå¾ªCLAUDE.mdåŸåˆ™çš„é˜²æŠ¤æœºåˆ¶

### è¯šå®åŸåˆ™é˜²æŠ¤ (ç¬¬1æ¡)
- [ ] å®Œæˆåº¦å£°æ˜å¿…é¡»åŸºäºå®é™…æ–‡ä»¶éªŒè¯
- [ ] ç¦æ­¢ä½¿ç”¨ç»å¯¹åŒ–è¡¨è¿° ("å®Œå…¨"ã€"å½»åº•"ã€"100%")
- [ ] å»ºç«‹ç¬¬ä¸‰æ–¹éªŒè¯æœºåˆ¶
- [ ] é—®é¢˜é€æ˜åŒ–æŠ¥å‘Šï¼Œä¸éšè—æŠ€æœ¯å€ºåŠ¡

### èµ„æºå”¯ä¸€æ€§é˜²æŠ¤ (ç¬¬10æ¡)  
- [ ] èµ„æºåˆ›å»ºå‰å¼ºåˆ¶æ£€æŸ¥ç°æœ‰å®ç°
- [ ] å®šæœŸèµ„æºæ¸…ç†å®¡è®¡ (æ¯æœˆæ‰§è¡Œ)
- [ ] å¼ºåˆ¶å‘½åè§„èŒƒæ£€æŸ¥
- [ ] äºŒä¹‰æ€§åç¼€åŠæ—¶æ¸…ç†ä¹‰åŠ¡

### å¥å£®æ–¹æ¡ˆé˜²æŠ¤ (ç¬¬3æ¡)
- [ ] ä¸´æ—¶æ–¹æ¡ˆå¼ºåˆ¶æ ‡æ³¨: `// TODO-TEMPORARY: [åŸå› ] [æœŸé™]`
- [ ] ä¸´æ—¶æ–¹æ¡ˆæ—¶é—´é™åˆ¶: ä¸è¶…è¿‡ä¸€ä¸ªå¼€å‘å‘¨æœŸ
- [ ] æ‹’ç»æƒå®œä¹‹è®¡ï¼Œä¼˜å…ˆæ ¹æœ¬è§£å†³
- [ ] æŠ€æœ¯å€ºåŠ¡é€æ˜åŒ–è®°å½•

### ç¦æ­¢å¤¸å¤§é˜²æŠ¤ (ç¬¬5æ¡)
- [ ] æ•ˆæœæè¿°åŸºäºå®é™…æµ‹è¯•æ•°æ®
- [ ] è°¨æ…ç”¨è¯ï¼Œé¿å…æ„Ÿæ€§æè¿°
- [ ] ä¿å®ˆçš„æ€§èƒ½é¢„æœŸå’Œæ—¶é—´ä¼°ç®—
- [ ] å®¢è§‚æŠ¥å‘Šï¼Œé‡ç‚¹è¯´æ˜å…·ä½“æ”¹è¿›

## ğŸ“‹ è´¨é‡éªŒæ”¶æ ‡å‡† (ç¬¦åˆCLAUDE.md)

### è¯šå®æ ‡å‡†
- [ ] æ‰€æœ‰å®Œæˆåº¦å£°æ˜åŸºäºå¯éªŒè¯çš„å®é™…ç»“æœ
- [ ] æ€§èƒ½æ•°æ®åŸºäºçœŸå®æµ‹è¯•ç¯å¢ƒ
- [ ] é—®é¢˜å’Œé£é™©é€æ˜åŒ–æŠ«éœ²
- [ ] æ— å¤¸å¤§è¯æ±‡å’Œç»å¯¹åŒ–è¡¨è¿°

### å”¯ä¸€æ€§æ ‡å‡†  
- [ ] æ¯ç§åŠŸèƒ½åªæœ‰ä¸€ä¸ªä¸»è¦å®ç°
- [ ] èµ„æºå‘½åæ¸…æ™°æ— äºŒä¹‰æ€§
- [ ] ä¸´æ—¶èµ„æºæŒ‰æ—¶æ¸…ç†
- [ ] é‡å¤ç‡ä½äº10%é˜ˆå€¼

### å¥å£®æ€§æ ‡å‡†
- [ ] æ— æœªæ ‡æ³¨çš„æƒå®œä¹‹è®¡
- [ ] æ ¹æœ¬åŸå› å¾—åˆ°è§£å†³
- [ ] å……åˆ†çš„æµ‹è¯•è¦†ç›–
- [ ] å®Œæ•´çš„å›æ»šè®¡åˆ’

## âš ï¸ é‡è¦å…è´£å£°æ˜

**åŸºäºCLAUDE.mdæ‚²è§‚è°¨æ…åŸåˆ™ (ç¬¬2æ¡)**:
- æœ¬è®¡åˆ’é‡‡ç”¨æ‚²è§‚å‡è®¾ï¼Œé¢„æœŸæœ€åæƒ…å†µåœºæ™¯
- æ—¶é—´ä¼°ç®—åŒ…å«å……è¶³ç¼“å†²ç©ºé—´
- æˆåŠŸç‡é¢„æœŸä¿å®ˆï¼Œä¸º50-70%
- å¯èƒ½éœ€è¦å¤šæ¬¡è¿­ä»£æ‰èƒ½è¾¾åˆ°ç›®æ ‡
- å»ºè®®æ¸è¿›å¼æ‰§è¡Œï¼Œä»å°è§„æ¨¡å¼€å§‹éªŒè¯

**åŸºäºè¯šå®åŸåˆ™ (ç¬¬1æ¡)**:
- æ‰¿è®¤é¡¹ç›®å½“å‰å­˜åœ¨ä¸¥é‡æŠ€æœ¯å€ºåŠ¡
- æ¸…ç†å·¥ä½œæ¯”é¢„æœŸæ›´å¤æ‚å’Œè€—æ—¶
- å¯èƒ½éœ€è¦é¢å¤–èµ„æºå’Œæ—¶é—´æŠ•å…¥
- ä¸ä¿è¯ä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰é—®é¢˜

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£å°†åŸºäºå®é™…æ‰§è¡Œç»“æœæŒç»­æ›´æ–°ï¼Œä¸¥æ ¼éµå¾ªè¯šå®åŸåˆ™ï¼Œä¸å…è®¸è™šå‡å£°æ˜ã€‚  
**æœ€åæ›´æ–°**: 2025-09-08  
**ä¸‹æ¬¡å®¡æŸ¥**: 2025-09-15 (åŸºäºPhase 1å®é™…æ‰§è¡Œç»“æœ)