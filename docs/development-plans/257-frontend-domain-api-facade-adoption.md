# Plan 257 - 前端领域 API Facade 采纳

文档编号: 257  
标题: 前端领域 API Facade 采纳（来源：202 计划拆分）  
创建日期: 2025-11-15  
版本: v1.0  
关联计划: 202、241（前端合流）、242/244/245（命名与类型统一）

---

## 1. 目标
- 在前端层收敛领域 API Facade，隔离契约调整、提升可测性与可替换性；
- 与 242/244/245 的命名与类型统一协同，避免双事实来源。

## 2. 交付物
- Facade 最小模式与接入示例（只引用前端 shared/api/）；
- 统一错误与重试策略（索引约定）；
- 证据：logs/plan257/*（采纳前/后对比）。

## 3. 验收标准
- 关键页面迁移至 Facade 调用；
- ESLint/AST 规则启用并在 CI 中统计“Facade 覆盖率”；
- E2E 对关键路径稳定（不退化）。

---

维护者: 前端（与契约治理协作）

---

## 4. 覆盖率度量与门禁（CI）
- 覆盖率口径：
  - 分子：通过领域 Facade 的业务调用点数量（按 import + 方法签名识别）
  - 分母：所有对统一客户端（unifiedGraphQLClient/unifiedRESTClient）或 fetch/axios 的直接业务调用点数量
  - 覆盖率=分子/分母（目标门槛：组织/职位模块 ≥80%）
- 实现方式：
  - ESLint 规则禁止直接 fetch/axios；对 unified 客户端直连仅告警但计数
  - AST 扫描脚本输出覆盖率报表（JSON），作为 CI 工件上传
  - 低于门槛阻断合并；临时豁免必须以 `// TODO-TEMPORARY(YYYY-MM-DD):` 标注并在 215/06 登记
