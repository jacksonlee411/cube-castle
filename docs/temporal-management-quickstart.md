# 时态管理系统快速开始指南

## 🚀 5分钟快速上手

### 第一步：启动系统
```bash
cd /home/shangmeilin/cube-castle
./scripts/start-cqrs-complete.sh
```

等待所有服务启动完成后，访问：http://localhost:3000

### 第二步：基础操作演示

#### 2.1 查看当前组织架构
1. 进入主页面，查看组织列表
2. 点击任意组织的"时态管理"按钮
3. 在左侧时间轴中查看当前版本（🟢绿点）

#### 2.2 创建第一个时态版本
1. 点击时间轴上方的"+"按钮
2. 填写表单：
   - **组织名称**: 测试部门v2
   - **事件类型**: UPDATE
   - **生效日期**: 2025-09-01（未来日期）
   - **变更原因**: 组织升级测试
3. 点击"提交"，查看时间轴上的新蓝点🔵

#### 2.3 查看时间线可视化
1. 在右侧面板中，点击"📊 时间线可视化"选项卡
2. 查看完整的变更历史事件
3. 点击事件节点展开详细信息

#### 2.4 执行时态查询
1. 使用API进行查询测试：
```bash
# 查询当前状态
curl "http://localhost:9091/api/v1/organization-units/1000056/temporal"

# 查询历史状态  
curl "http://localhost:9091/api/v1/organization-units/1000056/temporal?as_of_date=2025-08-01"

# 查看时间线
curl "http://localhost:9091/api/v1/organization-units/1000056/timeline"
```

### 第三步：验证系统功能
1. **数据同步验证**: 创建版本后，查看GraphQL查询是否能获取到最新数据
2. **缓存验证**: 重复相同查询，观察响应时间是否明显减少
3. **时间连续性验证**: 删除一个中间版本，确认时间线自动填补

## ⚡ 常用操作速查

### API端点速查
- **健康检查**: `GET /health`
- **时态查询**: `GET /api/v1/organization-units/{code}/temporal`
- **事件创建**: `POST /api/v1/organization-units/{code}/events`
- **版本删除**: `DELETE /api/v1/organization-units/{code}/temporal/{date}`
- **时间线查询**: `GET /api/v1/organization-units/{code}/timeline`

### 界面操作速查
- **新增版本**: 时间轴面板顶部"+"按钮
- **编辑版本**: 选中版本后点击详情面板"编辑"按钮
- **删除版本**: 版本节点上的删除按钮或详情面板"作废"按钮
- **切换视图**: 右侧面板的选项卡（详情/时间线）
- **刷新数据**: 页面顶部"🔄 刷新"按钮

### 故障排除速查
```bash
# 检查服务状态
curl http://localhost:9091/health
curl http://localhost:8090/health  
curl http://localhost:9090/health

# 重启服务
./scripts/start-cqrs-complete.sh

# 查看服务日志
docker-compose logs -f
```

## 🎯 典型使用场景

### 场景1：季度组织架构调整
**业务需求**: 需要在季度末进行组织架构调整

**操作步骤**:
1. 创建调整计划版本（生效日期设为季度末）
2. 设置事件类型为"RESTRUCTURE"  
3. 填写详细的重构原因
4. 在生效前可随时编辑调整
5. 生效后自动成为当前版本

### 场景2：历史合规性审计
**业务需求**: 需要查询指定时间点的组织架构状态

**操作步骤**:
1. 使用时间点查询API，设置as_of_date参数
2. 或在界面中选择历史查询模式
3. 导出查询结果用于审计报告
4. 查看该时点的完整组织层级关系

### 场景3：变更影响分析  
**业务需求**: 分析某段时间内的组织变更频率和影响

**操作步骤**:
1. 使用时间线可视化功能
2. 设置日期范围过滤
3. 查看变更事件的密度和类型
4. 分析变更原因和业务影响

## 🔍 深入学习

完成快速上手后，建议继续学习：

1. **[完整用户指南](./temporal-management-user-guide.md)** - 详细的功能说明
2. **[API接口文档](./api/temporal-management-api.md)** - 完整的API参考
3. **[系统架构文档](../CLAUDE.md)** - 技术架构和设计原理
4. **[故障排除指南](./troubleshooting.md)** - 常见问题解决方案

## 💡 小贴士

- **版本命名规范**: 建议使用有意义的名称，如"2025Q3重组计划"
- **变更原因重要性**: 详细的变更原因有助于后期审计和问题排查  
- **测试先行**: 重要变更建议先在测试环境验证
- **权限管理**: 根据职责分配合适的操作权限
- **定期备份**: 重要操作前做好数据备份

---

*快速开始指南 - 5分钟掌握时态管理核心功能*