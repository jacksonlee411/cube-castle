# 📋 Cube Castle 文档管理规范

**版本**: v1.0  
**创建日期**: 2025-09-08  
**维护团队**: 项目维护团队  
**遵循原则**: CLAUDE.md 资源唯一性和命名规范原则

## 🎯 文档管理目标

基于CLAUDE.md第10条"资源唯一性和命名规范原则"，建立统一的文档管理标准，防止文档散乱、重复和过时问题的再次出现。

## 📂 标准文档目录结构

### 根目录文档（限制为4个核心文档）
```
├── CLAUDE.md              # 项目指导原则和架构记忆
├── AGENTS.md              # Agent配置说明
├── README.md              # 项目介绍和快速开始
└── CHANGELOG.md           # 版本变更历史
```

### docs/ 目录结构（现行）
```
docs/
├── reference/           # 长期稳定的权威参考（查询、指南、清单）
├── development-plans/   # 开发计划文档（序号排序，含 archived/）
│   ├── 00-README.md
│   ├── 02-technical-architecture-design.md
│   └── [其他计划文档]
├── architecture/        # 架构设计文档（非契约，说明为主）
├── development-guides/  # 开发指南（前端 UI/组件规范等）
├── development-tools/   # 开发工具文档
├── api/                 # API 契约（OpenAPI/GraphQL）
└── archive/             # 历史文档归档
    ├── deprecated-*/    # 废弃的不同类型文档
    └── project-reports/ # 项目报告归档
```

## 🚨 文档创建和维护规范

### 1. 新文档创建规范
- **强制检查**: 创建前必须检查是否已存在相似内容的文档
- **路径规范**: 必须按照标准目录结构放置
- **命名规范（强制）**:
  - 文件名一律使用 kebab-case（例如：`production-deployment-guide.md`），可选数字前缀用于排序（例如：`02-technical-architecture-design.md`）。
  - 允许的例外：`README.md`、`CHANGELOG.md`、`ADR-###-*.md`、`00-README.md`/`01-*.md` 这类索引性文件。
  - 禁止使用：`-final`、`-fix`、`-v2`、`-temp` 等二义性后缀；避免 `UPPER_SNAKE_CASE.md` 命名（除上述例外）。
  - API 字段命名在文档示例中一律采用 camelCase（与实现保持一致）。
- **版本管理**: 重要文档需要版本号和维护记录

### 目录边界（强制）
- `docs/reference/` 仅存放“长期稳定、对外可依赖”的参考资料（快速参考、实现清单、API 使用与质量手册）。
- `docs/development-plans/` 仅存放“计划/路线/进展/阶段报告”，完成后移入 `archived/`；不得承载规范性参考。
- 契约以 `docs/api/` 为唯一事实来源；架构说明在 `docs/architecture/`。

### 2. 文档更新规范
- **及时更新**: 项目状态变更时必须同步更新相关文档
- **一致性检查**: 更新时需要检查相关文档的一致性
- **变更记录**: 重要变更需要在CHANGELOG.md中记录

### 3. 文档归档规范
- **定期清理**: 每月执行一次文档状态检查
- **归档标准**: 
  - 过时的架构文档 → docs/archive/deprecated-*/
  - 完成的项目报告 → docs/archive/project-reports/
  - 测试文件和临时文档 → archive/test-files-deprecated/
- **删除标准**: 
  - 测试HTML文件（功能完成后）
  - 临时JSON配置文件
  - 过期的日志文件（>7天）

## 📋 禁止事项

### 绝对禁止
- **根目录文档泛滥**: 根目录只允许4个核心文档
- **二义性后缀**: 禁止 -fix, -final, -v2, -temp 等后缀
- **重复内容**: 同一主题不允许存在多个文档版本
- **临时文档永久化**: 测试、调试文件不得长期保留在根目录

### 严格控制
- **配置文件分散**: P3防控系统配置文件除外，其他配置应集中管理
- **README文件泛滥**: 每个目录最多1个README.md
- **测试报告散布**: 所有测试报告必须归档到统一位置

## 🛡️ 自动化防控机制

### P3防控系统集成
- **重复检测**: 使用.jscpdrc.json配置的重复内容检测
- **架构守护**: .eslintrc.architecture.js规则检查文档路径合规性
- **文档同步**: 定期检查关键文档的一致性

### Git Hook集成
- **Pre-commit检查**: 提交前验证文档路径和命名规范
- **CI/CD门禁**: 自动检查文档结构违规

## 🔍 定期审计要求

### 月度审计（每月第一个工作日执行）
- [ ] 检查根目录是否仅有4个核心文档
- [ ] 验证docs/目录结构是否符合规范
- [ ] 识别需要归档的过时文档
- [ ] 清理测试和临时文件
- [ ] 抽样检查命名规范（kebab-case/数字前缀/例外白名单），无 `-final/-temp` 等后缀，无不当 `UPPER_SNAKE_CASE.md`
- [ ] 抽样检查 API 示例字段命名为 camelCase，路径参数为 `{code}`，与 CLAUDE.md 一致
- [ ] 校验目录边界：`reference/` 不含计划/进展类文档；`development-plans/` 不含规范性参考文档
- [ ] 校验导航一致性：`docs/README.md` 与各目录 `00-README.md` 的边界说明存在且一致

### 季度深度清理（每季度最后一周执行）
- [ ] 全面审查文档内容的时效性
- [ ] 检查重复内容和不一致信息
- [ ] 更新文档管理规范（如需要）
- [ ] 评估文档管理效果和改进方案

## 📊 质量指标

### 健康指标
- **根目录文档数量**: ≤ 4个
- **重复文档率**: < 5%
- **过时文档比例**: < 10%
- **文档路径规范性**: 100%

### 告警阈值
- **根目录文档 > 6个**: 立即清理
- **重复文档率 > 10%**: 紧急整理
- **临时文件滞留 > 7天**: 强制归档

## 🚀 执行检查清单

### 新项目成员必读
- [ ] 阅读并理解CLAUDE.md第10条原则
- [ ] 熟悉标准文档目录结构
- [ ] 了解文档创建和维护规范
- [ ] 掌握P3防控系统使用方法

### 文档操作前检查
- [ ] 确认文档放置位置是否正确
- [ ] 检查是否存在重复内容
- [ ] 验证命名是否符合规范
- [ ] 评估是否需要版本控制

## ⚠️ 违规处理

### 轻微违规（警告）
- 文档命名不规范
- 路径选择不当
- 缺少维护信息

### 严重违规（强制修正）
- 根目录文档泛滥
- 大量重复内容
- 长期滞留的临时文件

### 极严重违规（回滚变更）
- 违反P3防控系统规则
- 破坏现有文档结构
- 引入大量技术债务

## 📞 支持和反馈

- **规范咨询**: 通过issue或PR讨论
- **改进建议**: 欢迎提出文档管理改进方案
- **违规报告**: 发现违规行为请及时报告

---

**遵循原则**: CLAUDE.md 诚实原则、健壮方案优先原则、资源唯一性原则
**最后更新**: 2025-09-08
**下次审查**: 2025-10-08
