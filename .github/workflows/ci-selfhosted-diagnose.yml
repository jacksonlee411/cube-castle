name: CI (Self-Hosted Diagnose)

on:
  workflow_dispatch: {}
  push:
    branches: [ master ]
    paths:
      - '.github/workflows/ci-selfhosted-diagnose.yml'

jobs:
  diag:
    name: Self-Hosted Runner Diagnose
    runs-on: [self-hosted, cubecastle, docker]
    timeout-minutes: 10
    steps:
      - name: Print runner environment
        run: |
          uname -a || true
          id || true
      - name: Docker/Compose versions
        run: |
          docker --version
          docker compose version
      - name: Minimal compose config check
        run: |
          docker compose -f docker-compose.dev.yml config -q || true
      - name: Done
        run: echo "âœ… Self-hosted diagnose OK"

