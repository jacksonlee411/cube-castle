// Code generated by metacontract-compiler. DO NOT EDIT.
package schema

import (
	"time"

	"entgo.io/ent"
	"entgo.io/ent/schema/edge"
	"entgo.io/ent/schema/field"
	"entgo.io/ent/schema/index"
	"github.com/google/uuid"

	"github.com/gaogu/cube-castle/go-app/internal/ent/annotations"
)

// Person holds the schema definition for person.
type Person struct {
	ent.Schema
}

// Fields of Person.
func (Person) Fields() []ent.Field {
	return []ent.Field{

		field.UUID("id").NotEmpty().Unique().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.UUID("tenant_id").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.String("employee_id").NotEmpty().Unique().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.String("legal_name").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "CONFIDENTIAL"}),

		field.String("preferred_name").Annotations(annotations.MetaContractAnnotation{DataClassification: "CONFIDENTIAL"}),

		field.String("email").NotEmpty().Unique().Annotations(annotations.MetaContractAnnotation{DataClassification: "CONFIDENTIAL"}),

		field.String("status").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.Time("hire_date").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.Time("termination_date").Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.Time("created_at").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),

		field.Time("updated_at").NotEmpty().Annotations(annotations.MetaContractAnnotation{DataClassification: "INTERNAL"}),
	}
}

// Edges of Person.
func (Person) Edges() []ent.Edge {
	return []ent.Edge{

		edge.To("manager", Person.Type).Unique(),

		edge.To("direct_reports", Person.Type),

		edge.To("organization", Organization.Type).Unique().Required(),
	}
}

// Indexes of Person.
func (Person) Indexes() []ent.Index {
	return []ent.Index{
		// Tenant isolation index
		index.Fields("tenant_id"),

		// Time-based query optimization

		index.Fields("tenant_id", "effective_date"),
	}
}

// Annotations of Person.
func (Person) Annotations() []schema.Annotation {
	return []schema.Annotation{
		annotations.MetaContractAnnotation{
			DataClassification: "CONFIDENTIAL",
			ComplianceTags: []string{

				"GDPR",

				"SOX",

				"PII",
			},

			PersistenceProfile: &annotations.PersistenceProfile{
				PrimaryStore: "postgresql",
				IndexedIn: []string{

					"postgresql",

					"neo4j",
				},
				GraphNodeLabel: "Person",
				GraphEdgeDefinitions: []string{

					"WORKS_FOR -> Organization",

					"REPORTS_TO -> Person",

					"MEMBER_OF -> Team",
				},
			},
		},
	}
}
